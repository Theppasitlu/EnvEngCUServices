/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var t={947:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(81),i=n.n(r),o=n(645),a=n.n(o)()(i());a.push([t.id,"* { box-sizing:border-box; }\n\nbody {\n\tfont-family: Helvetica;\n\tbackground: #eee;\n  -webkit-font-smoothing: antialiased;\n}\n\n.header { \n\ttext-align:center;\n\tmargin-top: 4em;\n}\n\nh1, h3 { font-weight: 300; }\n\nh1 { color: #636363; }\n\nh3 { color: #4a89dc; }\n\nform {\n\twidth: 380px;\n\tmargin: 4em auto;\n\tpadding: 3em 2em 2em 2em;\n\tbackground: #fafafa;\n\tborder: 1px solid #ebebeb;\n\tbox-shadow: rgba(0,0,0,0.14902) 0px 1px 1px 0px,rgba(0,0,0,0.09804) 0px 1px 2px 0px;\n}\n\n.group { \n\tposition: relative; \n\tmargin-bottom: 45px; \n}\n\ninput {\n\tfont-size: 18px;\n\tpadding: 10px 10px 10px 5px;\n\t-webkit-appearance: none;\n\tdisplay: block;\n\tbackground: #fafafa;\n\tcolor: #636363;\n\twidth: 100%;\n\tborder: none;\n\tborder-radius: 0;\n\tborder-bottom: 1px solid #757575;\n}\n\ninput:focus { outline: none; }\n\n\n/* Label */\n\nlabel {\n\tcolor: #999; \n\tfont-size: 18px;\n\tfont-weight: normal;\n\tposition: absolute;\n\tpointer-events: none;\n\tleft: 5px;\n\ttop: 10px;\n\ttransition: all 0.2s ease;\n}\n\n/* Error Label */\n\n.errorlabel {\n\tfont-size: 18px;\n\tpadding: 10px 10px 10px 5px;\n\t-webkit-appearance: none;\n\tdisplay: block;\n\tbackground: #fafafa;\n\tcolor: #ff0000;\n\twidth: 100%;\n\tborder: none;\n\tborder-radius: 0;\n\tborder-bottom: 1px solid #ff0000;\n}\n\n\n/* active */\n\ninput:focus ~ label, input.used ~ label {\n\ttop: -20px;\n  transform: scale(.75); left: -2px;\n\t/* font-size: 14px; */\n\tcolor: #4a89dc;\n}\n\n\n/* Underline */\n\n.bar {\n\tposition: relative;\n\tdisplay: block;\n\twidth: 100%;\n}\n\n.bar:before, .bar:after {\n\tcontent: '';\n\theight: 2px; \n\twidth: 0;\n\tbottom: 1px; \n\tposition: absolute;\n\tbackground: #4a89dc; \n\ttransition: all 0.2s ease;\n}\n\n.bar:before { left: 50%; }\n\n.bar:after { right: 50%; }\n\n\n/* active */\n\ninput:focus ~ .bar:before, input:focus ~ .bar:after { width: 50%; }\n\n\n/* Highlight */\n\n.highlight {\n\tposition: absolute;\n\theight: 60%; \n\twidth: 100px; \n\ttop: 25%; \n\tleft: 0;\n\tpointer-events: none;\n\topacity: 0.5;\n}\n\n\n/* active */\n\ninput:focus ~ .highlight {\n\tanimation: inputHighlighter 0.3s ease;\n}\n\n\n/* Animations */\n\n@keyframes inputHighlighter {\n\tfrom { background: #4a89dc; }\n\tto \t{ width: 0; background: transparent; }\n}\n\n\n/* Button */\n\n.button {\n  position: relative;\n  display: inline-block;\n  padding: 12px 24px;\n  margin: .3em 0 1em 0;\n  width: 100%;\n  vertical-align: middle;\n  color: #fff;\n  font-size: 16px;\n  line-height: 20px;\n  -webkit-font-smoothing: antialiased;\n  text-align: center;\n  letter-spacing: 1px;\n  background: transparent;\n  border: 0;\n  border-bottom: 2px solid #3160B6;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n.button:focus { outline: 0; }\n\n\n/* Button modifiers */\n\n.buttonBlue {\n  background: #4a89dc;\n  text-shadow: 1px 1px 0 rgba(39, 110, 204, .5);\n}\n\n.buttonBlue:hover { background: #357bd8; }\n\n\n/* Ripples container */\n\n.ripples {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background: transparent;\n}\n\n\n/* Ripples circle */\n\n.ripplesCircle {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  opacity: 0;\n  width: 0;\n  height: 0;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.25);\n}\n\n.ripples.is-active .ripplesCircle {\n  animation: ripples .4s ease-in;\n}\n\n\n/* Ripples animation */\n\n@keyframes ripples {\n  0% { opacity: 0; }\n\n  25% { opacity: 1; }\n\n  100% {\n    width: 200%;\n    padding-bottom: 200%;\n    opacity: 0;\n  }\n}\n\nfooter { text-align: center; }\n\nfooter p {\n\tcolor: #888;\n\tfont-size: 13px;\n\tletter-spacing: .4px;\n}\n\nfooter a {\n\tcolor: #4a89dc;\n\ttext-decoration: none;\n\ttransition: all .2s ease;\n}\n\nfooter a:hover {\n\tcolor: #666;\n\ttext-decoration: underline;\n}\n\nfooter img {\n\twidth: 80px;\n\ttransition: all .2s ease;\n}\n\nfooter img:hover { opacity: .83; }\n\nfooter img:focus , footer a:focus { outline: none; }",""]);const s=a},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var u=this[s][0];null!=u&&(a[u]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);r&&a[h[0]]||(void 0!==o&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=o),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),i&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=i):h[4]="".concat(i)),e.push(h))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},a=[],s=0;s<t.length;s++){var u=t[s],c=r.base?u[0]+r.base:u[0],h=o[c]||0,l="".concat(c," ").concat(h);o[c]=h+1;var f=n(l),p={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==f)e[f].references++,e[f].updater(p);else{var d=i(p,r);r.byIndex=s,e.splice(s,0,{identifier:l,updater:d,references:1})}a.push(l)}return a}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var u=r(t,i),c=0;c<o.length;c++){var h=n(o[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}o=u}}},569:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nc=void 0,(()=>{var t={};n.r(t);var e={};n.r(e);var r=n(379),i=n.n(r),o=n(795),a=n.n(o),s=n(569),u=n.n(s),c=n(565),h=n.n(c),l=n(216),f=n.n(l),p=n(589),d=n.n(p),v=n(947),m={};m.styleTagTransform=d(),m.setAttributes=h(),m.insert=u().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=f(),i()(v.Z,m),v.Z&&v.Z.locals&&v.Z.locals;var y=function(t,e){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},y(t,e)};function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var b=function(){return b=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},b.apply(this,arguments)};function w(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function I(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function T(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function E(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function _(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var h=a<<4&240|s>>2;if(r.push(h),64!==u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function A(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=A(t[n],e[n]));return t}var N=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function k(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var D=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,C.prototype.create),o}return g(e,t),e}(Error),C=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?function(t,e){return t.replace(O,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").";return new D(i,s,r)},t}(),O=/\{\$([^}]+)}/g;function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function x(t,e){var n=new P(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782),i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var P=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function L(){}function M(t){return t&&t._delegate?t._delegate:t}var F,V=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),U="[DEFAULT]",j=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new N;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:U})}catch(t){}try{for(var r=T(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=E(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=U),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return w(this,void 0,void 0,(function(){var t;return I(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(_(_([],E(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),E(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=U),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var s=T(this.instancesDeferred.entries()),u=s.next();!u.done;u=s.next()){var c=E(u.value,2),h=c[0],l=c[1];o===this.normalizeInstanceIdentifier(h)&&l.resolve(a)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(a,o),a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=T(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===U?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=U),this.component?this.component.multipleInstances?t:U:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),q=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new j(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function B(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var K,G=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(K||(K={}));var H,z={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},W=K.INFO,Q=((F={})[K.DEBUG]="log",F[K.VERBOSE]="log",F[K.INFO]="info",F[K.WARN]="warn",F[K.ERROR]="error",F),X=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Q[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,B(["["+i+"]  "+t.name+":"],n))}},Y=function(){function t(t){this.name=t,this._logLevel=W,this._logHandler=X,this._userLogHandler=null,G.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in K))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?z[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,B([this,K.DEBUG],t)),this._logHandler.apply(this,B([this,K.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,B([this,K.VERBOSE],t)),this._logHandler.apply(this,B([this,K.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,B([this,K.INFO],t)),this._logHandler.apply(this,B([this,K.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,B([this,K.WARN],t)),this._logHandler.apply(this,B([this,K.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,B([this,K.ERROR],t)),this._logHandler.apply(this,B([this,K.ERROR],t))},t}();function J(t){G.forEach((function(e){e.setLogLevel(t)}))}var $,Z=((H={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",H["bad-app-name"]="Illegal App name: '{$appName}",H["duplicate-app"]="Firebase App named '{$appName}' already exists",H["app-deleted"]="Firebase App named '{$appName}' already deleted",H["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",H["invalid-log-argument"]="First argument to `onLog` must be null or a function.",H),tt=new C("app","Firebase",Z),et="@firebase/app",nt="[DEFAULT]",rt=(($={})[et]="fire-core",$["@firebase/analytics"]="fire-analytics",$["@firebase/app-check"]="fire-app-check",$["@firebase/auth"]="fire-auth",$["@firebase/database"]="fire-rtdb",$["@firebase/functions"]="fire-fn",$["@firebase/installations"]="fire-iid",$["@firebase/messaging"]="fire-fcm",$["@firebase/performance"]="fire-perf",$["@firebase/remote-config"]="fire-rc",$["@firebase/storage"]="fire-gcs",$["@firebase/firestore"]="fire-fst",$["fire-js"]="fire-js",$["firebase-wrapper"]="fire-js-all",$),it=new Y("@firebase/app"),ot=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=A(void 0,t),this.container=new q(e.name),this._addComponent(new V("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=nt),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=nt),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){it.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw tt.create("app-deleted",{appName:this.name_})},t}();ot.prototype.name&&ot.prototype.options||ot.prototype.delete||console.log("dc");var at=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=nt);var a=o.name;if("string"!=typeof a||!a)throw tt.create("bad-app-name",{appName:String(a)});if(R(e,a))throw tt.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=rt[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void it.warn(u.join(" "))}o(new V(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:J,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw tt.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=z[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:K[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=G;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:"8.6.8",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!R(e,t=t||nt))throw tt.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return it.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw tt.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&A(s,o.serviceProps),r[a]=s,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(ot);return e.INTERNAL=b(b({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){A(e,t)},createSubscribe:x,ErrorFactory:C,deepExtend:A}),e}(),st=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){it.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ut=self.firebase.SDK_VERSION;ut&&ut.indexOf("LITE")>=0&&it.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ct=at.initializeApp;at.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}()&&it.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),ct.apply(void 0,t)};var ht=at;!function(t,e){t.INTERNAL.registerComponent(new V("platform-logger",(function(t){return new st(t)}),"PRIVATE")),t.registerVersion(et,"0.6.27",void 0),t.registerVersion("fire-js","")}(ht);const lt=ht;(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,n){if(n){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[t=t[t.length-1]]))!=o&&null!=n&&e(i,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=r.setTimeout;n.prototype.c=function(t){a(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),a=r.next();!a.done;a=r.next())i(a.value).Ra(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Ra(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var a=a||{},s=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function l(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==f(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++g)}var y="closure_uid_"+(1e9*Math.random()>>>0),g=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now;function _(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t){return t}function A(t,e,n){this.code=D+t,this.message=e||C[t]||"",this.a=n||null}function N(t){var e=t&&t.code;return e?new A(e.substring(D.length),t.message,t.serverResponse):null}_(A,Error),A.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.w()};var k,D="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},O={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function R(t){for(var e in O)if(O[e].id===t)return{firebaseEndpoint:(t=O[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function P(t){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function M(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function V(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}k=R("__EID__")?"__EID__":void 0,_(P,Error),P.prototype.name="CustomError",_(L,P),L.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var j=new F((function(){return new B}),(function(t){t.reset()}));function q(){var t=be,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=j.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var K=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},G=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=K(t,e)}function X(t,e){var n;return(n=0<=(e=K(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function J(t){return Array.prototype.concat.apply([],arguments)}function $(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,at=/\x00/g,st=/[\x00&<>"']/;function ut(t,e){return-1!=t.indexOf(e)}function ct(t,e){return t<e?-1:t>e?1:0}t:{var ht=s.navigator;if(ht){var ft=ht.userAgent;if(ft){Z=ft;break t}}Z=""}function pt(t){return ut(Z,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function mt(t){var e,n={};for(e in t)n[e]=t[e];return n}var yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<yt.length;o++)n=yt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function wt(t,e){this.a=t===_t&&e||"",this.b=Et}function It(t){return t instanceof wt&&t.constructor===wt&&t.b===Et?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}wt.prototype.ta=!0,wt.prototype.sa=function(){return this.a},wt.prototype.toString=function(){return"Const{"+this.a+"}"};var Tt,Et={},_t={};function St(){if(void 0===Tt){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(t){s.console&&s.console.error(t.message)}Tt=t}else Tt=t}return Tt}function At(t,e){this.a=e===Ot?t:""}function Nt(t){return t instanceof At&&t.constructor===At?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function kt(t,e){var n=It(t);if(!Ct.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=St();return new At(t=e?e.createScriptURL(t):t,Ot)}(t=n.replace(Dt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof wt?It(t):encodeURIComponent(String(t))})))}At.prototype.ta=!0,At.prototype.sa=function(){return this.a.toString()},At.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Dt=/%{(\w+)}/g,Ct=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ot={};function Rt(t,e){this.a=e===Ut?t:""}function xt(t){return t instanceof Rt&&t.constructor===Rt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Rt.prototype.ta=!0,Rt.prototype.sa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Lt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Mt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){if(t instanceof Rt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Mt.test(t))t=new Rt(t,Ut);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Lt);t=e&&Pt.test(e[1])?new Rt(t,Ut):null}return t}function Vt(t){return t instanceof Rt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Mt.test(t)||(t="about:invalid#zClosurez"),new Rt(t,Ut))}var Ut={},jt=new Rt("about:invalid#zClosurez",Ut);function qt(t,e,n){this.a=n===Bt?t:""}qt.prototype.ta=!0,qt.prototype.sa=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Bt={};function Kt(t,e,n,r){return t=t instanceof Rt?t:Vt(t),e=e||s,n=n instanceof wt?It(n):n||"",e.open(xt(t),n,r,void 0)}function Gt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ht(t){return st.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(at,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=l;var Wt,Qt,Xt=pt("Opera"),Yt=pt("Trident")||pt("MSIE"),Jt=pt("Edge"),$t=Jt||Yt,Zt=pt("Gecko")&&!(ut(Z.toLowerCase(),"webkit")&&!pt("Edge"))&&!(pt("Trident")||pt("MSIE"))&&!pt("Edge"),te=ut(Z.toLowerCase(),"webkit")&&!pt("Edge");function ee(){var t=s.document;return t?t.documentMode:void 0}t:{var ne="",re=(Qt=Z,Zt?/rv:([^\);]+)(\)|;)/.exec(Qt):Jt?/Edge\/([\d\.]+)/.exec(Qt):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Qt):te?/WebKit\/(\S+)/.exec(Qt):Xt?/(?:Version)[ \/]?(\S+)/.exec(Qt):void 0);if(re&&(ne=re?re[1]:""),Yt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Wt=String(ie);break t}}Wt=ne}var oe,ae={};function se(t){return function(t,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=tt(String(Wt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ct(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ct(0==a[2].length,0==s[2].length)||ct(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}s.document&&Yt?oe=ee()||parseInt(Wt,10)||void 0:oe=void 0;var ue=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Qt){}var ce=!Yt||9<=Number(ue);function he(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function le(t,e){dt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:de.hasOwnProperty(n)?t.setAttribute(de[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var fe,pe,de={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function me(t){s.setTimeout((function(){throw t}),0)}function ye(t,e){pe||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);pe=function(){t.then(we)}}else pe=function(){var t=we;!d(s.setImmediate)||s.Window&&s.Window.prototype&&!pt("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(fe||(fe=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!pt("Presto")&&(t=function(){var t=ve(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!pt("Trident")&&!pt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),fe(t)):s.setImmediate(t)}}(),ge||(pe(),ge=!0),be.add(t,e)}var ge=!1,be=new U;function we(){for(var t;t=q();){try{t.a.call(t.b)}catch(t){me(t)}V(j,t)}ge=!1}function Ie(t,e){if(this.a=Te,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Le(n,Ee,t)}),(function(t){if(!(t instanceof Be))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Le(n,_e,t)}))}catch(t){Le(this,_e,t)}}var Te=0,Ee=2,_e=3;function Se(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Se.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ae=new F((function(){return new Se}),(function(t){t.reset()}));function Ne(t,e,n){var r=Ae.get();return r.g=t,r.b=e,r.f=n,r}function ke(t){if(t instanceof Ie)return t;var e=new Ie(l);return Le(e,Ee,t),e}function De(t){return new Ie((function(e,n){n(t)}))}function Ce(t,e,n){Me(t,e,n,null)||ye(T(e,t))}function Oe(t){return new Ie((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ce(t[o],T(i,o,!0),T(i,o,!1));else e(r)}))}function Re(t,e){if(t.a==Te)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Te&&1==r?Re(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ve(n),Ue(n,i,_e,e)))}t.c=null}else Le(t,_e,e)}function xe(t,e){t.b||t.a!=Ee&&t.a!=_e||Fe(t),t.f?t.f.next=e:t.b=e,t.f=e}function Pe(t,e,n,r){var i=Ne(null,null,null);return i.a=new Ie((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Be?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,xe(t,i),i.a}function Le(t,e,n){t.a==Te&&(t===n&&(e=_e,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Me(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Fe(t),e!=_e||n instanceof Be||function(t,e){t.g=!0,ye((function(){t.g&&qe.call(null,e)}))}(t,n)))}function Me(t,e,n,r){if(t instanceof Ie)return xe(t,Ne(e||l,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Fe(t){t.h||(t.h=!0,ye(t.gc,t))}function Ve(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ue(t,e,n,r){if(n==_e&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,je(e,n,r);else try{e.c?e.g.call(e.f):je(e,n,r)}catch(t){qe.call(null,t)}V(Ae,e)}function je(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ie.prototype.then=function(t,e,n){return Pe(this,d(t)?t:null,d(e)?e:null,n)},Ie.prototype.$goog_Thenable=!0,(t=Ie.prototype).oa=function(t,e){return(t=Ne(t,t,e)).c=!0,xe(this,t),this},t.o=function(t,e){return Pe(this,null,t,e)},t.cancel=function(t){if(this.a==Te){var e=new Be(t);ye((function(){Re(this,e)}),this)}},t.$c=function(t){this.a=Te,Le(this,Ee,t)},t.ad=function(t){this.a=Te,Le(this,_e,t)},t.gc=function(){for(var t;t=Ve(this);)Ue(this,t,this.a,this.i);this.h=!1};var qe=me;function Be(t){P.call(this,t)}function Ke(){0!=Ge&&(He[m(this)]=this),this.ya=this.ya,this.pa=this.pa}_(Be,P),Be.prototype.name="cancel";var Ge=0,He={};function ze(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=Ge)){var e=m(t);if(0!=Ge&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete He[e]}}Ke.prototype.ya=!1,Ke.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var We=Object.freeze||function(t){return t},Qe=!Yt||9<=Number(ue),Xe=Yt&&!se("9"),Ye=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(t){}return t}();function Je(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function $e(t,e){if(Je.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{zt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ze[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Je.prototype.preventDefault=function(){this.defaultPrevented=!0},_($e,Je);var Ze=We({2:"touch",3:"pen",4:"mouse"});$e.prototype.preventDefault=function(){$e.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Xe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},$e.prototype.g=function(){return this.a};var tn="closure_listenable_"+(1e6*Math.random()|0),en=0;function nn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++en,this.wa=this.Qa=!1}function rn(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function on(t){this.src=t,this.a={},this.b=0}function an(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(rn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function sn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}on.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=sn(t,e,r,i);return-1<a?(e=t[a],n||(e.Qa=!1)):((e=new nn(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var un="closure_lm_"+(1e6*Math.random()|0),cn={};function hn(t,e,n,r,i){if(r&&r.once)fn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=In(n),t&&t[tn]?En(t,e,n,v(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=bn(t);if(s||(t[un]=s=new on(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=gn,e=Qe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ye||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(vn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function fn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else n=In(n),t&&t[tn]?_n(t,e,n,v(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=In(n),t&&t[tn]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=sn(o=t.a[e],n,r,i))&&(rn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=bn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=sn(e,n,r,i)),(n=-1<t?e[t]:null)&&dn(n))}function dn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[tn])an(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(vn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bn(e))?(an(n,t),0==n.b&&(n.src=null,e[un]=null)):rn(t)}}}function vn(t){return t in cn?cn[t]:cn[t]="on"+t}function mn(t,e,n,r){var i=!0;if((t=bn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=yn(o,r),i=i&&!1!==o)}return i}function yn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&dn(t),n.call(r,e)}function gn(t,e){if(t.wa)return!0;if(!Qe){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new $e(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=mn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=mn(r[i],t,!1,e),n=n&&o}return n}return yn(t,new $e(e,this))}function bn(t){return(t=t[un])instanceof on?t:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function In(t){return d(t)?t:(t[wn]||(t[wn]=function(e){return t.handleEvent(e)}),t[wn])}function Tn(){Ke.call(this),this.v=new on(this),this.bc=this,this.hb=null}function En(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function _n(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Sn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&an(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function An(t,e,n){if(d(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Nn(t){var e=null;return new Ie((function(n,r){-1==(e=An((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function kn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Dn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Cn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Cn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function On(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Rn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Rn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Rn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(Tn,Ke),Tn.prototype[tn]=!0,Tn.prototype.addEventListener=function(t,e,n,r){hn(this,t,e,n,r)},Tn.prototype.removeEventListener=function(t,e,n,r){pn(this,t,e,n,r)},Tn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Je(t,n);else if(t instanceof Je)t.target=t.target||n;else{var i=t;gt(t=new Je(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Sn(a,r,!0,t)&&i}if(i=Sn(a=t.b=n,r,!0,t)&&i,i=Sn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Sn(a=t.b=e[o],r,!1,t)&&i;return i},Tn.prototype.Da=function(){if(Tn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)rn(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=Cn.prototype).X=function(){On(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return On(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Rn(this.b,t)?this.b[t]:e},t.set=function(t,e){Rn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var xn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Pn?(this.i=void 0!==e?e:t.i,Ln(this,t.c),this.l=t.l,this.a=t.a,Mn(this,t.g),this.f=t.f,Fn(this,nr(t.b)),this.h=t.h):t&&(n=String(t).match(xn))?(this.i=!!e,Ln(this,n[1]||"",!0),this.l=Bn(n[2]||""),this.a=Bn(n[3]||"",!0),Mn(this,n[4]),this.f=Bn(n[5]||"",!0),Fn(this,n[6]||"",!0),this.h=Bn(n[7]||"")):(this.i=!!e,this.b=new Yn(null,this.i))}function Ln(t,e,n){t.c=n?Bn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Mn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Fn(t,e,n){e instanceof Yn?(t.b=e,function(t,e){e&&!t.f&&(Jn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Zn(this,e),er(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Kn(e,Qn)),t.b=new Yn(e,t.i))}function Vn(t,e,n){t.b.set(e,n)}function Un(t,e){return t.b.get(e)}function jn(t){return t instanceof Pn?new Pn(t):new Pn(t,void 0)}function qn(t,e,n,r){var i=new Pn(null,void 0);return t&&Ln(i,t),e&&(i.a=e),n&&Mn(i,n),r&&(i.f=r),i}function Bn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Kn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Gn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Gn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Kn(e,Hn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Kn(e,Hn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Kn(n,"/"==n.charAt(0)?Wn:zn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Kn(n,Xn)),t.join("")},Pn.prototype.resolve=function(t){var e=new Pn(this),n=!!t.c;n?Ln(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Mn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ut(i,"./")||ut(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Fn(e,nr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Hn=/[#\/\?@]/g,zn=/[#\?:]/g,Wn=/[#\?]/g,Qn=/[#\?@]/g,Xn=/#/g;function Yn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Jn(t){t.a||(t.a=new Cn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function $n(t){var e=Dn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Yn(null,void 0);t=kn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?er(n,i,o):n.add(i,o)}return n}function Zn(t,e){Jn(t),e=rr(t,e),Rn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Rn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&On(t)))}function tr(t,e){return Jn(t),e=rr(t,e),Rn(t.a.b,e)}function er(t,e,n){Zn(t,e),0<n.length&&(t.c=null,t.a.set(rr(t,e),$(n)),t.b+=n.length)}function nr(t){var e=new Yn;return e.c=t.c,t.a&&(e.a=new Cn(t.a),e.b=t.b),e}function rr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function ir(t){var e=[];return ar(new or,t,e),e.join("")}function or(){}function ar(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ar(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),cr(r,n),n.push(":"),ar(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":cr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Yn.prototype).add=function(t,e){Jn(this),this.c=null,t=rr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Jn(this),this.a.forEach((function(n,r){G(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Jn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Jn(this);var e=[];if("string"==typeof t)tr(this,t)&&(e=J(e,this.a.get(rr(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},t.set=function(t,e){return Jn(this),this.c=null,tr(this,t=rr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var sr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ur=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function cr(t,e){e.push('"',t.replace(ur,(function(t){var e=sr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),sr[t]=e),e})),'"')}function hr(){var t=Cr();return Yt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function lr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function fr(t,e){e=e||s.window;var n="about:blank";t&&(n=xt(Ft(t)||jt)),e.location.href=n}function pr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<pr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function dr(t){return!!((t=(t||Cr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function vr(t){t=t||s.window;try{t.close()}catch(t){}}function mr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Cr().toLowerCase(),r&&(e.target=r,ut(n,"crios/")&&(e.target="_blank")),Nr(Cr())==Sr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Rt?n:Ft(void 0!==n.href?n.href:String(n))||jt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((pt("iPhone")&&!pt("iPod")&&!pt("iPad")||pt("iPad")||pt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(a=ve(document,"A"),"HTMLAnchorElement"),e=e instanceof Rt?e:Vt(e),a.href=xt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Kt("",r,n,a),t=xt(e),a&&($t&&ut(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ht(t)+'">',t=new qt(t=(r=St())?r.createHTML(t):t,null,Bt),r=a.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Kt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gr=/^[^@]+@[^@]+$/;function br(){var t=null;return new Ie((function(e){"complete"==s.document.readyState?e():(t=function(){e()},fn(window,"load",t))})).o((function(e){throw pn(window,"load",t),e}))}function wr(t){return t=t||Cr(),!("file:"!==Lr()&&"ionic:"!==Lr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ir(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Tr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function Er(){return lt.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":lt.INTERNAL.hasOwnProperty("node")?"Node":Tr()?"Worker":"Browser"}function _r(){var t=Er();return"ReactNative"===t||"Node"===t}var Sr="Firefox",Ar="Chrome";function Nr(t){var e=t.toLowerCase();return ut(e,"opera/")||ut(e,"opr/")||ut(e,"opios/")?"Opera":ut(e,"iemobile")?"IEMobile":ut(e,"msie")||ut(e,"trident/")?"IE":ut(e,"edge/")?"Edge":ut(e,"firefox/")?Sr:ut(e,"silk/")?"Silk":ut(e,"blackberry")?"Blackberry":ut(e,"webos")?"Webos":!ut(e,"safari/")||ut(e,"chrome/")||ut(e,"crios/")||ut(e,"android")?!ut(e,"chrome/")&&!ut(e,"crios/")||ut(e,"edge/")?ut(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Ar:"Safari"}var kr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Dr(t,e){e=e||[];var n,r=[],i={};for(n in kr)i[kr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Er())?r=Nr(i=Cr()):"Worker"===r&&(r=Nr(i=Cr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Cr(){return s.navigator&&s.navigator.userAgent||""}function Or(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Rr(){try{var t=s.localStorage,e=jr();if(t)return t.setItem(e,"1"),t.removeItem(e),!hr()||!!s.indexedDB}catch(t){return Tr()&&!!s.indexedDB}return!1}function xr(){return(Pr()||"chrome-extension:"===Lr()||wr())&&!_r()&&Rr()&&!Tr()}function Pr(){return"http:"===Lr()||"https:"===Lr()}function Lr(){return s.location&&s.location.protocol||null}function Mr(t){return!dr(t=t||Cr())&&Nr(t)!=Sr}function Fr(t){return void 0===t?null:ir(t)}function Vr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ur(t){if(null!==t)return JSON.parse(t)}function jr(t){return t||Math.floor(1e9*Math.random()).toString()}function qr(t){return"Safari"!=Nr(t=t||Cr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Br(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Kr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Cr(),e=Er(),this.b=dr(t)||"ReactNative"===e}function Gr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Hr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function zr(){return!(!Or("fireauth.oauthhelper",s)&&!Or("fireauth.iframe",s))}Kr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Pr()&&"chrome-extension:"!==Lr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Qr={};function Xr(t){Qr[t]||(Qr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Yr={};Object.defineProperty(Yr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Yr,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==Yr.abcd}catch(Qt){Wr=!1}function Jr(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function $r(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Jr(t,n,e[n])}function Zr(t){var e={};return $r(e,t),e}function ti(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Jr(e,n,ti(t[n]));return e}function ei(t){var e=t&&(t[ai]?"phone":null);if(!(e&&t&&t[oi]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");Jr(this,"uid",t[oi]),Jr(this,"displayName",t[ri]||null);var n=null;t[ii]&&(n=new Date(t[ii]).toUTCString()),Jr(this,"enrollmentTime",n),Jr(this,"factorId",e)}function ni(t){try{var e=new si(t)}catch(t){e=null}return e}ei.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ri="displayName",ii="enrolledAt",oi="mfaEnrollmentId",ai="phoneInfo";function si(t){ei.call(this,t),Jr(this,"phoneNumber",t[ai])}function ui(t){var e={},n=t[fi],r=t[di],i=t[vi];if(t=ni(t[pi]),!i||i!=hi&&i!=li&&!n||i==li&&!r||i==ci&&!t)throw Error("Invalid checkActionCode response!");i==li?(e[yi]=n||null,e[bi]=n||null,e[mi]=r):(e[yi]=r||null,e[bi]=r||null,e[mi]=n||null),e[gi]=t||null,Jr(this,Ii,i),Jr(this,wi,ti(e))}_(si,ei),si.prototype.w=function(){var t=si.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ci="REVERT_SECOND_FACTOR_ADDITION",hi="EMAIL_SIGNIN",li="VERIFY_AND_CHANGE_EMAIL",fi="email",pi="mfaInfo",di="newEmail",vi="requestType",mi="email",yi="fromEmail",gi="multiFactorInfo",bi="previousEmail",wi="data",Ii="operation";function Ti(t){var e=Un(t=jn(t),Ei)||null,n=Un(t,_i)||null,r=Un(t,Ni)||null;if(r=r&&Di[r]||null,!e||!n||!r)throw new A("argument-error",Ei+", "+_i+"and "+Ni+" are required in a valid action code URL.");$r(this,{apiKey:e,operation:r,code:n,continueUrl:Un(t,Si)||null,languageCode:Un(t,Ai)||null,tenantId:Un(t,ki)||null})}var Ei="apiKey",_i="oobCode",Si="continueUrl",Ai="languageCode",Ni="mode",ki="tenantId",Di={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ci,signIn:hi,verifyAndChangeEmail:li,verifyEmail:"VERIFY_EMAIL"};function Ci(t){try{return new Ti(t)}catch(t){return null}}function Oi(t){var e=t[Mi];if(void 0===e)throw new A("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new A("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ri];if(n&&"object"==typeof n){e=n[Ui];var r=n[Fi];if(n=n[Vi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new A("argument-error",Fi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new A("argument-error",Vi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new A("argument-error",Ui+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new A("missing-android-pkg-name")}}else if(void 0!==n)throw new A("argument-error",Ri+" property must be a non null object when specified.");if(this.f=null,(e=t[Li])&&"object"==typeof e){if("string"==typeof(e=e[ji])&&e.length)this.f=e;else if(void 0!==e)throw new A("argument-error",ji+" property must be a non empty string when specified.")}else if(void 0!==e)throw new A("argument-error",Li+" property must be a non null object when specified.");if(void 0!==(e=t[Pi])&&"boolean"!=typeof e)throw new A("argument-error",Pi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[xi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new A("argument-error",xi+" property must be a non empty string when specified.");this.i=t||null}var Ri="android",xi="dynamicLinkDomain",Pi="handleCodeInApp",Li="iOS",Mi="url",Fi="installApp",Vi="minimumVersion",Ui="packageName",ji="bundleId";function qi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Bi=null;function Ki(t){var e=Hi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Gi(t){try{return new Ki(t)}catch(t){return null}}function Hi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Bi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Bi){Bi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Bi[o]&&(Bi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(t){}return null}Ki.prototype.T=function(){return this.f},Ki.prototype.l=function(){return this.c},Ki.prototype.toString=function(){return this.h};var zi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Wi=["client_id","response_type","scope","redirect_uri","state"],Qi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Wi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Wi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Wi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:zi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Xi(t){for(var e in Qi)if(Qi[e].fa==t)return Qi[e];return null}function Yi(t){var e={};e["facebook.com"]=eo,e["google.com"]=ro,e["github.com"]=no,e["twitter.com"]=io;var n=t&&t[$i];try{if(n)return e[n]?new e[n](t):new to(t);if(void 0!==t[Ji])return new Zi(t)}catch(t){}return null}var Ji="idToken",$i="providerId";function Zi(t){var e=t[$i];if(!e&&t[Ji]){var n=Gi(t[Ji]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Jr(this,"providerId",e),Jr(this,"isNewUser",n)}function to(t){Zi.call(this,t),Jr(this,"profile",ti((t=Ur(t.rawUserInfo||"{}"))||{}))}function eo(t){if(to.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(t){if(to.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",this.profile&&this.profile.login||null)}function ro(t){if(to.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function io(t){if(to.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",t.screenName||null)}function oo(t){var e=jn(t),n=Un(e,"link"),r=Un(jn(n),"link");return e=Un(e,"deep_link_id"),Un(jn(e),"link")||e||r||n||t}function ao(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?so:uo}_(to,Zi),_(eo,to),_(no,to),_(ro,to),_(io,to);var so="enroll",uo="signin";function co(){}function ho(t,e){return t.then((function(t){if(t[$a]){var n=Gi(t[$a]);if(!n||e!=n.i)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==D+"user-not-found"?new A("user-mismatch"):t}))}function lo(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,Jr(this,"providerId",t),Jr(this,"signInMethod",t)}function fo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function po(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new lo(t.providerId,t.pendingToken)}catch(t){}return null}function vo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Jr(this,"idToken",e.idToken),e.accessToken&&Jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");Jr(this,"accessToken",e.oauthToken),Jr(this,"secret",e.oauthTokenSecret)}Jr(this,"providerId",t),Jr(this,"signInMethod",n)}function mo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:$n(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function yo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new vo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function go(t,e){this.Qc=e||[],$r(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Xi(t)||{}).Ja||null,this.pb=null}function bo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');go.call(this,t,[])}function wo(t){go.call(this,t,Wi),this.a=[]}function Io(){wo.call(this,"facebook.com")}function To(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Io).credential({accessToken:e})}function Eo(){wo.call(this,"github.com")}function _o(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function So(){wo.call(this,"google.com"),this.Ca("profile")}function Ao(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new So).credential({idToken:n,accessToken:e})}function No(){go.call(this,"twitter.com",zi)}function ko(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new vo("twitter.com",n,"twitter.com")}function Do(t,e,n){this.a=t,this.f=e,Jr(this,"providerId","password"),Jr(this,"signInMethod",n===Oo.EMAIL_LINK_SIGN_IN_METHOD?Oo.EMAIL_LINK_SIGN_IN_METHOD:Oo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Co(t){return t&&t.email&&t.password?new Do(t.email,t.password,t.signInMethod):null}function Oo(){$r(this,{providerId:"password",isOAuthProvider:!1})}function Ro(t,e){if(!(e=xo(e)))throw new A("argument-error","Invalid email link!");return new Do(t,e.code,Oo.EMAIL_LINK_SIGN_IN_METHOD)}function xo(t){return(t=Ci(t=oo(t)))&&t.operation===hi?t:null}function Po(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new A("internal-error");this.a=t,Jr(this,"providerId","phone"),this.fa="phone",Jr(this,"signInMethod","phone")}function Lo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return G(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Po(e)}return null}function Mo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Fo(t){try{this.a=t||lt.auth()}catch(t){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}$r(this,{providerId:"phone",isOAuthProvider:!1})}function Vo(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new Po({fb:t,eb:e})}function Uo(t){if(t.temporaryProof&&t.phoneNumber)return new Po({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Ao(o,n);case"facebook.com":return To(n);case"github.com":return _o(n);case"twitter.com":return ko(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new lo(e,a):new vo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new wo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function jo(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function qo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function Bo(t){return(t=t||{}).type?new qo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&N(t.error),t.postBody,t.tenantId):null}function Ko(){this.b=null,this.a=[]}ao.prototype.Ha=function(){return this.a?ke(this.a):ke(this.b)},ao.prototype.w=function(){return this.type==so?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},co.prototype.ka=function(){},co.prototype.b=function(){},co.prototype.c=function(){},co.prototype.w=function(){},lo.prototype.ka=function(t){return bs(t,fo(this))},lo.prototype.b=function(t,e){var n=fo(this);return n.idToken=e,ws(t,n)},lo.prototype.c=function(t,e){return ho(Is(t,fo(this)),e)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},vo.prototype.ka=function(t){return bs(t,mo(this))},vo.prototype.b=function(t,e){var n=mo(this);return n.idToken=e,ws(t,n)},vo.prototype.c=function(t,e){return ho(Is(t,mo(this)),e)},vo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},go.prototype.Ka=function(t){return this.Jb=mt(t),this},_(bo,go),_(wo,go),wo.prototype.Ca=function(t){return Q(this.a,t)||this.a.push(t),this},wo.prototype.Rb=function(){return $(this.a)},wo.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new vo(this.providerId,n,this.providerId)},_(Io,wo),Jr(Io,"PROVIDER_ID","facebook.com"),Jr(Io,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(Eo,wo),Jr(Eo,"PROVIDER_ID","github.com"),Jr(Eo,"GITHUB_SIGN_IN_METHOD","github.com"),_(So,wo),Jr(So,"PROVIDER_ID","google.com"),Jr(So,"GOOGLE_SIGN_IN_METHOD","google.com"),_(No,go),Jr(No,"PROVIDER_ID","twitter.com"),Jr(No,"TWITTER_SIGN_IN_METHOD","twitter.com"),Do.prototype.ka=function(t){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?nu(t,Ds,{email:this.a,oobCode:this.f}):nu(t,Js,{email:this.a,password:this.f})},Do.prototype.b=function(t,e){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?nu(t,Cs,{idToken:e,email:this.a,oobCode:this.f}):nu(t,Ks,{idToken:e,email:this.a,password:this.f})},Do.prototype.c=function(t,e){return ho(this.ka(t),e)},Do.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},$r(Oo,{PROVIDER_ID:"password"}),$r(Oo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),$r(Oo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Po.prototype.ka=function(t){return t.gb(Mo(this))},Po.prototype.b=function(t,e){var n=Mo(this);return n.idToken=e,nu(t,Zs,n)},Po.prototype.c=function(t,e){var n=Mo(this);return n.operation="REAUTH",ho(t=nu(t,tu,n),e)},Po.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Fo.prototype.gb=function(t,e){var n=this.a.a;return ke(e.verify()).then((function(r){if("string"!=typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===e.type){var i,o=v(t)?t.session:null,a=v(t)?t.phoneNumber:t;return i=o&&o.type==so?o.Ha().then((function(t){return function(t,e){return nu(t,Hs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==uo?o.Ha().then((function(e){return function(t,e){return nu(t,zs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return nu(t,qs,e)}(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}))}throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},$r(Fo,{PROVIDER_ID:"phone"}),$r(Fo,{PHONE_SIGN_IN_METHOD:"phone"}),qo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},qo.prototype.T=function(){return this.h},qo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Go,Ho=null;function zo(t){var e="unauthorized-domain",n=void 0,r=jn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Gt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Gt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function Wo(t,e,n){A.call(this,t,n),(t=e||{}).Kb&&Jr(this,"email",t.Kb),t.ea&&Jr(this,"phoneNumber",t.ea),t.credential&&Jr(this,"credential",t.credential),t.$b&&Jr(this,"tenantId",t.$b)}function Qo(t){if(t.code){var e=t.code||"";0==e.indexOf(D)&&(e=e.substring(D.length));var n={credential:Uo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new Wo(e,n,t.message)}return null}function Xo(){}function Yo(t){return t.c||(t.c=t.b())}function Jo(){}function $o(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Zo(){}function ta(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.qc,this),this.a.onerror=I(this.Tb,this),this.a.onprogress=I(this.rc,this),this.a.ontimeout=I(this.vc,this)}function ea(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function na(t,e,n){this.reset(t,e,n,void 0,void 0)}function ra(t){this.f=t,this.b=this.c=this.a=null}function ia(t,e){this.name=t,this.value=e}_(zo,A),_(Wo,A),Wo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&gt(t,e),t},Wo.prototype.toJSON=function(){return this.w()},Xo.prototype.c=null,_(Jo,Xo),Jo.prototype.a=function(){var t=$o(this);return t?new ActiveXObject(t):new XMLHttpRequest},Jo.prototype.b=function(){var t={};return $o(this)&&(t[0]=!0,t[1]=!0),t},Go=new Jo,_(Zo,Xo),Zo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ta;throw Error("Unsupported browser")},Zo.prototype.b=function(){return{}},(t=ta.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ea(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",ea(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,ea(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},na.prototype.a=null,na.prototype.reset=function(t,e,n,r,i){r||E(),delete this.a},ia.prototype.toString=function(){return this.name};var oa=new ia("SEVERE",1e3),aa=new ia("WARNING",900),sa=new ia("CONFIG",700),ua=new ia("FINE",500);function ca(t){return t.c?t.c:t.a?ca(t.a):(M("Root logger has no level set."),null)}ra.prototype.log=function(t,e,n){if(t.value>=ca(this).value)for(d(e)&&(e=e()),t=new na(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ha={},la=null;function fa(t){var e;if(la||(la=new ra(""),ha[""]=la,la.c=sa),!(e=ha[t])){e=new ra(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=fa(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ha[t]=e}return e}function pa(t,e){t&&t.log(ua,e,void 0)}function da(t){this.f=t}function va(t){Tn.call(this),this.u=t,this.h=void 0,this.readyState=ma,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=fa("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}_(da,Xo),da.prototype.a=function(){return new va(this.f)},da.prototype.b=function(t){return function(){return t}}({}),_(va,Tn);var ma=0;function ya(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function ga(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ba(t)}function ba(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function wa(t){Tn.call(this),this.headers=new Cn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Ia,this.u=this.S=!1}(t=va.prototype).open=function(t,e){if(this.readyState!=ma)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ba(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ga(this)),this.readyState=ma},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ba(this)),this.a&&(this.readyState=3,ba(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ya(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ga(this):ba(this),3==this.readyState&&ya(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ga(this))},t.sc=function(t){this.a&&(this.response=t,ga(this))},t.Va=function(t){var e=this.i;e&&e.log(aa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ga(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(aa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(aa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(va.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),_(wa,Tn);var Ia="";wa.prototype.b=fa("goog.net.XhrIo");var Ta=/^https?$/i,Ea=["POST","PUT"];function _a(t){return"content-type"==t.toLowerCase()}function Sa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Aa(t),ka(t)}function Aa(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Na(t){if(t.c&&void 0!==a)if(t.C[1]&&4==Ca(t)&&2==Oa(t))pa(t.b,Ra(t,"Local request error detected and ignored"));else if(t.i&&4==Ca(t))An(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ca(t)){pa(t.b,Ra(t,"Request complete")),t.c=!1;try{var e,n=Oa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(xn)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!Ta.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ca(t)?t.a.statusText:""}catch(e){pa(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Oa(t)+"]",Aa(t)}}finally{ka(t)}}}function ka(t,e){if(t.a){Da(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(oa,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Da(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Ca(t){return t.a?t.a.readyState:0}function Oa(t){try{return 2<Ca(t)?t.a.status:-1}catch(t){return-1}}function Ra(t,e){return e+" ["+t.P+" "+t.l+" "+Oa(t)+"]"}function xa(t){var e=Ga;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Pa(t,e,n){t.a=!0,t.c=n,t.f=!e,Va(t)}function La(t){if(t.a){if(!t.v)throw new Ua(t);t.v=!1}}function Ma(t,e,n,r){t.g.push([e,n,r]),t.a&&Va(t)}function Fa(t){return W(t.g,(function(t){return d(t[1])}))}function Va(t){if(t.h&&t.a&&Fa(t)){var e=t.h,n=Ba[e];n&&(s.clearTimeout(n.a),delete Ba[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(x(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Fa(t)||(n=!0)}}t.c=e,r&&(u=I(t.m,t,!0),r=I(t.m,t,!1),e instanceof xa?(Ma(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new qa(e),Ba[e.a]=e,t.h=e.a)}function Ua(){P.call(this)}function ja(){P.call(this)}function qa(t){this.a=s.setTimeout(I(this.c,this),0),this.b=t}(t=wa.prototype).Ma=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",pa(this.b,Ra(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(pa(this.b,Ra(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ka(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ka(this,!0)),wa.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?Na(this):this.Jc())},t.Jc=function(){Na(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ia:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(oa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return pa(this.b,"Can not get response: "+t.message),null}},xa.prototype.cancel=function(t){if(this.a)this.c instanceof xa&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new ja(this),La(this),Pa(this,!1,t))}},xa.prototype.m=function(t,e){this.i=!1,Pa(this,t,e)},xa.prototype.then=function(t,e,n){var r,i,o=new Ie((function(t,e){r=t,i=e}));return Ma(this,r,(function(t){t instanceof ja?o.cancel():i(t)})),o.then(t,e,n)},xa.prototype.$goog_Thenable=!0,_(Ua,P),Ua.prototype.message="Deferred has already fired",Ua.prototype.name="AlreadyCalledError",_(ja,P),ja.prototype.message="Deferred was canceled",ja.prototype.name="CanceledError",qa.prototype.c=function(){throw delete Ba[this.a],this.b};var Ba={};function Ka(t){var e={},n=e.document||document,r=Nt(t).toString(),i=ve(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new xa(o),u=null,l=null!=e.timeout?e.timeout:5e3;return 0<l&&(u=window.setTimeout((function(){Ha(i,!0);var t=new Qa(Wa,"Timeout reached for loading script "+r);La(a),Pa(a,!1,t)}),l),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ha(i,e.xd||!1,u),La(a),Pa(a,!0,null))},i.onerror=function(){Ha(i,!0,u);var t=new Qa(za,"Error while loading script "+r);La(a),Pa(a,!1,t)},gt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),le(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=Nt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=h(e.document):(null===c&&(c=h(s.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ga(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Ha(t,!0,this.Ma)}}function Ha(t,e,n){null!=n&&s.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var za=0,Wa=1;function Qa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function Xa(t){this.f=t}function Ya(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Za,this.g=mt(t.secureTokenHeaders||ts),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||es,this.a=mt(t.firebaseHeaders||ns),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Er(),!(n=s.XMLHttpRequest||n&&lt.INTERNAL.node&&lt.INTERNAL.node.XMLHttpRequest)&&!Tr())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Tr()?this.f=new da(self):_r()?this.f=new Xa(n):this.f=new Zo,this.b=null}_(Qa,P),_(Xa,Xo),Xa.prototype.a=function(){return new this.f},Xa.prototype.b=function(){return{}};var Ja,$a="idToken",Za=new Kr(3e4,6e4),ts={"Content-Type":"application/x-www-form-urlencoded"},es=new Kr(3e4,6e4),ns={"Content-Type":"application/json"};function rs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function is(t,e){e&&(t.l=os("https://securetoken.googleapis.com/v1/token",e),t.h=os("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=os("https://identitytoolkit.googleapis.com/v2/",e))}function os(t,e){return t=jn(t),e=jn(e.url),t.f=t.a+t.f,Ln(t,e.c),t.a=e.a,Mn(t,e.g),t.toString()}function as(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ss(t,e,n,r,i,o,a){(function(){var t=Cr();return!((t=Nr(t)!=Ar?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Yt&&ue&&!(9<ue))})()||Tr()?t=I(t.u,t):(Ja||(Ja=new Ie((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(s[cs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ma(t,null,e,void 0)}(Ka(kt(us,{onload:cs})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=I(t.s,t)),t(e,n,r,i,o,a)}Ya.prototype.T=function(){return this.b},Ya.prototype.u=function(t,e,n,r,i,o){if(Tr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new wa(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}En(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return pa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),_n(a,"ready",(function(){u&&clearTimeout(u),ze(this)})),_n(a,"timeout",(function(){u&&clearTimeout(u),ze(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Go.a(),t.C=t.D?Yo(t.D):Yo(Go),t.a.onreadystatechange=I(t.Wb,t);try{pa(t.b,Ra(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return pa(t.b,Ra(t,"Error opening Xhr: "+e.message)),void Sa(t,e)}e=r||"";var o=new Cn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)G(t,e,void 0);else for(var n=Dn(t),r=kn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=_a,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!Q(Ea,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Da(t),0<t.g&&(t.u=function(t){return Yt&&se(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),pa(t.b,Ra(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ma,t)):t.s=An(t.Ma,t.g,t)),pa(t.b,Ra(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){pa(t.b,Ra(t,"Send error: "+e.message)),Sa(t,e)}}(a,t,n,r,i)};var us=new wt(_t,"https://apis.google.com/js/client.js?onload=%{onload}"),cs="__fcb"+Math.floor(1e6*Math.random()).toString();function hs(t){if("string"!=typeof(t=t.email)||!gr.test(t))throw new A("invalid-email")}function ls(t){"email"in t&&hs(t)}function fs(t){if(!t[$a]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,mt(t));throw new A("internal-error")}}function ps(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}Ya.prototype.s=function(t,e,n,r,i){var o=this;Ja.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ya.prototype.Ab=function(){return nu(this,Gs,{})},Ya.prototype.Cb=function(t,e){return nu(this,Bs,{idToken:t,email:e})},Ya.prototype.Db=function(t,e){return nu(this,Ks,{idToken:t,password:e})};var ds={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function vs(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function ms(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function ys(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&tr(t=new Yn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function gs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Qo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Qo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Qo(t)):t.errorMessage&&(e=ru(t.errorMessage)),e)throw e;fs(t)}function bs(t,e){return e.returnIdpCredential=!0,nu(t,Ws,e)}function ws(t,e){return e.returnIdpCredential=!0,nu(t,Xs,e)}function Is(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,nu(t,Qs,e)}function Ts(t){if(!t.oobCode)throw new A("invalid-action-code")}(t=Ya.prototype).Eb=function(t,e){var n={idToken:t},r=[];return dt(ds,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),nu(this,Bs,n)},t.wb=function(t,e){return gt(t={requestType:"PASSWORD_RESET",email:t},e),nu(this,Fs,t)},t.xb=function(t,e){return gt(t={requestType:"EMAIL_SIGNIN",email:t},e),nu(this,Ps,t)},t.vb=function(t,e){return gt(t={requestType:"VERIFY_EMAIL",idToken:t},e),nu(this,Ls,t)},t.Fb=function(t,e,n){return gt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),nu(this,Ms,t)},t.gb=function(t){return nu(this,$s,t)},t.ob=function(t,e){return nu(this,js,{oobCode:t,newPassword:e})},t.Sa=function(t){return nu(this,_s,{oobCode:t})},t.kb=function(t){return nu(this,Es,{oobCode:t})};var Es={endpoint:"setAccountInfo",A:Ts,Z:"email",B:!0},_s={endpoint:"resetPassword",A:Ts,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},B:!0},Ss={endpoint:"signupNewUser",A:function(t){if(hs(t),!t.password)throw new A("weak-password")},G:fs,V:!0,B:!0},As={endpoint:"createAuthUri",B:!0},Ns={endpoint:"deleteAccount",O:["idToken"]},ks={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new A("internal-error")}},Ds={endpoint:"emailLinkSignin",O:["email","oobCode"],A:hs,G:fs,V:!0,B:!0},Cs={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:hs,G:fs,V:!0},Os={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:vs,G:fs,B:!0,Na:!0},Rs={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:vs,G:fs,B:!0,Na:!0},xs={endpoint:"getAccountInfo"},Ps={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");hs(t)},Z:"email",B:!0},Ls={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Ms={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Fs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");hs(t)},Z:"email",B:!0},Vs={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Us={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},js={endpoint:"resetPassword",A:Ts,Z:"email",B:!0},qs={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Bs={endpoint:"setAccountInfo",O:["idToken"],A:ls,V:!0},Ks={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(ls(t),!t.password)throw new A("weak-password")},G:fs,V:!0},Gs={endpoint:"signupNewUser",G:fs,V:!0,B:!0},Hs={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},zs={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Ws={endpoint:"verifyAssertion",A:ms,Za:ys,G:gs,V:!0,B:!0},Qs={endpoint:"verifyAssertion",A:ms,Za:ys,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw ru(t.errorMessage);fs(t)},V:!0,B:!0},Xs={endpoint:"verifyAssertion",A:function(t){if(ms(t),!t.idToken)throw new A("internal-error")},Za:ys,G:gs,V:!0},Ys={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new A("invalid-custom-token")},G:fs,V:!0,B:!0},Js={endpoint:"verifyPassword",A:function(t){if(hs(t),!t.password)throw new A("wrong-password")},G:fs,V:!0,B:!0},$s={endpoint:"verifyPhoneNumber",A:ps,G:fs,B:!0},Zs={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new A("internal-error");ps(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Qo(t);fs(t)}},tu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ps,G:fs,B:!0},eu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[$a]^!!t.refreshToken)throw new A("internal-error")},B:!0,Na:!0};function nu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return De(new A("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return ke(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=jn(e+n);Vn(s,"key",t.c),a&&Vn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Vn(s,c,i[c]);return new Ie((function(e,n){ss(t,s.toString(),(function(t){t?t.error?n(iu(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:ir(Vr(i)),t.a,t.v.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new A("internal-error");return r[e.Z]}))}function ru(t){return iu({error:{errors:[{message:t}],code:400,message:t}})}function iu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",gt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=Fr(t)),new A("internal-error",e)}function ou(t){this.b=t,this.a=null,this.sb=function(t){return(cu||(cu=new Ie((function(t,e){function n(){Br(),Or("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Br(),e(Error("Network Error"))},timeout:su.get()})}if(Or("gapi.iframes.Iframe"))t();else if(Or("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Or("gapi.load")?n():e(Error("Network Error"))},ke(Ka(r=kt(au,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw cu=null,t})))).then((function(){return new Ie((function(e,n){Or("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),uu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new wt(_t,"https://apis.google.com/js/api.js?onload=%{onload}"),su=new Kr(3e4,6e4),uu=new Kr(5e3,15e3),cu=null;function hu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?qn((t=jn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):qn("https",this.l,null,"/__/auth/iframe"),this.a=t,Vn(this.a,"apiKey",this.h),Vn(this.a,"appName",this.i),this.b=null,this.c=[]}function lu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function fu(t){try{return lt.app(t).auth().Ga()}catch(t){return[]}}function pu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function du(t){var e=lr();return function(t){return nu(t,Vs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=jn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=jn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:yr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new zo(lr())}))}function vu(t){return t.m||(t.m=br().then((function(){if(!t.u){var e=t.c,n=t.i,r=fu(t.b),i=new hu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=$(r||[]),t.u=i.toString()}t.v=new ou(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Bo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",ke(n)}return n.status="ERROR",ke(n)}))}(t)}))),t.m}function mu(t){return t.l||(t.C=t.c?Dr(t.c,fu(t.b)):null,t.l=new Ya(t.g,R(t.i),t.C),t.f&&is(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new lu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=mt(u||null),t.f=c,t.zb(h).toString()}function gu(t){if(this.a=t||lt.INTERNAL.reactNative&&lt.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bu(t){this.b=t,this.a={},this.f=I(this.c,this)}hu.prototype.toString=function(){return this.f?Vn(this.a,"v",this.f):Zn(this.a.b,"v"),this.b?Vn(this.a,"eid",this.b):Zn(this.a.b,"eid"),this.c.length?Vn(this.a,"fw",this.c.join(",")):Zn(this.a.b,"fw"),this.a.toString()},lu.prototype.zb=function(t){return this.h=t,this},lu.prototype.toString=function(){if(this.v){var t=jn(this.v.url);t=qn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=qn("https",this.u,null,"/__/auth/handler");if(Vn(t,"apiKey",this.s),Vn(t,"appName",this.c),Vn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=lt.app(this.c).auth().la()}catch(t){n=null}for(var r in e.pb=n,Vn(t,"providerId",this.a.providerId),e=Vr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=mt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),vt(e)||Vn(t,"customParameters",Fr(e))}if("function"==typeof this.a.Rb&&(n=this.a.Rb()).length&&Vn(t,"scopes",n.join(",")),this.l?Vn(t,"redirectUrl",this.l):Zn(t.b,"redirectUrl"),this.g?Vn(t,"eventId",this.g):Zn(t.b,"eventId"),this.i?Vn(t,"v",this.i):Zn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Un(t,a)&&Vn(t,a,this.b[a]);return this.h?Vn(t,"tid",this.h):Zn(t.b,"tid"),this.f?Vn(t,"eid",this.f):Zn(t.b,"eid"),(a=fu(this.c)).length&&Vn(t,"fw",a.join(",")),t.toString()},(t=pu.prototype).Pb=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return vu(t).then((function(){return function(t,e){return t.sb.then((function(){return new Ie((function(n){t.a.send(e.type,e,n,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&vr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Ie((function(e){return function n(){Nn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Nn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=Cr();return!Mr(t)&&!qr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,a,s){if(!t)return De(new A("popup-blocked"));if(a&&!Mr())return this.ma().o((function(e){vr(t),i(e)})),r(),ke();this.a||(this.a=du(mu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw vr(t),i(e),e}));return r(),e})).then((function(){jo(n),a||fr(yu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=du(mu(this)));var i=this;return this.a.then((function(){jo(e),fr(yu(i.s,i.g,i.b,t,e,lr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return vu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new A("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){Y(this.h,(function(e){return e==t}))},(t=gu.prototype).get=function(t){return ke(this.a.getItem(t)).then((function(t){return t&&Ur(t)}))},t.set=function(t,e){return ke(this.a.setItem(t,Fr(e)))},t.U=function(t){return ke(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wu,Iu=[];function Tu(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Eu(t){this.a=t}function _u(t){this.c=t,this.b=!1,this.a=[]}function Su(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return De(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ie((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:l,onMessage:o},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Au(t,c),e})).o((function(e){throw Au(t,c),e}))}function Au(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function Nu(){if(!Ou())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Tr()&&self?(this.v=function(){var t=Tr()?self:null;if(G(Iu,(function(n){n.b==t&&(e=n)})),!e){var e=new bu(t);Iu.push(e)}return e}(),Tu(this.v,"keyChanged",(function(e,n){return Mu(t).then((function(e){return 0<e.length&&G(t.a,(function(t){t(e)})),{keyProcessed:Q(e,n.key)}}))})),Tu(this.v,"ping",(function(){return ke(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?ke().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):ke(null)}().then((function(e){(t.h=e)&&(t.g=new _u(new Eu(e)),Su(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function ku(t){return new Ie((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Ie((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return ku(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Du(t){return t.i||(t.i=ku(t)),t.i}function Cu(t,e){var n=0;return new Ie((function r(i,o){Du(t).then(e).then(i).o((function(e){if(!(3<++n))return Du(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ou(){try{return!!s.indexedDB}catch(t){return!1}}function Ru(t){return t.objectStore("firebaseLocalStorage")}function xu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Pu(t){return new Ie((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Lu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Su(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):ke()}function Mu(t){return Du(t).then((function(t){var e=Ru(xu(t,!1));return e.getAll?Pu(e.getAll()):new Ie((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=pr(t.c,n),t.c=n}return r}))}function Fu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Vu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=ke().then((function(){if(Ou()){var t=jr(),r="__sak"+t;return wu||(wu=new Nu),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){G(e.a,(function(e){e(t)}))})),t}))}function Uu(){this.a={},this.type="inMemory"}function ju(){if(!function(){var t="Node"==Er();if(!(t=qu()||t&&lt.INTERNAL.node&&lt.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Er())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=qu()||lt.INTERNAL.node.localStorage,this.type="localStorage"}function qu(){try{var t=s.localStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Bu(){this.type="nullStorage"}function Ku(){if(!function(){var t="Node"==Er();if(!(t=Gu()||t&&lt.INTERNAL.node&&lt.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Er())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Gu()||lt.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Gu(){try{var t=s.sessionStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Hu(){var t={};t.Browser=Qu,t.Node=Xu,t.ReactNative=Yu,t.Worker=Ju,this.a=t[Er()]}bu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];G(r,(function(e){i.push(ke().then((function(){return e(t.origin,t.data.data)})))})),Oe(i).then((function(r){var i=[];G(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),G(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Eu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},_u.prototype.close=function(){for(;0<this.a.length;)Au(this,this.a[0]);this.b=!0},(t=Nu.prototype).set=function(t,e){var n=this,r=!1;return Cu(this,(function(e){return Pu((e=Ru(xu(e,!0))).get(t))})).then((function(i){return Cu(n,(function(o){if(o=Ru(xu(o,!0)),i)return i.value=e,Pu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Pu(o.add(a))}))})).then((function(){return n.c[t]=e,Lu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Cu(this,(function(e){return Pu(Ru(xu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Cu(this,(function(r){return n=!0,e.b++,Pu(Ru(xu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Lu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){Fu(t),function e(){t.f=setTimeout((function(){t.l=Mu(t).then((function(e){0<e.length&&G(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&Fu(this)},(t=Vu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t}))},(t=Uu.prototype).get=function(t){return ke(this.a[t])},t.set=function(t,e){return this.a[t]=e,ke()},t.U=function(t){return delete this.a[t],ke()},t.ca=function(){},t.ia=function(){},(t=ju.prototype).get=function(t){var e=this;return ke().then((function(){return Ur(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return ke().then((function(){var r=Fr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&hn(s.window,"storage",t)},t.ia=function(t){s.window&&pn(s.window,"storage",t)},(t=Bu.prototype).get=function(){return ke(null)},t.set=function(){return ke()},t.U=function(){return ke()},t.ca=function(){},t.ia=function(){},(t=Ku.prototype).get=function(t){var e=this;return ke().then((function(){return Ur(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return ke().then((function(){var r=Fr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var zu,Wu,Qu={F:ju,cb:Ku},Xu={F:ju,cb:Ku},Yu={F:gu,cb:Bu},Ju={F:ju,cb:Bu},$u={rd:"local",NONE:"none",td:"session"};function Zu(){var t=!(qr(Cr())||!Ir()),e=Mr(),n=Rr();this.m=t,this.h=e,this.l=n,this.a={},zu||(zu=new Hu),t=zu;try{this.g=!hr()&&zr()||!s.indexedDB?new t.a.F:new Vu(Tr()?new Uu:new t.a.F)}catch(t){this.g=new Uu,this.h=!0}try{this.i=new t.a.cb}catch(t){this.i=new Uu}this.v=new Uu,this.f=I(this.Zb,this),this.b={}}function tc(){return Wu||(Wu=new Zu),Wu}function ec(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function nc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function rc(t,e,n){return n=nc(e,n),"local"==e.F&&(t.b[n]=null),ec(t,e.F).U(n)}function ic(t){t.c&&(clearInterval(t.c),t.c=null)}function oc(t){this.a=t,this.b=tc()}(t=Zu.prototype).get=function(t,e){return ec(this,t.F).get(nc(t,e))},t.set=function(t,e,n){var r=nc(t,n),i=this,o=ec(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=nc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),vt(this.a)&&(ec(this,"local").ca(this.f),this.h||(hr()||!zr())&&s.indexedDB||!this.l||function(t){ic(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new $e({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=nc(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(ec(this,"local").ia(this.f),ic(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?ec(this,"local").ia(this.f):ic(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.nb(e))},Yt&&ue&&10==ue&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else G(t,I(this.nb,this))},t.nb=function(t){this.a[t]&&G(this.a[t],(function(t){t()}))};var ac,sc={name:"authEvent",F:"local"};function uc(){this.a=tc()}function cc(t,e){this.b=hc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===ac&&(ac=s.Int32Array?new Int32Array(yc):yc),this.reset()}_(cc,(function(){this.b=-1}));for(var hc=64,lc=hc-1,fc=[],pc=0;pc<lc;pc++)fc[pc]=0;var dc=J(128,fc);function vc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|ac[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(vc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(vc(t),i=0)}}t.c=i,t.g+=n}cc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):$(this.h)};var yc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function gc(){cc.call(this,8,bc)}_(gc,cc);var bc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new uc,this.g=new oc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ic(t){return new A("invalid-cordova-configuration",t)}function Tc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Ec(t){return t.f||(t.f=t.ma().then((function(){return new Ie((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),_c(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=oo(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ur(Un(o=jn(i),"firebaseError")||null))?N(o):null)?new qo(r.c,r.b,null,null,o,null,r.T()):new qo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Tc(t,i)}))}var n=new qo("unknown",null,null,null,new A("no-auth-event")),r=!1,i=Nn(500).then((function(){return _c(t).then((function(){r||Tc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Or("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Ho||(Ho=new Ko),function(t){var e=Ho;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Or("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function _c(t){var e=null;return function(t){return t.b.get(sc,t.a).then((function(t){return Bo(t)}))}(t.g).then((function(n){return e=n,rc((n=t.g).b,sc,n.a)})).then((function(){return e}))}function Sc(t){this.a=t,this.b=tc()}(t=wc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(wr(void 0)?br().then((function(){return new Ie((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):De(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Or("universalLinks.subscribe",s))throw Ic("cordova-universal-links-plugin-fix is not installed");if(void 0===Or("BuildInfo.packageName",s))throw Ic("cordova-plugin-buildinfo is not installed");if("function"!=typeof Or("cordova.plugins.browsertab.openUrl",s))throw Ic("cordova-plugin-browsertab is not installed");if("function"!=typeof Or("cordova.InAppBrowser.open",s))throw Ic("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},t.Pb=function(t,e){return e(new A("operation-not-supported-in-this-environment")),ke()},t.Nb=function(){return De(new A("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return De(new A("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=ke().then((function(){return jo(e),Ec(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new qo(e,r,null,o,new A("no-auth-event"),null,i),u=Or("BuildInfo.packageName",s);if("string"!=typeof u)throw new A("invalid-cordova-configuration");var c=Or("BuildInfo.displayName",s),h={};if(Cr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Cr().toLowerCase().match(/android/))return De(new A("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=function(t){var e=new gc;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,dc,56-e.c):mc(e,dc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(vc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return z(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),h.sessionId=o;var l=yu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(sc,a.w(),e)})).then((function(){var e=Or("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Or("cordova.plugins.browsertab.openUrl",s)))throw new A("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Or("cordova.InAppBrowser.open",s)))throw new A("invalid-cordova-configuration");e=Cr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Ie((function(t,e){u=function(){var e=Or("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=Nn(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},h=function(){Gr()&&c()},o.addEventListener("resume",c,!1),Cr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return _c(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Ec(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new qo("unknown",null,null,null,new A("no-auth-event")),t(e))}))},t.Ta=function(t){Y(this.b,(function(e){return e==t}))};var Ac={name:"pendingRedirect",F:"session"};function Nc(t){return rc(t.b,Ac,t.a)}function kc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new Kc,this.C=new Qc,this.g=new Sc(qc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Dc(this.D,this.v,this.m,k,this.J)}function Dc(t,e,n,r,i){var o=lt.SDK_VERSION||null;return wr()?new wc(t,e,n,o,r,i):new pu(t,e,n,o,r,i)}function Cc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Oc(t){t.a.Yb()&&Cc(t).o((function(e){var n=new qo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Fc(e)&&t.s(n)})),t.a.Ub()||Gc(t.b)}function Rc(t,e){Q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Ac,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Nc(t.g).then((function(){Cc(t).o((function(e){var n=new qo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Fc(e)&&t.s(n)}))})):Oc(t)})).o((function(){Oc(t)}))}function xc(t,e){Y(t.h,(function(t){return t==e}))}kc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Dc(this.D,this.v,this.m,null,this.J),this.i={}},kc.prototype.s=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Gc(this.b),e};var Pc=new Kr(2e3,1e4),Lc=new Kr(3e4,6e4);function Mc(t,e,n,r,i,o,a){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Fc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Vc(t,e,n,r,i){var o;return function(t){return t.b.set(Ac,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Fc(e))throw new A("operation-not-supported-in-this-environment");return o=e,Nc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new Ie((function(){})):Nc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Uc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Pc.get())}kc.prototype.ra=function(){return this.b.ra()};var jc={};function qc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Bc(t,e,n,r){var i=qc(e,n,r);return jc[i]||(jc[i]=new kc(t,e,n,r)),jc[i]}function Kc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Gc(t){t.g||(t.g=!0,Wc(t,!1,null,null))}function Hc(t){t.g&&!t.i&&Wc(t,!1,null,null)}function zc(t,e){if(t.b=function(){return ke(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Wc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return De(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):zc(t,n):zc(t,{user:null}),t.f=[],t.c=[]}function Qc(){}function Xc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Yc(t,e){this.a=e,Jr(this,"verificationId",t)}function Jc(t,e,n,r){return new Fo(t).gb(e,n).then((function(t){return new Yc(t,r)}))}function $c(t){var e=Hi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");$r(this,{token:t,expirationTime:Hr(1e3*e.exp),authTime:Hr(1e3*e.auth_time),issuedAtTime:Hr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Zc(t,e,n){var r=e&&e[eh];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=mt(e),this.g=n,this.c=new ao(null,r),this.b=[];var i=this;G(e[th]||[],(function(t){(t=ni(t))&&i.b.push(t)})),Jr(this,"auth",this.a),Jr(this,"session",this.c),Jr(this,"hints",this.b)}Kc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Kc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Wc(this,!0,null,t.a),ke()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Wc(t,s,e,null)})).o((function(e){Wc(t,s,null,e)}))}(this,t,e):De(new A("invalid-auth-event")):(Wc(this,!1,null,null),ke())}else De(new A("invalid-auth-event"))},Kc.prototype.ra=function(){var t=this;return new Ie((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=Nn(Lc.get()).then((function(){t.b||(t.g=!0,Wc(t,!0,null,e))}))}(t))}))},Qc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),ke()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):De(new A("invalid-auth-event"))}else De(new A("invalid-auth-event"))},Yc.prototype.confirm=function(t){return t=Vo(this.verificationId,t),this.a(t)};var th="mfaInfo",eh="mfaPendingCredential";function nh(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new Zc(t,e,n),Jr(this,"resolver",this.b)}function rh(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new nh(e,t.serverResponse,n,t.message)}catch(t){}return null}function ih(){}function oh(t){Jr(this,"factorId",t.fa),this.a=t}function ah(t){if(oh.call(this,t),this.a.fa!=Fo.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function sh(t,e){for(var n in Je.call(this,t),e)this[n]=e[n]}function uh(t,e){this.a=t,this.b=[],this.c=I(this.yc,this),hn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&G(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[oi]=t.uid),t.displayName&&(r[ri]=t.displayName),t.enrollmentTime&&(r[ii]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ai]=t.phoneNumber);try{e=new si(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),ch(this,n)}function ch(t,e){t.b=e,Jr(t,"enrolledFactors",e)}function hh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function lh(t,e){t.stop(),t.b=Nn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return Gr()||!t?ke():new Ie((function(n){e=function(){Gr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){lh(t,!0)})).o((function(e){t.i(e)&&lh(t,!1)}))}function fh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function ph(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function dh(t,e){t.b=Gi(e[$a]||""),t.a=e.refreshToken,ph(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function vh(t,e){this.a=t||null,this.b=e||null,$r(this,{lastSignInTime:Hr(e||null),creationTime:Hr(t||null)})}function mh(t,e,n,r,i,o){$r(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function yh(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=lt.SDK_VERSION?Dr(lt.SDK_VERSION):null;this.a=new Ya(this.l,R(k),r),(this.u=t.emulatorConfig||null)&&is(this.a,this.u),this.h=new fh(this.a),Ah(this,e[$a]),dh(this.h,e),Jr(this,"refreshToken",this.h.a),Dh(this,n||{}),Tn.call(this),this.P=!1,this.s&&xr()&&(this.b=Bc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new hh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=I(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){gh(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Ih(i,t.f)},this.ja=null,this.S=new uh(this,n),Jr(this,"multiFactor",this.S)}function gh(t,e){t.u=e,is(t.a,e),t.b&&(e=t.b,t.b=Bc(t.s,t.l,t.m,t.u),t.P&&(xc(e,t),Rc(t.b,t)))}function bh(t,e){t.qa&&pn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&hn(e,"languageCodeChanged",t.Pa)}function wh(t,e){t.$&&pn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&hn(e,"emulatorConfigChanged",t.Ba)}function Ih(t,e){t.aa=e,as(t.a,lt.SDK_VERSION?Dr(lt.SDK_VERSION,t.aa):null)}function Th(t,e){t.ja&&pn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&hn(e,"frameworkChanged",t.Oa)}function Eh(t){try{return lt.app(t.m).auth()}catch(e){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function _h(t){t.J||t.D.b||(t.D.start(),pn(t,"tokenChanged",t.ba),hn(t,"tokenChanged",t.ba))}function Sh(t){pn(t,"tokenChanged",t.ba),t.D.stop()}function Ah(t,e){t.Aa=e,Jr(t,"_lat",e)}function Nh(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Oe(e).then((function(){return t}))}function kh(t){t.b&&!t.P&&(t.P=!0,Rc(t.b,t))}function Dh(t,e){$r(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new vh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Ch(){}function Oh(t){return ke().then((function(){if(t.J)throw new A("app-deleted")}))}function Rh(t){return z(t.providerData,(function(t){return t.providerId}))}function xh(t,e){e&&(Ph(t,e.providerId),t.providerData.push(e))}function Ph(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function Lh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Jr(t,e,n)}function Mh(t,e){t!=e&&($r(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Jr(t,"metadata",function(t){return new vh(t.a,t.b)}(e.metadata)):Jr(t,"metadata",new vh),G(e.providerData,(function(e){xh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Jr(t,"refreshToken",t.h.a),ch(t.S,e.S.b))}function Fh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return nu(t.a,xs,{idToken:e}).then(I(t.Kc,t))}(t,e).then((function(){return n||Lh(t,"isAnonymous",!1),e}))}))}function Vh(t,e){e[$a]&&t.Aa!=e[$a]&&(dh(t.h,e),t.dispatchEvent(new sh("tokenChanged")),Ah(t,e[$a]),Lh(t,"refreshToken",t.h.a))}function Uh(t,e){return Fh(t).then((function(){if(Q(Rh(t),e))return Nh(t).then((function(){throw new A("provider-already-linked")}))}))}function jh(t,e,n){return Zr({user:t,credential:Uo(e),additionalUserInfo:e=Yi(e),operationType:n})}function qh(t,e){return Vh(t,e),t.reload().then((function(){return t}))}function Bh(t,e,n,r,i){if(!xr())return De(new A("operation-not-supported-in-this-environment"));if(t.i&&!i)return De(t.i);var o=Xi(n.providerId),a=jr(t.uid+":::"),s=null;(!Mr()||Ir())&&t.s&&n.isOAuthProvider&&(s=yu(t.s,t.l,t.m,e,n,null,a,lt.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=mr(s,o&&o.va,o&&o.ua);return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return Mc(t.b,u,e,n,a,!!s,t.tenantId)})).then((function(){return new Ie((function(n,r){t.na(e,null,new A("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Uc(t.b,t,e,u,a)}))})).then((function(t){return u&&vr(u),t?Zr(t):null})).o((function(t){throw u&&vr(u),t})),Hh(t,r,i)}function Kh(t,e,n,r,i){if(!xr())return De(new A("operation-not-supported-in-this-environment"));if(t.i&&!i)return De(t.i);var o=null,a=jr(t.uid+":::");return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Nh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Qh,t.w(),e.a)),e})).then((function(){return Vc(t.b,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Xh(t.ha);throw o})).then((function(){if(o)throw o})),Hh(t,r,i)}function Gh(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new A("internal-error");throw new A("auth-domain-config-required")}}function Hh(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),De(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new sh("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){X(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=rh(e.w(),Eh(t),I(t.jc,t))),n||e}))}function zh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[$a]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new yh(e,n,t);return t.providerData&&G(t.providerData,(function(t){t&&xh(i,Zr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Wh(t){this.a=t,this.b=tc()}Zc.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=mt(e.f);return delete n[th],delete n[eh],gt(n,t),e.g(n)}))},_(nh,A),ih.prototype.tb=function(t,e,n){return e.type==so?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),gt(n,{phoneVerificationInfo:Mo(t.a)}),nu(e,Os,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return gt(n={mfaPendingCredential:n},{phoneVerificationInfo:Mo(t.a)}),nu(e,Rs,n)}))}(this,t,e)},_(oh,ih),_(ah,oh),_(sh,Je),(t=uh.prototype).yc=function(t){ch(this,function(t){var e=[];return G(t.mfaInfo||[],(function(t){(t=ni(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new ao(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Vh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return nu(r,eu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=H(e.b,(function(t){return t.uid!=n}));return ch(e,r),Vh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:z(this.b,(function(t){return t.w()}))}}},hh.prototype.start=function(){this.a=this.c,lh(this,!0)},hh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},fh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},fh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?De(new A("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Ie((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ss(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(iu(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",$n(e).toString(),t.g,t.m.get()):r(new A("internal-error"))}))}(t.f,e).then((function(e){return t.b=Gi(e.access_token),t.a=e.refresh_token,ph(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):ke(null):ke({accessToken:this.b.toString(),refreshToken:this.a})},vh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(yh,Tn),yh.prototype.xa=function(t){this.za=t,rs(this.a,t)},yh.prototype.la=function(){return this.za},yh.prototype.Ga=function(){return $(this.aa)},yh.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Jr(yh.prototype,"providerId","firebase"),(t=yh.prototype).reload=function(){var t=this;return Hh(this,Oh(this).then((function(){return Fh(t).then((function(){return Nh(t)})).then(Ch)})))},t.oc=function(t){return this.I(t).then((function(t){return new $c(t)}))},t.I=function(t){var e=this;return Hh(this,Oh(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.Aa&&(Ah(e,t.accessToken),e.dispatchEvent(new sh("tokenChanged"))),Lh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new A("internal-error");Dh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,(function(t){return new mh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)xh(this,e[n]);Lh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new sh("userReloaded",{hd:t}))},t.Lc=function(t){return Xr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Hh(this,t.c(this.a,this.uid).then((function(t){return Vh(e,t),n=jh(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Xr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return Hh(this,Uh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=jh(e,t,"link"),qh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Hh(this,Uh(this,"phone").then((function(){return Jc(Eh(n),t,e,I(n.rb,n))})))},t.Mc=function(t,e){var n=this;return Hh(this,ke().then((function(){return Jc(Eh(n),t,e,I(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return Hh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Vh(e,t),e.reload()})))},t.ed=function(t){var e=this;return Hh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Vh(e,t),e.reload()})))},t.Db=function(t){var e=this;return Hh(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Vh(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Oh(this);var e=this;return Hh(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Vh(e,t),Lh(e,"displayName",t.displayName||null),Lh(e,"photoURL",t.photoUrl||null),G(e.providerData,(function(t){"password"===t.providerId&&(Jr(t,"displayName",e.displayName),Jr(t,"photoURL",e.photoURL))})),Nh(e)})).then(Ch))},t.cd=function(t){var e=this;return Hh(this,Fh(this).then((function(n){return Q(Rh(e),t)?function(t,e,n){return nu(t,ks,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return G(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),G(Rh(e),(function(t){n[t]||Ph(e,t)})),n[Fo.PROVIDER_ID]||Jr(e,"phoneNumber",null),Nh(e)})):Nh(e).then((function(){throw new A("no-such-provider")}))})))},t.delete=function(){var t=this;return Hh(this,this.I().then((function(e){return nu(t.a,Ns,{idToken:e})})).then((function(){t.dispatchEvent(new sh("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");bh(t,null),wh(t,null),Th(t,null),t.N=[],t.J=!0,Sh(t),Jr(t,"refreshToken",null),t.b&&xc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?I(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?I(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?I(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?I(this.Mb,this):null},t.Ec=function(t){var e=this;return Bh(this,"linkViaPopup",t,(function(){return Uh(e,t.providerId).then((function(){return Nh(e)}))}),!1)},t.Nc=function(t){return Bh(this,"reauthViaPopup",t,(function(){return ke()}),!0)},t.Fc=function(t){var e=this;return Kh(this,"linkViaRedirect",t,(function(){return Uh(e,t.providerId)}),!1)},t.Oc=function(t){return Kh(this,"reauthViaRedirect",t,(function(){return ke()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return n=this.I().then((function(n){return ws(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=jh(i,t,"link"),qh(i,t)})).then((function(){return o})),Hh(this,n)},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Hh(this,ke().then((function(){return ho(Is(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=jh(i,t,"reauthenticate"),Vh(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return Hh(this,this.I().then((function(e){return n=e,void 0===t||vt(t)?{}:qi(new Oi(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return Hh(this,this.I().then((function(t){return r=t,void 0===e||vt(e)?{}:qi(new Oi(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Hh(this,t=ho(ke(t),n.uid).then((function(t){return e=jh(n,t,"reauthenticate"),Vh(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&gt(t,this.metadata.w()),G(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),gt(t,this.S.w()),t};var Qh={name:"redirectUser",F:"session"};function Xh(t){return rc(t.b,Qh,t.a)}function Yh(t){this.a=t,this.b=tc(),this.c=null,this.f=function(t){var e=Zh("local"),n=Zh("session"),r=Zh("none");return function(t,e,n){var r=nc(e,n),i=ec(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Ur(s.localStorage.getItem(r))}catch(t){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get($h,t.a).then((function(t){return t?Zh(t):e}))}))}))})).then((function(e){return t.c=e,Jh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Zh("local"),this.a,I(this.g,this))}function Jh(t,e){var n,r=[];for(n in $u)$u[n]!==e&&r.push(rc(t.b,Zh($u[n]),t.a));return r.push(rc(t.b,$h,t.a)),function(t){return new Ie((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Ce(t[s],T(o,s),a);else e(i)}))}(r)}Yh.prototype.g=function(){var t=this,e=Zh("local");rl(this,(function(){return ke().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Jh(t,"local").then((function(){t.c=e}))}))}))};var $h={name:"persistence",F:"session"};function Zh(t){return{name:"authUser",F:t}}function tl(t,e){return rl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function el(t){return rl(t,(function(){return rc(t.b,t.c,t.a)}))}function nl(t,e,n){return rl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),zh(t||{})}))}))}function rl(t,e){return t.f=t.f.then(e,e),t.f}function il(t){if(this.l=!1,Jr(this,"settings",new Xc),Jr(this,"app",t),!fl(this).options||!fl(this).options.apiKey)throw new A("invalid-api-key");t=lt.SDK_VERSION?Dr(lt.SDK_VERSION):null,this.a=new Ya(fl(this).options&&fl(this).options.apiKey,R(k),t),this.P=[],this.s=[],this.N=[],this.Pa=lt.INTERNAL.createSubscribe(I(this.zc,this)),this.W=void 0,this.ib=lt.INTERNAL.createSubscribe(I(this.Ac,this)),hl(this,null),this.i=new Yh(fl(this).options.apiKey+":"+fl(this).name),this.D=new Wh(fl(this).options.apiKey+":"+fl(this).name),this.$=ml(this,function(t){var e=fl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Qh,t.a).then((function(t){return t&&e&&(t.authDomain=e),zh(t||{})}))}(t.D,fl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Xh(t.D)}));return ml(t,e)}(t).then((function(){return nl(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return tl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:el(t.i)}))):null})).then((function(e){hl(t,e||null)}));return ml(t,n)}(this)),this.h=ml(this,function(t){return t.$.then((function(){return cl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Zh("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=I(this.Zc,this),this.Ba=I(this.da,this),this.qa=I(this.mc,this),this.za=I(this.wc,this),this.Aa=I(this.xc,this),this.b=null,function(t){var e=fl(t).options.authDomain,n=fl(t).options.apiKey;e&&xr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Bc(e,n,fl(t).name,t.R),Rc(t.b,t),pl(t)&&kh(pl(t)),t.m){kh(t.m);var r=t.m;r.xa(t.la()),bh(r,t),Ih(r=t.m,t.J),Th(r,t),gh(r=t.m,t.R),wh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Gc,this),this.u=0,Tn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=jn(this.R.url);t=Zr({protocol:t.c,host:t.a,port:t.g,options:Zr({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function ol(t){Je.call(this,"languageCodeChanged"),this.h=t}function al(t){Je.call(this,"emulatorConfigChanged"),this.c=t}function sl(t){Je.call(this,"frameworkChanged"),this.f=t}function ul(t){return t.Oa||De(new A("auth-domain-config-required"))}function cl(t){if(!xr())return De(new A("operation-not-supported-in-this-environment"));var e=ul(t).then((function(){return t.b.ra()})).then((function(t){return t?Zr(t):null}));return ml(t,e)}function hl(t,e){pl(t)&&(function(t,e){Y(t.W,(function(t){return t==e}))}(pl(t),t.Ba),pn(pl(t),"tokenChanged",t.qa),pn(pl(t),"userDeleted",t.za),pn(pl(t),"userInvalidated",t.Aa),Sh(pl(t))),e&&(e.W.push(t.Ba),hn(e,"tokenChanged",t.qa),hn(e,"userDeleted",t.za),hn(e,"userInvalidated",t.Aa),0<t.u&&_h(e)),Jr(t,"currentUser",e),e&&(e.xa(t.la()),bh(e,t),Ih(e,t.J),Th(e,t),gh(e,t.R),wh(e,t))}function ll(t,e){var n=null,r=null;return ml(t,e.then((function(e){return n=Uo(e),r=Yi(e),function(t,e){var n={};return n.apiKey=fl(t).options.apiKey,n.authDomain=fl(t).options.authDomain,n.appName=fl(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new yh(t,e);return n&&(i.ha=n),r&&Ih(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return pl(t)&&e.uid==pl(t).uid?(Mh(pl(t),e),t.da(e)):(hl(t,e),kh(e),t.da(e))})).then((function(){vl(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=rh(e.w(),t,I(t.kc,t))),n||e})).then((function(){return Zr({user:pl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function fl(t){return t.app}function pl(t){return t.currentUser}function dl(t){return pl(t)&&pl(t)._lat||null}function vl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](dl(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](dl(t))}}function ml(t,e){return t.P.push(e),e.oa((function(){X(t.P,e)})),e}function yl(){}function gl(){this.a={},this.b=1e12}Yh.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in $u)if($u[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Er()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ou()&&"none"!==t)throw n;break;default:if(!Rr()&&"none"!==t)throw n}}(t),rl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Jh(n,t)})).then((function(){if(n.c=Zh(t),e)return n.b.set(n.c,e,n.a)})):ke()}))},_(il,Tn),_(ol,Je),_(al,Je),_(sl,Je),(t=il.prototype).yb=function(t){return ml(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,rs(this.a,this.aa),this.dispatchEvent(new ol(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&br().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,is(this.a,this.R),this.dispatchEvent(new al(this.R))}},t.Gc=function(t){this.J.push(t),as(this.a,lt.SDK_VERSION?Dr(lt.SDK_VERSION,this.J):null),this.dispatchEvent(new sl(this.J))},t.Ga=function(){return $(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:fl(this).options.apiKey,authDomain:fl(this).options.authDomain,appName:fl(this).name,currentUser:pl(this)&&pl(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?I(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return ll(i,bs(i.a,o))}))},t.Xc=function(t){if(!xr())return De(new A("operation-not-supported-in-this-environment"));var e=this,n=Xi(t.providerId),r=jr(),i=null;(!Mr()||Ir())&&fl(this).options.authDomain&&t.isOAuthProvider&&(i=yu(fl(this).options.authDomain,fl(this).options.apiKey,fl(this).name,"signInViaPopup",t,null,r,lt.SDK_VERSION||null,null,null,this.T(),this.R));var o=mr(i,n&&n.va,n&&n.ua);return n=ul(this).then((function(n){return Mc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new Ie((function(t,n){e.na("signInViaPopup",null,new A("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Uc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&vr(o),t?Zr(t):null})).o((function(t){throw o&&vr(o),t})),ml(this,n)},t.Yc=function(t){if(!xr())return De(new A("operation-not-supported-in-this-environment"));var e=this,n=ul(this).then((function(){return function(t){return rl(t,(function(){return t.b.set($h,t.c.F,t.a)}))}(e.i)})).then((function(){return Vc(e.b,"signInViaRedirect",t,void 0,e.T())}));return ml(this,n)},t.ra=function(){var t=this;return cl(this).then((function(e){return t.b&&Hc(t.b.b),e})).o((function(e){throw t.b&&Hc(t.b.b),e}))},t.dd=function(t){if(!t)return De(new A("null-user"));if(this.S!=t.tenantId)return De(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=fl(this).options.apiKey,n.authDomain=fl(this).options.authDomain,n.appName=fl(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[$a]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new yh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Ih(e,r),Mh(e,t),e}(t,n,e.D,e.Ga());return ml(this,this.h.then((function(){if(fl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return pl(e)&&t.uid==pl(e).uid?(Mh(pl(e),t),e.da(t)):(hl(e,r),kh(r),e.da(r))})).then((function(){vl(e)})))},t.Bb=function(){var t=this;return ml(this,this.h.then((function(){return t.b&&Hc(t.b.b),pl(t)?(hl(t,null),el(t.i).then((function(){vl(t)}))):ke()})))},t.Zc=function(){var t=this;return nl(this.i,fl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=pl(t)&&e){n=pl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Mh(pl(t),e),pl(t).I();(pl(t)||e)&&(hl(t,e),e&&(kh(e),e.ha=t.D),t.b&&Rc(t.b,t),vl(t))}}))},t.da=function(t){return tl(this.i,t)},t.mc=function(){vl(this),this.da(pl(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return ll(e,ke(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(pl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),ml(t,t.h.then((function(){!t.l&&Q(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(dl(t)))})))}(this,(function(){t.next(pl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(pl(r)):"function"==typeof t.next&&t.next(pl(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(pl(r)):"function"==typeof t.next&&t.next(pl(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return ml(this,this.h.then((function(){return pl(e)?pl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return ll(e,nu(e.a,Ys,{token:t}))})).then((function(t){var n=t.user;return Lh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return ll(n,nu(n.a,Js,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return ll(n,nu(n.a,Ss,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return ll(e,t.ka(e.a))}))},t.Sc=function(t){return Xr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=pl(t);if(e&&e.isAnonymous){var n=Zr({providerId:null,isNewUser:!1});return Zr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ll(t,t.a.Ab()).then((function(e){var n=e.user;return Lh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return pl(this)&&pl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&pl(this)&&_h(pl(this))},t.Pc=function(t){var e=this;G(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&pl(this)&&Sh(pl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),ml(this,this.h.then((function(){e.l||Q(e.s,t)&&t(dl(e))})))},t.removeAuthTokenListener=function(t){Y(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Zh("local"),t.a,this.ja),this.b&&(xc(this.b,this),Hc(this.b.b)),Promise.resolve()},t.hc=function(t){return ml(this,function(t,e){return nu(t,As,{identifier:e,continueUri:Pr()?lr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!xo(t)},t.xb=function(t,e){var n=this;return ml(this,ke().then((function(){var t=new Oi(e);if(!t.c)throw new A("argument-error",Pi+" must be true when sending sign in link to email");return qi(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return ml(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return ml(this,this.a.Sa(t).then((function(t){return new ui(t)})))},t.kb=function(t){return ml(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return ml(this,ke().then((function(){return void 0===e||vt(e)?{}:qi(new Oi(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return ml(this,Jc(this,t,e,I(this.ab,this)))},t.Vc=function(t,e){var n=this;return ml(this,ke().then((function(){var r=e||lr(),i=Ro(t,r);if(!(r=xo(r)))throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new A("tenant-id-mismatch");return n.ab(i)})))},yl.prototype.render=function(){},yl.prototype.reset=function(){},yl.prototype.getResponse=function(){},yl.prototype.execute=function(){};var bl=null;function wl(t,e){return(e=Il(e))&&t.a[e]||null}function Il(t){return(t=void 0===t?1e12:t)?t.toString():null}function Tl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=he(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():hn(this.f,"click",this.i)}function El(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function _l(){}function Sl(){}gl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Tl(t,e),this.b++},gl.prototype.reset=function(t){var e=wl(this,t);t=Il(t),e&&t&&(e.delete(),delete this.a[t])},gl.prototype.getResponse=function(t){return(t=wl(this,t))?t.getResponse():null},gl.prototype.execute=function(t){(t=wl(this,t))&&t.execute()},Tl.prototype.getResponse=function(){return El(this),this.b},Tl.prototype.execute=function(){El(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Tl.prototype.delete=function(){El(this),this.g=!0,clearTimeout(this.a),this.a=null,pn(this.f,"click",this.i)},Jr(_l,"FACTOR_ID","phone"),Sl.prototype.g=function(){return bl||(bl=new gl),ke(bl)},Sl.prototype.c=function(){};var Al=null;function Nl(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var kl=new wt(_t,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Dl=new Kr(3e4,6e4);Nl.prototype.g=function(t){var e=this;return new Ie((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),Dl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete s[e.a]},ke(Ka(kt(kl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Nl.prototype.c=function(){this.b--};var Cl=null;function Ol(t,e,n,r,i,o,a){if(Jr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(Al||(Al=new Sl),a=Al):(Cl||(Cl=new Nl),a=Cl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Pl])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ll],!s.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!he(e)||!this.i&&he(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ya(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Rl];this.a[Rl]=function(t){if(Ml(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Or(c,s);"function"==typeof e&&e(t)}};var h=this.a[xl];this.a[xl]=function(){if(Ml(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Or(h,s);"function"==typeof t&&t()}}}var Rl="callback",xl="expired-callback",Pl="sitekey",Ll="size";function Ml(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Fl(t,e){return t.h.push(e),e.oa((function(){X(t.h,e)})),e}function Vl(t){if(t.J)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function Ul(t,e,n){var r=!1;try{this.b=n||lt.app()}catch(t){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=lt.SDK_VERSION?Dr(lt.SDK_VERSION,o):null,Ol.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,R(k),r)}function jl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=ql.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=ql[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}(t=Ol.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Fl(this,ke().then((function(){if(Pr()&&!Tr())return br();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,nu(t.s,Us,{})})).then((function(e){t.a[Pl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Vl(this);var t=this;return Fl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=he(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ce&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Ht(a.name),'"'),a.type){o.push(' type="',Ht(a.type),'"');var s={};gt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=ve(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):le(o,a)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){a="function"==typeof o.item;break t}}a=!1}G(a?$(o):o,r)}}}(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Vl(this);var t=this;return Fl(this,this.render().then((function(e){return new Ie((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Vl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Vl(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=he(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},_(Ul,Ol);var ql="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Bl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Kl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Gl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function Hl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function zl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Wl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Ql(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Xl(t){return v(t)&&"string"==typeof t.uid}function Yl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Jl(t,e){for(var n in e){var r=e[n].name;t[r]=tf(r,t[n],e[n].j)}}function $l(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T((function(t){return this[t]}),n),set:T((function(t,e,n,r){jl(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function Zl(t,e,n,r){t[e]=tf(e,n,r)}function tf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return jl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Jl(il.prototype,{kb:{name:"applyActionCode",j:[Bl("code")]},Sa:{name:"checkActionCode",j:[Bl("code")]},ob:{name:"confirmPasswordReset",j:[Bl("code"),Bl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Bl("email"),Bl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Bl("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Bl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Yl(Gl(),Hl(),"nextOrObserver"),Hl("opt_error",!0),Hl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Yl(Gl(),Hl(),"nextOrObserver"),Hl("opt_error",!0),Hl("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Bl("email"),Yl(Gl("opt_actionCodeSettings",!0),zl(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Bl("email"),Gl("actionCodeSettings")]},yb:{name:"setPersistence",j:[Bl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Wl()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Wl()]},Tc:{name:"signInWithCustomToken",j:[Bl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Bl("email"),Bl("password")]},Vc:{name:"signInWithEmailLink",j:[Bl("email"),Bl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Bl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Yl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof yh)}},zl(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Bl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Bl("url"),Gl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Bl("code")]}}),$l(il.prototype,{lc:{name:"languageCode",lb:Yl(Bl(),zl(),"languageCode")},ti:{name:"tenantId",lb:Yl(Bl(),zl(),"tenantId")}}),il.Persistence=$u,il.Persistence.LOCAL="local",il.Persistence.SESSION="session",il.Persistence.NONE="none",Jl(yh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Kl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Kl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Wl()]},rb:{name:"linkWithCredential",j:[Wl()]},Dc:{name:"linkWithPhoneNumber",j:[Bl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Wl()]},ub:{name:"reauthenticateWithCredential",j:[Wl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Bl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Yl(Gl("opt_actionCodeSettings",!0),zl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Bl(null,!0)]},cd:{name:"unlink",j:[Bl("provider")]},Cb:{name:"updateEmail",j:[Bl("email")]},Db:{name:"updatePassword",j:[Bl("password")]},ed:{name:"updatePhoneNumber",j:[Wl("phone")]},Eb:{name:"updateProfile",j:[Gl("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Bl("email"),Yl(Gl("opt_actionCodeSettings",!0),zl(null,!0),"opt_actionCodeSettings",!0)]}}),Jl(gl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(yl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(Ie.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),$l(Xc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Kl("appVerificationDisabledForTesting")}}),Jl(Yc.prototype,{confirm:{name:"confirm",j:[Bl("verificationCode")]}}),Zl(co,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[yo,Co,Lo,po],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Yl(Bl(),Gl(),"json")]),Zl(Oo,"credential",(function(t,e){return new Do(t,e)}),[Bl("email"),Bl("password")]),Jl(Do.prototype,{w:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(Io.prototype,{Ca:{name:"addScope",j:[Bl("scope")]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Zl(Io,"credential",To,[Yl(Bl(),Gl(),"token")]),Zl(Oo,"credentialWithLink",Ro,[Bl("email"),Bl("emailLink")]),Jl(Eo.prototype,{Ca:{name:"addScope",j:[Bl("scope")]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Zl(Eo,"credential",_o,[Yl(Bl(),Gl(),"token")]),Jl(So.prototype,{Ca:{name:"addScope",j:[Bl("scope")]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Zl(So,"credential",Ao,[Yl(Bl(),Yl(Gl(),zl()),"idToken"),Yl(Bl(),zl(),"accessToken",!0)]),Jl(No.prototype,{Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Zl(No,"credential",ko,[Yl(Bl(),Gl(),"token"),Bl("secret",!0)]),Jl(wo.prototype,{Ca:{name:"addScope",j:[Bl("scope")]},credential:{name:"credential",j:[Yl(Bl(),Yl(Gl(),zl()),"optionsOrIdToken"),Yl(Bl(),zl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Jl(vo.prototype,{w:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(lo.prototype,{w:{name:"toJSON",j:[Bl(null,!0)]}}),Zl(Fo,"credential",Vo,[Bl("verificationId"),Bl("verificationCode")]),Jl(Fo.prototype,{gb:{name:"verifyPhoneNumber",j:[Yl(Bl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Ql(t.session,so)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Ql(t.session,uo)&&Xl(t.multiFactorHint):t.session&&t.multiFactorUid?Ql(t.session,uo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Jl(Po.prototype,{w:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(A.prototype,{toJSON:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(Wo.prototype,{toJSON:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(zo.prototype,{toJSON:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(nh.prototype,{toJSON:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(Zc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),Jl(uh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},Bl("displayName",!0)]},bd:{name:"unenroll",j:[Yl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Xl},Bl(),"multiFactorInfoIdentifier")]}}),Jl(Ul.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Zl(Ti,"parseLink",Ci,[Bl("link")]),Zl(_l,"assertion",(function(t){return new ah(t)}),[Wl("phone")]),function(){if(void 0===lt||!lt.INTERNAL||!lt.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:hi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ci,VERIFY_AND_CHANGE_EMAIL:li,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:il,AuthCredential:co,Error:A};Zl(t,"EmailAuthProvider",Oo,[]),Zl(t,"FacebookAuthProvider",Io,[]),Zl(t,"GithubAuthProvider",Eo,[]),Zl(t,"GoogleAuthProvider",So,[]),Zl(t,"TwitterAuthProvider",No,[]),Zl(t,"OAuthProvider",wo,[Bl("providerId")]),Zl(t,"SAMLAuthProvider",bo,[Bl("providerId")]),Zl(t,"PhoneAuthProvider",Fo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof il)}}]),Zl(t,"RecaptchaVerifier",Ul,[Yl(Bl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Gl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof lt.app.App)}}]),Zl(t,"ActionCodeURL",Ti,[]),Zl(t,"PhoneMultiFactorGenerator",_l,[]),lt.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new il(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),lt.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:I((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:I(t.nc,t),addAuthTokenListener:I(t.cc,t),removeAuthTokenListener:I(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),lt.registerVersion("@firebase/auth","0.16.7"),lt.INTERNAL.extendNamespace({User:yh})}()}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),document.querySelector("#txtEmail"),document.querySelector("#txtPassword");const ft=document.querySelector("#btnLogin"),pt=(document.querySelector("#btnSignup"),document.querySelector("#btnLogout"),document.querySelector("#divAuthState"),document.querySelector("#lblAuthState"),document.querySelector("#divLoginError")),dt=document.querySelector("#lblLoginErrorMessage");pt.style.display="none",dt.innerHTML="";var vt="8.6.8";lt.registerVersion("firebase",vt,"app"),lt.SDK_VERSION=vt;var mt=function(t,e){return mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},mt(t,e)};function yt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var gt,bt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},wt=wt||{},It=bt||self;function Tt(){}function Et(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function _t(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var St="closure_uid_"+(1e9*Math.random()>>>0),At=0;function Nt(t,e,n){return t.call.apply(t.bind,arguments)}function kt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Dt(t,e,n){return(Dt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Nt:kt).apply(null,arguments)}function Ct(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Ot(){return Date.now()}function Rt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Pb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function xt(){this.j=this.j,this.i=this.i}xt.prototype.j=!1,xt.prototype.ka=function(){!this.j&&(this.j=!0,this.H(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,St)&&t[St]||(t[St]=++At)}(this)},xt.prototype.H=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Pt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Lt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Mt(t){return Array.prototype.concat.apply([],arguments)}function Ft(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Vt(t){return/^[\s\xa0]*$/.test(t)}var Ut,jt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function qt(t,e){return-1!=t.indexOf(e)}function Bt(t,e){return t<e?-1:t>e?1:0}t:{var Kt=It.navigator;if(Kt){var Gt=Kt.userAgent;if(Gt){Ut=Gt;break t}}Ut=""}function Ht(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function zt(t){var e={};for(var n in t)e[n]=t[n];return e}var Wt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Qt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Wt.length;o++)n=Wt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Xt(t){return Xt[" "](t),t}Xt[" "]=Tt;var Yt,Jt,$t=qt(Ut,"Opera"),Zt=qt(Ut,"Trident")||qt(Ut,"MSIE"),te=qt(Ut,"Edge"),ee=te||Zt,ne=qt(Ut,"Gecko")&&!(qt(Ut.toLowerCase(),"webkit")&&!qt(Ut,"Edge"))&&!(qt(Ut,"Trident")||qt(Ut,"MSIE"))&&!qt(Ut,"Edge"),re=qt(Ut.toLowerCase(),"webkit")&&!qt(Ut,"Edge");function ie(){var t=It.document;return t?t.documentMode:void 0}t:{var oe="",ae=(Jt=Ut,ne?/rv:([^\);]+)(\)|;)/.exec(Jt):te?/Edge\/([\d\.]+)/.exec(Jt):Zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Jt):re?/WebKit\/(\S+)/.exec(Jt):$t?/(?:Version)[ \/]?(\S+)/.exec(Jt):void 0);if(ae&&(oe=ae?ae[1]:""),Zt){var se=ie();if(null!=se&&se>parseFloat(oe)){Yt=String(se);break t}}Yt=oe}var ue,ce={};function he(t){return function(t,e){var n=ce;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=jt(String(Yt)).split("."),r=jt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=Bt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Bt(0==a[2].length,0==s[2].length)||Bt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}It.document&&Zt?ue=ie()||parseInt(Yt,10)||void 0:ue=void 0;var le=ue,fe=!Zt||9<=Number(le),pe=Zt&&!he("9"),de=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{It.addEventListener("test",Tt,e),It.removeEventListener("test",Tt,e)}catch(t){}return t}();function ve(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function me(t,e){if(ve.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ne){t:{try{Xt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ye[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ve.prototype.b=function(){this.defaultPrevented=!0},Rt(me,ve);var ye={2:"touch",3:"pen",4:"mouse"};me.prototype.b=function(){me.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,pe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var ge="closure_listenable_"+(1e6*Math.random()|0),be=0;function we(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++be,this.Y=this.Z=!1}function Ie(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function Te(t){this.src=t,this.a={},this.b=0}function Ee(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Pt(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ie(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function _e(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}Te.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=_e(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new we(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Se="closure_lm_"+(1e6*Math.random()|0),Ae={};function Ne(t,e,n,r,i){if(r&&r.once)return De(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ne(t,e[o],n,r,i);return null}return n=Fe(n),t&&t[ge]?t.wa(e,n,_t(r)?!!r.capture:!!r,i):ke(t,e,n,!1,r,i)}function ke(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=_t(i)?!!i.capture:!!i;if(a&&!fe)return null;var s=Le(t);if(s||(t[Se]=s=new Te(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=Pe,e=fe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)de||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Re(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function De(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)De(t,e[o],n,r,i);return null}return n=Fe(n),t&&t[ge]?t.xa(e,n,_t(r)?!!r.capture:!!r,i):ke(t,e,n,!0,r,i)}function Ce(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ce(t,e[o],n,r,i);else r=_t(r)?!!r.capture:!!r,n=Fe(n),t&&t[ge]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=_e(o=t.a[e],n,r,i))&&(Ie(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Le(t))&&(e=t.a[e.toString()],t=-1,e&&(t=_e(e,n,r,i)),(n=-1<t?e[t]:null)&&Oe(n))}function Oe(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ge])Ee(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Re(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Le(e))?(Ee(n,t),0==n.b&&(n.src=null,e[Se]=null)):Ie(t)}}}function Re(t){return t in Ae?Ae[t]:Ae[t]="on"+t}function xe(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&Oe(t),n.call(r,e)}function Pe(t,e){if(t.Y)return!0;if(!fe){if(!e)t:{e=["window","event"];for(var n=It,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return xe(t,e=new me(e,this))}return xe(t,new me(e,this))}function Le(t){return(t=t[Se])instanceof Te?t:null}var Me="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fe(t){return"function"==typeof t?t:(t[Me]||(t[Me]=function(e){return t.handleEvent(e)}),t[Me])}function Ve(){xt.call(this),this.c=new Te(this),this.J=this,this.D=null}function Ue(t,e){var n,r=t.D;if(r)for(n=[];r;r=r.D)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new ve(e,t);else if(e instanceof ve)e.target=e.target||t;else{var i=e;Qt(e=new ve(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=je(a,r,!0,e)&&i}if(i=je(a=e.a=t,r,!0,e)&&i,i=je(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=je(a=e.a=n[o],r,!1,e)&&i}function je(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&Ee(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Rt(Ve,xt),Ve.prototype[ge]=!0,(gt=Ve.prototype).addEventListener=function(t,e,n,r){Ne(this,t,e,n,r)},gt.removeEventListener=function(t,e,n,r){Ce(this,t,e,n,r)},gt.H=function(){if(Ve.X.H.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ie(n[r]);delete e.a[t],e.b--}}this.D=null},gt.wa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},gt.xa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var qe=It.JSON.stringify;function Be(){this.b=this.a=null}var Ke,Ge=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new ze}),(function(t){t.reset()}));function He(){var t=Ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ze(){this.next=this.b=this.a=null}function We(t){It.setTimeout((function(){throw t}),0)}function Qe(t,e){Ke||function(){var t=It.Promise.resolve(void 0);Ke=function(){t.then(Je)}}(),Xe||(Ke(),Xe=!0),Ye.add(t,e)}Be.prototype.add=function(t,e){var n=Ge.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ze.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ze.prototype.reset=function(){this.next=this.b=this.a=null};var Xe=!1,Ye=new Be;function Je(){for(var t;t=He();){try{t.a.call(t.b)}catch(t){We(t)}var e=Ge;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Xe=!1}function $e(t,e){Ve.call(this),this.b=t||1,this.a=e||It,this.f=Dt(this.eb,this),this.g=Ot()}function Ze(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function tn(t,e,n){if("function"==typeof t)n&&(t=Dt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Dt(t.handleEvent,t)}return 2147483647<Number(e)?-1:It.setTimeout(t,e||0)}function en(t){t.a=tn((function(){t.a=null,t.c&&(t.c=!1,en(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Rt($e,Ve),(gt=$e.prototype).aa=!1,gt.M=null,gt.eb=function(){if(this.aa){var t=Ot()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ue(this,"tick"),this.aa&&(Ze(this),this.start()))}},gt.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Ot())},gt.H=function(){$e.X.H.call(this),Ze(this),delete this.a};var nn=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}mt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:en(this)},e.prototype.H=function(){t.prototype.H.call(this),this.a&&(It.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(xt);function rn(t){xt.call(this),this.b=t,this.a={}}Rt(rn,xt);var on=[];function an(t,e,n,r){Array.isArray(n)||(n&&(on[0]=n.toString()),n=on);for(var i=0;i<n.length;i++){var o=Ne(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function sn(t){Ht(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Oe(t)}),t),t.a={}}function un(){this.a=!0}function cn(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return qe(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}rn.prototype.H=function(){rn.X.H.call(this),sn(this)},rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},un.prototype.info=function(){};var hn={},ln=null;function fn(){return ln=ln||new Ve}function pn(t){ve.call(this,hn.Ga,t)}function dn(t){var e=fn();Ue(e,new pn(e,t))}function vn(t,e){ve.call(this,hn.STAT_EVENT,t),this.stat=e}function mn(t){var e=fn();Ue(e,new vn(e,t))}function yn(t){ve.call(this,hn.Ha,t)}function gn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return It.setTimeout((function(){t()}),e)}hn.Ga="serverreachability",Rt(pn,ve),hn.STAT_EVENT="statevent",Rt(vn,ve),hn.Ha="timingevent",Rt(yn,ve);var bn={NO_ERROR:0,fb:1,sb:2,rb:3,mb:4,qb:5,tb:6,Ea:7,TIMEOUT:8,wb:9},wn={kb:"complete",Gb:"success",Fa:"error",Ea:"abort",yb:"ready",zb:"readystatechange",TIMEOUT:"timeout",ub:"incrementaldata",xb:"progress",nb:"downloadprogress",Ob:"uploadprogress"};function In(){}function Tn(t){return t.b||(t.b=t.c())}function En(){}In.prototype.b=null;var _n,Sn={OPEN:"a",jb:"b",Fa:"c",vb:"d"};function An(){ve.call(this,"d")}function Nn(){ve.call(this,"c")}function kn(){}function Dn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new rn(this),this.P=Cn,t=ee?125:void 0,this.R=new $e(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.G=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Rt(An,ve),Rt(Nn,ve),Rt(kn,In),kn.prototype.a=function(){return new XMLHttpRequest},kn.prototype.c=function(){return{}},_n=new kn;var Cn=45e3,On={},Rn={};function xn(t,e,n){t.G=1,t.i=er(Xn(e)),t.j=n,t.I=!0,Pn(t,null)}function Pn(t,e){t.u=Ot(),Fn(t),t.l=Xn(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),dr(n.b,"t",r),t.D=0,t.a=ui(t.g,t.g.C?e:null),0<t.O&&(t.F=new nn(Dt(t.Da,t,t.a),t.O)),an(t.J,t.a,"readystatechange",t.bb),e=t.B?zt(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),dn(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ln(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Mn(t,n);if(i==Rn){4==e&&(t.h=4,mn(14),r=!1),cn(t.c,t.f,null,"[Incomplete Response]");break}if(i==On){t.h=4,mn(15),cn(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}cn(t.c,t.f,i,null),Bn(t,i)}4==e&&0==n.length&&(t.h=1,mn(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ti(e),e.F=!0,mn(11))):(cn(t.c,t.f,n,"[Invalid Chunked Response]"),qn(t),jn(t))}function Mn(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Rn:(n=Number(e.substring(n,r)),isNaN(n)?On:(r+=1)+n>e.length?Rn:(e=e.substr(r,n),t.D=r+n,e))}function Fn(t){t.T=Ot()+t.P,Vn(t,t.P)}function Vn(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=gn(Dt(t.$a,t),e)}function Un(t){t.o&&(It.clearTimeout(t.o),t.o=null)}function jn(t){0==t.g.v||t.A||ri(t.g,t)}function qn(t){Un(t);var e=t.F;e&&"function"==typeof e.ka&&e.ka(),t.F=null,Ze(t.R),sn(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ka())}function Bn(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Ir(n.b,t)))if(n.I=t.N,!t.C&&Ir(n.b,t)&&3==n.v){try{var r=n.la.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;ni(n),Hr(n)}Zr(n),mn(18)}}else n.pa=i[1],0<n.pa-n.P&&37500>i[2]&&n.G&&0==n.o&&!n.m&&(n.m=gn(Dt(n.Xa,n),6e3));if(1>=wr(n.b)&&n.fa){try{n.fa()}catch(t){}n.fa=void 0}}else oi(n,11)}else if((t.C||n.a==t)&&ni(n),!Vt(e))for(e=r=n.la.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ha=i[2];var o=i[3];null!=o&&(n.ia=o,n.c.info("VER="+n.ia));var a=i[4];null!=a&&(n.qa=a,n.c.info("SVER="+n.qa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(qt(h,"spdy")||qt(h,"quic")||qt(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(Tr(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.oa=f,tr(u.B,u.A,f))}}n.v=3,n.f&&n.f.ua(),n.U&&(n.N=Ot()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).ma=si(u,u.C?u.ha:null,u.ga),p.C){Er(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Un(d),Fn(d)),u.a=p}else $r(u);0<n.g.length&&Qr(n)}else"stop"!=i[0]&&"close"!=i[0]||oi(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?oi(n,7):Gr(n):"noop"!=i[0]&&n.f&&n.f.ta(i),n.o=0);dn(4)}catch(t){}}function Kn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Et(t)||"string"==typeof t)Lt(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Et(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Et(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Gn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Gn)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Hn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];zn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)zn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function zn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(gt=Dn.prototype).setTimeout=function(t){this.P=t},gt.bb=function(t){t=t.target;var e=this.F;e&&3==jr(t)?e.f():this.Da(t)},gt.Da=function(t){try{if(t==this.a)t:{var e=jr(this.a),n=this.a.va(),r=this.a.W();if(!(3>e||3==e&&!ee&&!this.a.$())){this.A||4!=e||7==n||dn(8==n||0>=r?3:2),Un(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vt(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,mn(12),qn(this),jn(this);break t}cn(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Bn(this,u)}this.I?(Ln(this,e,o),ee&&this.b&&3==e&&(an(this.J,this.R,"tick",this.ab),this.R.start())):(cn(this.c,this.f,o,null),Bn(this,o)),4==e&&qn(this),this.b&&!this.A&&(4==e?ri(this.g,this):(this.b=!1,Fn(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,mn(12)):(this.h=0,mn(13)),qn(this),jn(this)}}}catch(t){}},gt.ab=function(){if(this.a){var t=jr(this.a),e=this.a.$();this.D<e.length&&(Un(this),Ln(this,t,e),this.b&&4!=t&&Fn(this))}},gt.cancel=function(){this.A=!0,qn(this)},gt.$a=function(){this.o=null;var t=Ot();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.G&&(dn(3),mn(17)),qn(this),this.h=2,jn(this)):Vn(this,this.T-t)},(gt=Gn.prototype).K=function(){Hn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},gt.L=function(){return Hn(this),this.a.concat()},gt.get=function(t,e){return zn(this.b,t)?this.b[t]:e},gt.set=function(t,e){zn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},gt.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Wn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qn(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Qn){this.a=void 0!==e?e:t.a,Yn(this,t.f),this.j=t.j,Jn(this,t.c),$n(this,t.h),this.g=t.g,e=t.b;var n=new hr;n.c=e.c,e.a&&(n.a=new Gn(e.a),n.b=e.b),Zn(this,n),this.i=t.i}else t&&(n=String(t).match(Wn))?(this.a=!!e,Yn(this,n[1]||"",!0),this.j=nr(n[2]||""),Jn(this,n[3]||"",!0),$n(this,n[4]),this.g=nr(n[5]||"",!0),Zn(this,n[6]||"",!0),this.i=nr(n[7]||"")):(this.a=!!e,this.b=new hr(null,this.a))}function Xn(t){return new Qn(t)}function Yn(t,e,n){t.f=n?nr(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Jn(t,e,n){t.c=n?nr(e,!0):e}function $n(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Zn(t,e,n){e instanceof hr?(t.b=e,function(t,e){e&&!t.f&&(lr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(fr(this,e),dr(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=rr(e,ur)),t.b=new hr(e,t.a))}function tr(t,e,n){t.b.set(e,n)}function er(t){return tr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Ot()).toString(36)),t}function nr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function rr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ir),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ir(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Qn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(rr(e,or,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(rr(e,or,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(rr(n,"/"==n.charAt(0)?sr:ar,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",rr(n,cr)),t.join("")};var or=/[#\/\?@]/g,ar=/[#\?:]/g,sr=/[#\?]/g,ur=/[#\?@]/g,cr=/#/g;function hr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function lr(t){t.a||(t.a=new Gn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function fr(t,e){lr(t),e=vr(t,e),zn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,zn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Hn(t)))}function pr(t,e){return lr(t),e=vr(t,e),zn(t.a.b,e)}function dr(t,e,n){fr(t,e),0<n.length&&(t.c=null,t.a.set(vr(t,e),Ft(n)),t.b+=n.length)}function vr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(gt=hr.prototype).add=function(t,e){lr(this),this.c=null,t=vr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},gt.forEach=function(t,e){lr(this),this.a.forEach((function(n,r){Lt(n,(function(n){t.call(e,n,r,this)}),this)}),this)},gt.L=function(){lr(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},gt.K=function(t){lr(this);var e=[];if("string"==typeof t)pr(this,t)&&(e=Mt(e,this.a.get(vr(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Mt(e,t[n])}return e},gt.set=function(t,e){return lr(this),this.c=null,pr(this,t=vr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},gt.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},gt.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var mr=function(t,e){this.b=t,this.a=e};function yr(t){this.g=t||gr,t=It.PerformanceNavigationTiming?0<(t=It.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(It.ja&&It.ja.za&&It.ja.za()&&It.ja.za().Qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var gr=10;function br(t){return!!t.b||!!t.a&&t.a.size>=t.f}function wr(t){return t.b?1:t.a?t.a.size:0}function Ir(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Tr(t,e){t.a?t.a.add(e):t.b=e}function Er(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function _r(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=yt(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ft(t.c)}function Sr(){}function Ar(){this.a=new Sr}function Nr(t,e,n){var r=n||"";try{Kn(t,(function(t,n){var i=t;_t(t)&&(i=qe(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function kr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}yr.prototype.cancel=function(){var t,e;if(this.c=_r(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=yt(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Sr.prototype.stringify=function(t){return It.JSON.stringify(t,void 0)},Sr.prototype.parse=function(t){return It.JSON.parse(t,void 0)};var Dr=It.JSON.parse;function Cr(t){Ve.call(this),this.headers=new Gn,this.l=t||null,this.b=!1,this.u=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.m=this.A=!1,this.s=0,this.o=null,this.I=Or,this.F=this.G=!1}Rt(Cr,Ve);var Or="",Rr=/^https?$/i,xr=["POST","PUT"];function Pr(t){return"content-type"==t.toLowerCase()}function Lr(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Mr(t),Vr(t)}function Mr(t){t.A||(t.A=!0,Ue(t,"complete"),Ue(t,"error"))}function Fr(t){if(t.b&&void 0!==wt&&(!t.u[1]||4!=jr(t)||2!=t.W()))if(t.m&&4==jr(t))tn(t.Aa,0,t);else if(Ue(t,"readystatechange"),4==jr(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.C).match(Wn)[1]||null;if(!o&&It.self&&It.self.location){var a=It.self.location.protocol;o=a.substr(0,a.length-1)}i=!Rr.test(o?o.toLowerCase():"")}e=i}if(e)Ue(t,"complete"),Ue(t,"success");else{t.h=6;try{var s=2<jr(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",Mr(t)}}finally{Vr(t)}}}function Vr(t,e){if(t.a){Ur(t);var n=t.a,r=t.u[0]?Tt:null;t.a=null,t.u=null,e||Ue(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Ur(t){t.a&&t.F&&(t.a.ontimeout=null),t.o&&(It.clearTimeout(t.o),t.o=null)}function jr(t){return t.a?t.a.readyState:0}function qr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ht(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):tr(t,e,n))}function Br(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Kr(t){this.qa=0,this.g=[],this.c=new un,this.ha=this.ma=this.B=this.ga=this.a=this.oa=this.A=this.V=this.i=this.O=this.l=null,this.Pa=this.R=0,this.Ma=Br("failFast",!1,t),this.G=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.pa=this.P=-1,this.T=this.o=this.u=0,this.Ia=Br("baseRetryDelayMs",5e3,t),this.Sa=Br("retryDelaySeedMs",1e4,t),this.Na=Br("forwardChannelMaxRetries",2,t),this.na=Br("forwardChannelRequestTimeoutMs",2e4,t),this.Oa=t&&t.xmlHttpFactory||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new yr(t&&t.concurrentRequestLimit),this.la=new Ar,this.ea=t&&t.fastHandshake||!1,this.Ja=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.ea&&this.S&&t&&t.detectBufferingProxy||!1,this.fa=void 0,this.N=0,this.F=!1,this.s=null,(this.La=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Gr(t){if(zr(t),3==t.v){var e=t.R++,n=Xn(t.B);tr(n,"SID",t.J),tr(n,"RID",e),tr(n,"TYPE","terminate"),Yr(t,n),(e=new Dn(t,t.c,e,void 0)).G=2,e.i=er(Xn(n)),n=!1,It.navigator&&It.navigator.sendBeacon&&(n=It.navigator.sendBeacon(e.i.toString(),"")),!n&&It.Image&&((new Image).src=e.i,n=!0),n||(e.a=ui(e.g,null),e.a.ba(e.i)),e.u=Ot(),Fn(e)}ai(t)}function Hr(t){t.a&&(ti(t),t.a.cancel(),t.a=null)}function zr(t){Hr(t),t.j&&(It.clearTimeout(t.j),t.j=null),ni(t),t.b.cancel(),t.h&&("number"==typeof t.h&&It.clearTimeout(t.h),t.h=null)}function Wr(t,e){t.g.push(new mr(t.Pa++,e)),3==t.v&&Qr(t)}function Qr(t){br(t.b)||t.h||(t.h=!0,Qe(t.Ca,t),t.u=0)}function Xr(t,e){var n;n=e?e.f:t.R++;var r=Xn(t.B);tr(r,"SID",t.J),tr(r,"RID",n),tr(r,"AID",t.P),Yr(t,r),t.i&&t.l&&qr(r,t.i,t.l),n=new Dn(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Jr(t,n,1e3),n.setTimeout(Math.round(.5*t.na)+Math.round(.5*t.na*Math.random())),Tr(t.b,n),xn(n,r,e)}function Yr(t,e){t.f&&Kn({},(function(t,n){tr(e,n,t)}))}function Jr(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Dt(t.f.Ka,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{Nr(h,a,"req"+c+"_")}catch(t){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function $r(t){t.a||t.j||(t.T=1,Qe(t.Ba,t),t.o=0)}function Zr(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=gn(Dt(t.Ba,t),ii(t,t.o)),t.o++,0))}function ti(t){null!=t.s&&(It.clearTimeout(t.s),t.s=null)}function ei(t){t.a=new Dn(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Xn(t.ma);tr(e,"RID","rpc"),tr(e,"SID",t.J),tr(e,"CI",t.G?"0":"1"),tr(e,"AID",t.P),Yr(t,e),tr(e,"TYPE","xmlhttp"),t.i&&t.l&&qr(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ha,n.G=1,n.i=er(Xn(e)),n.j=null,n.I=!0,Pn(n,t)}function ni(t){null!=t.m&&(It.clearTimeout(t.m),t.m=null)}function ri(t,e){var n=null;if(t.a==e){ni(t),ti(t),t.a=null;var r=2}else{if(!Ir(t.b,e))return;n=e.s,Er(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Ot()-e.u;var i=t.u;Ue(r=fn(),new yn(r,n,e,i)),Qr(t)}else $r(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(wr(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ma?0:t.Na)||(t.h=gn(Dt(t.Ca,t,e),ii(t,t.u)),t.u++,0)))}(t,e)||2==r&&Zr(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:oi(t,5);break;case 4:oi(t,10);break;case 3:oi(t,6);break;default:oi(t,2)}}function ii(t,e){var n=t.Ia+Math.floor(Math.random()*t.Sa);return t.f||(n*=2),n*e}function oi(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Dt(t.cb,t);n||(n=new Qn("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||Yn(n,"https"),er(n)),function(t,e){var n=new un;if(It.Image){var r=new Image;r.onload=Ct(kr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ct(kr,n,r,"TestLoadImage: error",!1,e),r.onabort=Ct(kr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ct(kr,n,r,"TestLoadImage: timeout",!1,e),It.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else mn(2);t.v=0,t.f&&t.f.sa(e),ai(t),zr(t)}function ai(t){t.v=0,t.I=-1,t.f&&(0==_r(t.b).length&&0==t.g.length||(t.b.c.length=0,Ft(t.g),t.g.length=0),t.f.ra())}function si(t,e,n){var r=function(t){return t instanceof Qn?Xn(t):new Qn(t,void 0)}(n);if(""!=r.c)e&&Jn(r,e+"."+r.c),$n(r,r.h);else{var i=It.location;r=function(t,e,n,r){var i=new Qn(null,void 0);return t&&Yn(i,t),e&&Jn(i,e),n&&$n(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Ht(t.V,(function(t,e){tr(r,e,t)})),e=t.A,n=t.oa,e&&n&&tr(r,e,n),tr(r,"VER",t.ia),Yr(t,r),r}function ui(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cr(t.Oa)).G=t.C,e}function ci(){}function hi(){if(Zt&&!(10<=Number(le)))throw Error("Environmental error: no available transport.")}function li(t,e){Ve.call(this),this.a=new Kr(e),this.g=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Vt(t)&&(this.a.i=t),this.o=e&&e.supportsCrossDomainXhr||!1,this.m=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vt(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new di(this)}function fi(t){An.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function pi(){Nn.call(this),this.status=1}function di(t){this.a=t}function vi(t){this.f=t}function mi(t){Ve.call(this),this.u=t,this.h=void 0,this.readyState=yi,this.status=0,this.responseType=this.responseText=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.o="",this.a=!1,this.m=this.f=this.g=null}(gt=Cr.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+t);e=e?e.toUpperCase():"GET",this.C=t,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.l?this.l.a():_n.a(),this.u=this.l?Tn(this.l):Tn(_n),this.a.onreadystatechange=Dt(this.Aa,this);try{this.B=!0,this.a.open(e,String(t),!0),this.B=!1}catch(t){return void Lr(this,t)}t=n||"";var i=new Gn(this.headers);r&&Kn(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Pr,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=It.FormData&&t instanceof It.FormData,!(0<=Pt(xr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.G&&(this.a.withCredentials=this.G);try{Ur(this),0<this.s&&((this.F=function(t){return Zt&&he(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.s,this.a.ontimeout=Dt(this.ya,this)):this.o=tn(this.ya,this.s,this)),this.m=!0,this.a.send(t),this.m=!1}catch(t){Lr(this,t)}},gt.ya=function(){void 0!==wt&&this.a&&(this.f="Timed out after "+this.s+"ms, aborting",this.h=8,Ue(this,"timeout"),this.abort(8))},gt.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ue(this,"complete"),Ue(this,"abort"),Vr(this))},gt.H=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Vr(this,!0)),Cr.X.H.call(this)},gt.Aa=function(){this.j||(this.B||this.m||this.g?Fr(this):this.Za())},gt.Za=function(){Fr(this)},gt.W=function(){try{return 2<jr(this)?this.a.status:-1}catch(t){return-1}},gt.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},gt.Qa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Dr(e)}},gt.va=function(){return this.h},gt.Ra=function(){return"string"==typeof this.f?this.f:String(this.f)},(gt=Kr.prototype).ia=8,gt.v=1,gt.Ca=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Dn(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Qt(r=zt(r),this.O):r=this.O),null===this.i&&(n.B=r),this.ea)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Jr(this,n,e),tr(i=Xn(this.B),"RID",t),tr(i,"CVER",22),this.A&&tr(i,"X-HTTP-Session-Id",this.A),Yr(this,i),this.i&&r&&qr(i,this.i,r),Tr(this.b,n),this.Ja&&tr(i,"TYPE","init"),this.ea?(tr(i,"$req",e),tr(i,"SID","null"),n.U=!0,xn(n,i,null)):xn(n,i,e),this.v=2}}else 3==this.v&&(t?Xr(this,t):0==this.g.length||br(this.b)||Xr(this))},gt.Ba=function(){if(this.j=null,ei(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=gn(Dt(this.Ya,this),t)}},gt.Ya=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.F=!0,mn(10),Hr(this),ei(this))},gt.Xa=function(){null!=this.m&&(this.m=null,Hr(this),Zr(this),mn(19))},gt.cb=function(t){t?(this.c.info("Successfully pinged google.com"),mn(2)):(this.c.info("Failed to ping google.com"),mn(1))},(gt=ci.prototype).ua=function(){},gt.ta=function(){},gt.sa=function(){},gt.ra=function(){},gt.Ka=function(){},hi.prototype.a=function(t,e){return new li(t,e)},Rt(li,Ve),li.prototype.h=function(){this.a.f=this.f,this.o&&(this.a.C=!0);var t=this.a,e=this.g,n=this.b||void 0;mn(0),t.ga=e,t.V=n||{},t.G=t.S,t.B=si(t,null,t.ga),Qr(t)},li.prototype.close=function(){Gr(this.a)},li.prototype.l=function(t){if("string"==typeof t){var e={};e.__data__=t,Wr(this.a,e)}else this.m?((e={}).__data__=qe(t),Wr(this.a,e)):Wr(this.a,t)},li.prototype.H=function(){this.a.f=null,delete this.f,Gr(this.a),delete this.a,li.X.H.call(this)},Rt(fi,An),Rt(pi,Nn),Rt(di,ci),di.prototype.ua=function(){Ue(this.a,"a")},di.prototype.ta=function(t){Ue(this.a,new fi(t))},di.prototype.sa=function(t){Ue(this.a,new pi(t))},di.prototype.ra=function(){Ue(this.a,"b")},Rt(vi,In),vi.prototype.a=function(){return new mi(this.f)},vi.prototype.c=function(t){return function(){return t}}({}),Rt(mi,Ve);var yi=0;function gi(t){t.f.read().then(t.Ta.bind(t)).catch(t.ca.bind(t))}function bi(t){t.readyState=4,t.g=null,t.f=null,t.m=null,wi(t)}function wi(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(gt=mi.prototype).open=function(t,e){if(this.readyState!=yi)throw this.abort(),Error("Error reopening a connection");this.s=t,this.o=e,this.readyState=1,wi(this)},gt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.o,e)).then(this.Wa.bind(this),this.ca.bind(this))},gt.abort=function(){this.responseText="",this.l=new Headers,this.status=0,this.f&&this.f.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,bi(this)),this.readyState=yi},gt.Wa=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,wi(this)),this.a&&(this.readyState=3,wi(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.Ua.bind(this),this.ca.bind(this)):void 0!==It.ReadableStream&&"body"in t?(this.responseText="",this.f=t.body.getReader(),this.m=new TextDecoder,gi(this)):t.text().then(this.Va.bind(this),this.ca.bind(this)))))},gt.Ta=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.responseText+=e),t.done?bi(this):wi(this),3==this.readyState&&gi(this)}},gt.Va=function(t){this.a&&(this.responseText=t,bi(this))},gt.Ua=function(){this.a&&bi(this)},gt.ca=function(){this.a&&bi(this)},gt.setRequestHeader=function(t,e){this.l.append(t,e)},gt.getResponseHeader=function(t){return this.b&&this.b.get(t.toLowerCase())||""},gt.getAllResponseHeaders=function(){if(!this.b)return"";for(var t=[],e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(mi.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),hi.prototype.createWebChannel=hi.prototype.a,li.prototype.send=li.prototype.l,li.prototype.open=li.prototype.h,li.prototype.close=li.prototype.close,bn.NO_ERROR=0,bn.TIMEOUT=8,bn.HTTP_ERROR=6,wn.COMPLETE="complete",En.EventType=Sn,Sn.OPEN="a",Sn.CLOSE="b",Sn.ERROR="c",Sn.MESSAGE="d",Ve.prototype.listen=Ve.prototype.wa,Cr.prototype.listenOnce=Cr.prototype.xa,Cr.prototype.getLastError=Cr.prototype.Ra,Cr.prototype.getLastErrorCode=Cr.prototype.va,Cr.prototype.getStatus=Cr.prototype.W,Cr.prototype.getResponseJson=Cr.prototype.Qa,Cr.prototype.getResponseText=Cr.prototype.$,Cr.prototype.send=Cr.prototype.ba;var Ii=bn,Ti=wn,Ei=hn,_i=10,Si=11,Ai=vi,Ni=En,ki=Cr,Di=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Di.o=-1;var Ci={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Oi=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return g(e,t),e}(Error),Ri=new Y("@firebase/firestore");function xi(){return Ri.logLevel}function Pi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ri.logLevel<=K.DEBUG){var r=e.map(Fi);Ri.debug.apply(Ri,_(["Firestore (8.6.8): "+t],r))}}function Li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ri.logLevel<=K.ERROR){var r=e.map(Fi);Ri.error.apply(Ri,_(["Firestore (8.6.8): "+t],r))}}function Mi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ri.logLevel<=K.WARN){var r=e.map(Fi);Ri.warn.apply(Ri,_(["Firestore (8.6.8): "+t],r))}}function Fi(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Vi(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.8) INTERNAL ASSERTION FAILED: "+t;throw Li(e),new Error(e)}function Ui(t,e){t||Vi()}function ji(t,e){return t}function qi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Bi=function(){function t(){}return t.u=function(){for(var t=62*Math.floor(256/62),e="";e.length<20;)for(var n=qi(40),r=0;r<n.length;++r)e.length<20&&n[r]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62));return e},t}();function Ki(t,e){return t<e?-1:t>e?1:0}function Gi(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Hi(t){return t+"\0"}var zi=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Oi(Ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Oi(Ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Oi(Ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Oi(Ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Ki(this.nanoseconds,t.nanoseconds):Ki(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Wi=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new zi(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Qi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xi(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Yi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ji=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Vi(),void 0===n?n=t.length-e:n>t.length-e&&Vi(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),$i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Oi(Ci.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Ji),Zi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,to=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Zi.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Oi(Ci.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Oi(Ci.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Oi(Ci.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Oi(Ci.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Ji),eo=function(){function t(t){this.fields=t,t.sort(to.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Gi(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),no=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Ki(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();no.EMPTY_BYTE_STRING=new no("");var ro=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(t){if(Ui(!!t),"string"==typeof t){var e=0,n=ro.exec(t);if(Ui(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:oo(t.seconds),nanos:oo(t.nanos)}}function oo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ao(t){return"string"==typeof t?no.fromBase64String(t):no.fromUint8Array(t)}function so(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function uo(t){var e=t.mapValue.fields.__previous_value__;return so(e)?uo(e):e}function co(t){var e=io(t.mapValue.fields.__local_write_time__.timestampValue);return new zi(e.seconds,e.nanos)}function ho(t){return null==t}function lo(t){return 0===t&&1/t==-1/0}function fo(t){return"number"==typeof t&&Number.isInteger(t)&&!lo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var po=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t($i.fromString(e))},t.fromName=function(e){return new t($i.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===$i.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return $i.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new $i(e.slice()))},t}();function vo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?so(t)?4:10:Vi()}function mo(t,e){var n=vo(t);if(n!==vo(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return co(t).isEqual(co(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=io(t.timestampValue),r=io(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ao(t.bytesValue).isEqual(ao(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return oo(t.geoPointValue.latitude)===oo(e.geoPointValue.latitude)&&oo(t.geoPointValue.longitude)===oo(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return oo(t.integerValue)===oo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=oo(t.doubleValue),r=oo(e.doubleValue);return n===r?lo(n)===lo(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Gi(t.arrayValue.values||[],e.arrayValue.values||[],mo);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Qi(n)!==Qi(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!mo(n[i],r[i])))return!1;return!0}(t,e);default:return Vi()}}function yo(t,e){return void 0!==(t.values||[]).find((function(t){return mo(t,e)}))}function go(t,e){var n=vo(t),r=vo(e);if(n!==r)return Ki(n,r);switch(n){case 0:return 0;case 1:return Ki(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=oo(t.integerValue||t.doubleValue),r=oo(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return bo(t.timestampValue,e.timestampValue);case 4:return bo(co(t),co(e));case 5:return Ki(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ao(t),r=ao(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ki(n[i],r[i]);if(0!==o)return o}return Ki(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ki(oo(t.latitude),oo(e.latitude));return 0!==n?n:Ki(oo(t.longitude),oo(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=go(n[i],r[i]);if(o)return o}return Ki(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Ki(r[a],o[a]);if(0!==s)return s;var u=go(n[r[a]],i[o[a]]);if(0!==u)return u}return Ki(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Vi()}}function bo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ki(t,e);var n=io(t),r=io(e),i=Ki(n.seconds,r.seconds);return 0!==i?i:Ki(n.nanos,r.nanos)}function wo(t){return Io(t)}function Io(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=io(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ao(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,po.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Io(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Io(t.fields[o])}return e+"}"}(t.mapValue):Vi();var e,n}function To(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Eo(t){return!!t&&"integerValue"in t}function _o(t){return!!t&&"arrayValue"in t}function So(t){return!!t&&"nullValue"in t}function Ao(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function No(t){return!!t&&"mapValue"in t}function ko(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},io(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return Xi(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ko(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ko(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Do=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!No(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ko(e)},t.prototype.setAll=function(t){var e=this,n=to.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ko(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());No(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return mo(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];No(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Xi(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(ko(this.value))},t}();function Co(t){var e=[];return Xi(t.fields,(function(t,n){var r=new to([t]);if(No(n)){var i=Co(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new eo(e)}var Oo=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Wi.min(),Do.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Do.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Do.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Do.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Do.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ro=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function xo(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Ro(t,e,n,r,i,o,a)}function Po(t){var e=ji(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+wo(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),ho(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Wo(e.startAt)),e.endAt&&(n+="|ub:",n+=Wo(e.endAt)),e.h=n}return e.h}function Lo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Xo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!mo(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Jo(t.startAt,e.startAt)&&Jo(t.endAt,e.endAt)}function Mo(t){return po.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Fo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return g(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Vo(t,n,r):"array-contains"===n?new Bo(t,r):"in"===n?new Ko(t,r):"not-in"===n?new Go(t,r):"array-contains-any"===n?new Ho(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Uo(t,n):new jo(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(go(e,this.value)):null!==e&&vo(this.value)===vo(e)&&this.m(go(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Vi()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Vo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=po.fromName(r.referenceValue),i}return g(e,t),e.prototype.matches=function(t){var e=po.comparator(t.key,this.key);return this.m(e)},e}(Fo),Uo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=qo(0,n),r}return g(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Fo),jo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=qo(0,n),r}return g(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Fo);function qo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return po.fromName(t.referenceValue)}))}var Bo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return g(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return _o(e)&&yo(e.arrayValue,this.value)},e}(Fo),Ko=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return g(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&yo(this.value.arrayValue,e)},e}(Fo),Go=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return g(e,t),e.prototype.matches=function(t){if(yo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!yo(this.value.arrayValue,e)},e}(Fo),Ho=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return g(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!_o(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return yo(e.value.arrayValue,t)}))},e}(Fo),zo=function(t,e){this.position=t,this.before=e};function Wo(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return wo(t)})).join(",")}var Qo=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Xo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Yo(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?po.comparator(po.fromName(a.referenceValue),n.key):go(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Jo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!mo(t.position[n],e.position[n]))return!1;return!0}var $o=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Zo(t,e,n,r,i,o,a,s){return new $o(t,e,n,r,i,o,a,s)}function ta(t){return new $o(t)}function ea(t){return!ho(t.limit)&&"F"===t.limitType}function na(t){return!ho(t.limit)&&"L"===t.limitType}function ra(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ia(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function oa(t){return null!==t.collectionGroup}function aa(t){var e=ji(t);if(null===e.p){e.p=[];var n=ia(e),r=ra(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Qo(n)),e.p.push(new Qo(to.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Qo(to.keyField(),u))}}}return e.p}function sa(t){var e=ji(t);if(!e.T)if("F"===e.limitType)e.T=xo(e.path,e.collectionGroup,aa(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=aa(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Qo(o.field,a))}var s=e.endAt?new zo(e.endAt.position,!e.endAt.before):null,u=e.startAt?new zo(e.startAt.position,!e.startAt.before):null;e.T=xo(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function ua(t,e,n){return new $o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ca(t,e){return Lo(sa(t),sa(e))&&t.limitType===e.limitType}function ha(t){return Po(sa(t))+"|lt:"+t.limitType}function la(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+wo(e.value);var e})).join(", ")+"]"),ho(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Wo(t.startAt)),t.endAt&&(e+=", endAt: "+Wo(t.endAt)),"Target("+e+")"}(sa(t))+"; limitType="+t.limitType+")"}function fa(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):po.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Yo(t.startAt,aa(t),e)||t.endAt&&Yo(t.endAt,aa(t),e))}(t,e)}function pa(t){return function(e,n){for(var r=!1,i=0,o=aa(t);i<o.length;i++){var a=o[i],s=da(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function da(t,e,n){var r=t.field.isKeyField()?po.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?go(r,i):Vi()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Vi()}}function va(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lo(e)?"-0":e}}function ma(t){return{integerValue:""+t}}function ya(t,e){return fo(e)?ma(e):va(t,e)}var ga=function(){this._=void 0};function ba(t,e,n){return t instanceof Ta?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ea?_a(t,e):t instanceof Sa?Aa(t,e):function(t,e){var n=Ia(t,e),r=ka(n)+ka(t.A);return Eo(n)&&Eo(t.A)?ma(r):va(t.R,r)}(t,e)}function wa(t,e,n){return t instanceof Ea?_a(t,e):t instanceof Sa?Aa(t,e):n}function Ia(t,e){return t instanceof Na?Eo(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ta=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e}(ga),Ea=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return g(e,t),e}(ga);function _a(t,e){for(var n=Da(e),r=function(t){n.some((function(e){return mo(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Sa=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return g(e,t),e}(ga);function Aa(t,e){for(var n=Da(e),r=function(t){n=n.filter((function(e){return!mo(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Na=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return g(e,t),e}(ga);function ka(t){return oo(t.integerValue||t.doubleValue)}function Da(t){return _o(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ca=function(t,e){this.field=t,this.transform=e},Oa=function(t,e){this.version=t,this.transformResults=e},Ra=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function xa(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Pa=function(){};function La(t,e,n){t instanceof ja?function(t,e,n){var r=t.value.clone(),i=Ka(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof qa?function(t,e,n){if(xa(t.precondition,e)){var r=Ka(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Ba(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Ma(t,e,n){t instanceof ja?function(t,e,n){if(xa(t.precondition,e)){var r=t.value.clone(),i=Ga(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Ua(e),r).setHasLocalMutations()}}(t,e,n):t instanceof qa?function(t,e,n){if(xa(t.precondition,e)){var r=Ga(t.fieldTransforms,n,e),i=e.data;i.setAll(Ba(t)),i.setAll(r),e.convertToFoundDocument(Ua(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){xa(t.precondition,e)&&e.convertToNoDocument(Wi.min())}(t,e)}function Fa(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Ia(o.transform,a||null);null!=s&&(null==n&&(n=Do.empty()),n.set(o.field,s))}return n||null}function Va(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Gi(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ea&&e instanceof Ea||t instanceof Sa&&e instanceof Sa?Gi(t.elements,e.elements,mo):t instanceof Na&&e instanceof Na?mo(t.A,e.A):t instanceof Ta&&e instanceof Ta}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Ua(t){return t.isFoundDocument()?t.version:Wi.min()}var ja=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return g(e,t),e}(Pa),qa=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return g(e,t),e}(Pa);function Ba(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Ka(t,e,n){var r=new Map;Ui(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,wa(a,s,n[i]))}return r}function Ga(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,ba(s,u,e))}return r}var Ha,za,Wa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return g(e,t),e}(Pa),Qa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return g(e,t),e}(Pa),Xa=function(t){this.count=t};function Ya(t){switch(t){case Ci.OK:return Vi();case Ci.CANCELLED:case Ci.UNKNOWN:case Ci.DEADLINE_EXCEEDED:case Ci.RESOURCE_EXHAUSTED:case Ci.INTERNAL:case Ci.UNAVAILABLE:case Ci.UNAUTHENTICATED:return!1;case Ci.INVALID_ARGUMENT:case Ci.NOT_FOUND:case Ci.ALREADY_EXISTS:case Ci.PERMISSION_DENIED:case Ci.FAILED_PRECONDITION:case Ci.ABORTED:case Ci.OUT_OF_RANGE:case Ci.UNIMPLEMENTED:case Ci.DATA_LOSS:return!0;default:return Vi()}}function Ja(t){if(void 0===t)return Li("GRPC error has no .code"),Ci.UNKNOWN;switch(t){case Ha.OK:return Ci.OK;case Ha.CANCELLED:return Ci.CANCELLED;case Ha.UNKNOWN:return Ci.UNKNOWN;case Ha.DEADLINE_EXCEEDED:return Ci.DEADLINE_EXCEEDED;case Ha.RESOURCE_EXHAUSTED:return Ci.RESOURCE_EXHAUSTED;case Ha.INTERNAL:return Ci.INTERNAL;case Ha.UNAVAILABLE:return Ci.UNAVAILABLE;case Ha.UNAUTHENTICATED:return Ci.UNAUTHENTICATED;case Ha.INVALID_ARGUMENT:return Ci.INVALID_ARGUMENT;case Ha.NOT_FOUND:return Ci.NOT_FOUND;case Ha.ALREADY_EXISTS:return Ci.ALREADY_EXISTS;case Ha.PERMISSION_DENIED:return Ci.PERMISSION_DENIED;case Ha.FAILED_PRECONDITION:return Ci.FAILED_PRECONDITION;case Ha.ABORTED:return Ci.ABORTED;case Ha.OUT_OF_RANGE:return Ci.OUT_OF_RANGE;case Ha.UNIMPLEMENTED:return Ci.UNIMPLEMENTED;case Ha.DATA_LOSS:return Ci.DATA_LOSS;default:return Vi()}}(za=Ha||(Ha={}))[za.OK=0]="OK",za[za.CANCELLED=1]="CANCELLED",za[za.UNKNOWN=2]="UNKNOWN",za[za.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",za[za.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",za[za.NOT_FOUND=5]="NOT_FOUND",za[za.ALREADY_EXISTS=6]="ALREADY_EXISTS",za[za.PERMISSION_DENIED=7]="PERMISSION_DENIED",za[za.UNAUTHENTICATED=16]="UNAUTHENTICATED",za[za.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",za[za.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",za[za.ABORTED=10]="ABORTED",za[za.OUT_OF_RANGE=11]="OUT_OF_RANGE",za[za.UNIMPLEMENTED=12]="UNIMPLEMENTED",za[za.INTERNAL=13]="INTERNAL",za[za.UNAVAILABLE=14]="UNAVAILABLE",za[za.DATA_LOSS=15]="DATA_LOSS";var $a=function(){function t(t,e){this.comparator=t,this.root=e||ts.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ts.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ts.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Za(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Za(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Za(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Za(this.root,t,this.comparator,!0)},t}(),Za=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),ts=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Vi();if(this.right.isRed())throw Vi();var t=this.left.check();if(t!==this.right.check())throw Vi();return t+(this.isRed()?0:1)},t}();ts.EMPTY=null,ts.RED=!0,ts.BLACK=!1,ts.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Vi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Vi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Vi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Vi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Vi()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ts(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var es=function(){function t(t){this.comparator=t,this.data=new $a(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ns(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ns(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ns=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),rs=new $a(po.comparator);function is(){return rs}var os=new $a(po.comparator);function as(){return os}var ss=new $a(po.comparator);function us(){return ss}var cs=new es(po.comparator);function hs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=cs,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ls=new es(Ki);function fs(){return ls}var ps=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ds.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Wi.min(),r,fs(),is(),hs())},t}(),ds=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(no.EMPTY_BYTE_STRING,n,hs(),hs(),hs())},t}(),vs=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},ms=function(t,e){this.targetId=t,this.V=e},ys=function(t,e,n,r){void 0===n&&(n=no.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},gs=function(){function t(){this.S=0,this.D=Is(),this.C=no.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=hs(),e=hs(),n=hs();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Vi()}})),new ds(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Is()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),bs=function(){function t(t){this.W=t,this.G=new Map,this.H=is(),this.J=ws(),this.Y=new es(Ki)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Vi()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Mo(i))if(0===n){var o=new po(i.path);this.tt(e,o,Oo.newNoDocument(o,Wi.min()))}else Ui(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Mo(o.target)){var a=new po(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,Oo.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=hs();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new ps(t,n,this.Y,this.H,r);return this.H=is(),this.J=ws(),this.Y=new es(Ki),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new gs,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new es(Ki),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Pi("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new gs),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function ws(){return new $a(po.comparator)}function Is(){return new $a(po.comparator)}var Ts={asc:"ASCENDING",desc:"DESCENDING"},Es={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_s=function(t,e){this.databaseId=t,this.I=e};function Ss(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function As(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ns(t,e){return Ss(t,e.toTimestamp())}function ks(t){return Ui(!!t),Wi.fromTimestamp(function(t){var e=io(t);return new zi(e.seconds,e.nanos)}(t))}function Ds(t,e){return function(t){return new $i(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Cs(t){var e=$i.fromString(t);return Ui(tu(e)),e}function Os(t,e){return Ds(t.databaseId,e.path)}function Rs(t,e){var n=Cs(e);if(n.get(1)!==t.databaseId.projectId)throw new Oi(Ci.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Oi(Ci.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new po(Ms(n))}function xs(t,e){return Ds(t.databaseId,e)}function Ps(t){var e=Cs(t);return 4===e.length?$i.emptyPath():Ms(e)}function Ls(t){return new $i(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ms(t){return Ui(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Fs(t,e,n){return{name:Os(t,e),fields:n.value.mapValue.fields}}function Vs(t,e,n){var r=Rs(t,e.name),i=ks(e.updateTime),o=new Do({mapValue:{fields:e.fields}}),a=Oo.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Us(t,e){var n;if(e instanceof ja)n={update:Fs(t,e.key,e.value)};else if(e instanceof Wa)n={delete:Os(t,e.key)};else if(e instanceof qa)n={update:Fs(t,e.key,e.data),updateMask:Zs(e.fieldMask)};else{if(!(e instanceof Qa))return Vi();n={verify:Os(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ta)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ea)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Sa)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Na)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Vi()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ns(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Vi()}(t,e.precondition)),n}function js(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ra.updateTime(ks(t.updateTime)):void 0!==t.exists?Ra.exists(t.exists):Ra.none()}(e.currentDocument):Ra.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Ui("REQUEST_TIME"===e.setToServerValue),n=new Ta;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Ea(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Sa(i)}else"increment"in e?n=new Na(t,e.increment):Vi();var o=to.fromServerFormat(e.fieldPath);return new Ca(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Rs(t,e.update.name),o=new Do({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new eo(e.map((function(t){return to.fromServerFormat(t)})))}(e.updateMask);return new qa(i,o,a,n,r)}return new ja(i,o,n,r)}if(e.delete){var s=Rs(t,e.delete);return new Wa(s,n)}if(e.verify){var u=Rs(t,e.verify);return new Qa(u,n)}return Vi()}function qs(t,e){return{documents:[xs(t,e.path)]}}function Bs(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=xs(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=xs(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ao(t.value))return{unaryFilter:{field:Xs(t.field),op:"IS_NAN"}};if(So(t.value))return{unaryFilter:{field:Xs(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ao(t.value))return{unaryFilter:{field:Xs(t.field),op:"IS_NOT_NAN"}};if(So(t.value))return{unaryFilter:{field:Xs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xs(t.field),op:Qs(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Xs(t.field),direction:Ws(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||ho(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Hs(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Hs(e.endAt)),n}function Ks(t){var e=Ps(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ui(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Gs(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Qo(Ys(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ho(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=zs(n.startAt));var h=null;return n.endAt&&(h=zs(n.endAt)),Zo(e,i,s,a,u,"F",c,h)}function Gs(t){return t?void 0!==t.unaryFilter?[$s(t)]:void 0!==t.fieldFilter?[Js(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Gs(t)})).reduce((function(t,e){return t.concat(e)})):Vi():[]}function Hs(t){return{before:t.before,values:t.position}}function zs(t){var e=!!t.before,n=t.values||[];return new zo(n,e)}function Ws(t){return Ts[t]}function Qs(t){return Es[t]}function Xs(t){return{fieldPath:t.canonicalString()}}function Ys(t){return to.fromServerFormat(t.fieldPath)}function Js(t){return Fo.create(Ys(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Vi()}}(t.fieldFilter.op),t.fieldFilter.value)}function $s(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ys(t.unaryFilter.field);return Fo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Ys(t.unaryFilter.field);return Fo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ys(t.unaryFilter.field);return Fo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ys(t.unaryFilter.field);return Fo.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Vi()}}function Zs(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function tu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function eu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ru(e)),e=nu(t.get(n),e);return ru(e)}function nu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function ru(t){return t+""}function iu(t){var e=t.length;if(Ui(e>=2),2===e)return Ui(""===t.charAt(0)&&""===t.charAt(1)),$i.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&Vi(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:Vi()}o=a+2}return new $i(r)}var ou=function(t,e){this.seconds=t,this.nanoseconds=e},au=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};au.store="owner",au.key="owner";var su=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};su.store="mutationQueues",su.keyPath="userId";var uu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};uu.store="mutations",uu.keyPath="batchId",uu.userMutationsIndex="userMutationsIndex",uu.userMutationsKeyPath=["userId","batchId"];var cu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,eu(e)]},t.key=function(t,e,n){return[t,eu(e),n]},t}();cu.store="documentMutations",cu.PLACEHOLDER=new cu;var hu=function(t,e){this.path=t,this.readTime=e},lu=function(t,e){this.path=t,this.version=e},fu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};fu.store="remoteDocuments",fu.readTimeIndex="readTimeIndex",fu.readTimeIndexPath="readTime",fu.collectionReadTimeIndex="collectionReadTimeIndex",fu.collectionReadTimeIndexPath=["parentPath","readTime"];var pu=function(t){this.byteSize=t};pu.store="remoteDocumentGlobal",pu.key="remoteDocumentGlobalKey";var du=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};du.store="targets",du.keyPath="targetId",du.queryTargetsIndexName="queryTargetsIndex",du.queryTargetsKeyPath=["canonicalId","targetId"];var vu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};vu.store="targetDocuments",vu.keyPath=["targetId","path"],vu.documentTargetsIndex="documentTargetsIndex",vu.documentTargetsKeyPath=["path","targetId"];var mu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};mu.key="targetGlobalKey",mu.store="targetGlobal";var yu=function(t,e){this.collectionId=t,this.parent=e};yu.store="collectionParents",yu.keyPath=["collectionId","parent"];var gu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};gu.store="clientMetadata",gu.keyPath="clientId";var bu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};bu.store="bundles",bu.keyPath="bundleId";var wu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};wu.store="namedQueries",wu.keyPath="name";var Iu=_(_([],_(_([],_(_([],_(_([],[su.store,uu.store,cu.store,fu.store,du.store,au.store,mu.store,vu.store]),[gu.store])),[pu.store])),[yu.store])),[bu.store,wu.store]),Tu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Eu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),_u=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Su=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Vi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Au=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new _u,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Du(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Pu(e.target.error);n.ft.reject(new Du(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Du(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Pi("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ou(e)},t}(),Nu=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(k())&&Li("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Pi("SimpleDb","Removing database:",t),Ru(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=k(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return w(this,void 0,void 0,(function(){var e,n=this;return I(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Pi("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Du(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Oi(Ci.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Du(t,n))},i.onupgradeneeded=function(t){Pi("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Pi("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return w(this,void 0,void 0,(function(){var i,o,a,s,u;return I(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,h;return I(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=l.sent(),e=Au.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),Su.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(l.sent(),a),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,Pi("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),s.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ku=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Ru(this.Pt.delete())},t}(),Du=function(t){function e(e,n){var r=this;return(r=t.call(this,Ci.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return g(e,t),e}(Oi);function Cu(t){return"IndexedDbTransactionError"===t.name}var Ou=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Pi("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Pi("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ru(n)},t.prototype.add=function(t){return Pi("SimpleDb","ADD",this.store.name,t,t),Ru(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ru(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Pi("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Pi("SimpleDb","DELETE",this.store.name,t),Ru(this.store.delete(t))},t.prototype.count=function(){return Pi("SimpleDb","COUNT",this.store.name),Ru(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){Pi("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Su((function(n,r){e.onerror=function(t){var e=Pu(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Su((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ku(i),a=e(i.primaryKey,i.value,o);if(a instanceof Su){var s=a.catch((function(t){return o.done(),Su.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Su.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ru(t){return new Su((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Pu(t.target.error);n(e)}}))}var xu=!1;function Pu(t){var e=Nu._t(k());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Oi("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return xu||(xu=!0,setTimeout((function(){throw r}),0)),r}}return t}var Lu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return g(e,t),e}(Eu);function Mu(t,e){var n=ji(t);return Nu.It(n.Mt,e)}var Fu=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&La(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Ma(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Ma(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Wi.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),hs())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Gi(this.mutations,t.mutations,(function(t,e){return Va(t,e)}))&&Gi(this.baseMutations,t.baseMutations,(function(t,e){return Va(t,e)}))},t}(),Vu=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Ui(e.mutations.length===r.length);for(var i=us(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Uu=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Wi.min()),void 0===o&&(o=Wi.min()),void 0===a&&(a=no.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),ju=function(t){this.Lt=t};function qu(t,e){if(e.document)return Vs(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=po.fromSegments(e.noDocument.path),r=zu(e.noDocument.readTime),i=Oo.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=po.fromSegments(e.unknownDocument.path);return r=zu(e.unknownDocument.version),Oo.newUnknownDocument(o,r)}return Vi()}function Bu(t,e,n){var r=Ku(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Os(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Ss(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new fu(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=Hu(e.version);return a=e.hasCommittedMutations,new fu(null,new hu(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Hu(e.version);return new fu(new lu(c,h),null,null,!0,r,i)}return Vi()}function Ku(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Gu(t){var e=new zi(t[0],t[1]);return Wi.fromTimestamp(e)}function Hu(t){var e=t.toTimestamp();return new ou(e.seconds,e.nanoseconds)}function zu(t){var e=new zi(t.seconds,t.nanoseconds);return Wi.fromTimestamp(e)}function Wu(t,e){for(var n=(e.baseMutations||[]).map((function(e){return js(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return js(t.Lt,e)})),s=zi.fromMillis(e.localWriteTimeMs);return new Fu(e.batchId,s,n,a)}function Qu(t){var e,n,r=zu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?zu(t.lastLimboFreeSnapshotVersion):Wi.min();return void 0!==t.query.documents?(Ui(1===(n=t.query).documents.length),e=sa(ta(Ps(n.documents[0])))):e=function(t){return sa(Ks(t))}(t.query),new Uu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,no.fromBase64String(t.resumeToken))}function Xu(t,e){var n,r=Hu(e.snapshotVersion),i=Hu(e.lastLimboFreeSnapshotVersion);n=Mo(e.target)?qs(t.Lt,e.target):Bs(t.Lt,e.target);var o=e.resumeToken.toBase64();return new du(e.targetId,Po(e.target),r,o,e.sequenceNumber,i,n)}function Yu(t){var e=Ks({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ua(e,e.limit,"L"):e}var Ju=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return $u(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:zu(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return $u(t).put({bundleId:(n=e).id,createTime:Hu(ks(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Zu(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Yu(e.bundledQuery),readTime:zu(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Zu(t).put(function(t){return{name:t.name,readTime:Hu(ks(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function $u(t){return Mu(t,bu.store)}function Zu(t){return Mu(t,wu.store)}var tc=function(){function t(){this.Bt=new ec}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Su.resolve()},t.prototype.getCollectionParents=function(t,e){return Su.resolve(this.Bt.getEntries(e))},t}(),ec=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new es($i.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new es($i.comparator)).toArray()},t}(),nc=function(){function t(){this.qt=new ec}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:eu(i)};return rc(t).put(o)}return Su.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Hi(e),""],!1,!0);return rc(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(iu(o.parent))}return n}))},t}();function rc(t){return Mu(t,yu.store)}var ic={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function ac(t,e,n){var r=t.store(uu.store),i=t.store(cu.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){Ui(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=cu.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Su.waitFor(o).next((function(){return c}))}function sc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Vi();e=t.noDocument}return JSON.stringify(e).length}oc.DEFAULT_COLLECTION_PERCENTILE=10,oc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oc.DEFAULT=new oc(41943040,oc.DEFAULT_COLLECTION_PERCENTILE,oc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oc.DISABLED=new oc(-1,0,0);var uc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Ui(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hc(t).$t({index:uu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=lc(t),a=hc(t);return a.add({}).next((function(s){Ui("number"==typeof s);for(var u=new Fu(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Us(t.Lt,e)})),i=n.mutations.map((function(e){return Us(t.Lt,e)}));return new uu(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new es((function(t,e){return Ki(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=cu.key(i.userId,d.key.path,s);l=l.add(d.key.path.popLast()),h.push(a.put(c)),h.push(o.put(v,cu.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),Su.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return hc(t).get(e).next((function(t){return t?(Ui(t.userId===n.userId),Wu(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Su.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return hc(t).$t({index:uu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Ui(e.batchId>=r),o=Wu(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return hc(t).$t({index:uu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hc(t).Nt(uu.userMutationsIndex,n).next((function(t){return t.map((function(t){return Wu(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=cu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return lc(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=iu(u);if(s===n.userId&&e.path.isEqual(h))return hc(t).get(c).next((function(t){if(!t)throw Vi();Ui(t.userId===n.userId),o.push(Wu(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new es(Ki),i=[];return e.forEach((function(e){var o=cu.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=lc(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=iu(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Su.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=cu.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new es(Ki);return lc(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=iu(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(hc(t).get(e).next((function(t){if(null===t)throw Vi();Ui(t.userId===n.userId),r.push(Wu(n.R,t))})))})),Su.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return ac(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Su.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Su.resolve();var r=IDBKeyRange.lowerBound(cu.prefixForUser(e.userId)),i=[];return lc(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=iu(t[1]);i.push(o)}else r.done()})).next((function(){Ui(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return cc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return fc(t).get(this.userId).next((function(t){return t||new su(e.userId,-1,"")}))},t}();function cc(t,e,n){var r=cu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return lc(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function hc(t){return Mu(t,uu.store)}function lc(t){return Mu(t,cu.store)}function fc(t){return Mu(t,su.store)}var pc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),dc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new pc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Wi.fromTimestamp(new zi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return vc(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Ui(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return vc(t).$t((function(a,s){var u=Qu(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Su.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return vc(t).$t((function(t,n){var r=Qu(n);e(r)}))},t.prototype.Xt=function(t){return mc(t).get(mu.key).next((function(t){return Ui(null!==t),t}))},t.prototype.Zt=function(t,e){return mc(t).put(mu.key,e)},t.prototype.te=function(t,e){return vc(t).put(Xu(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Po(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return vc(t).$t({range:r,index:du.queryTargetsIndexName},(function(t,n,r){var o=Qu(n);Lo(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=yc(t);return e.forEach((function(e){var a=eu(e.path);i.push(o.put(new vu(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),Su.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=yc(t);return Su.forEach(e,(function(e){var o=eu(e.path);return Su.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=yc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=yc(t),i=hs();return r.$t({range:n,kt:!0},(function(t,e,n){var r=iu(t[1]),o=new po(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=eu(e.path),r=IDBKeyRange.bound([n],[Hi(n)],!1,!0),i=0;return yc(t).$t({index:vu.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return vc(t).get(e).next((function(t){return t?Qu(t):null}))},t}();function vc(t){return Mu(t,du.store)}function mc(t){return Mu(t,mu.store)}function yc(t){return Mu(t,vu.store)}function gc(t){return w(this,void 0,void 0,(function(){return I(this,(function(e){if(t.code!==Ci.FAILED_PRECONDITION||t.message!==Tu)throw t;return Pi("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function bc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Ki(n,i);return 0===a?Ki(r,o):a}var wc=function(){function t(t){this.ne=t,this.buffer=new es(bc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();bc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Ic=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Pi("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return w(e,void 0,void 0,(function(){var e;return I(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Cu(e=n.sent())?(Pi("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,gc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Tc=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Su.resolve(Di.o);var r=new wc(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Pi("LruGarbageCollector","Garbage collection skipped; disabled"),Su.resolve(ic)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Pi("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),ic):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Pi("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),xi()<=K.DEBUG&&Pi("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),Su.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Ec=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Tc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return _c(t,n)},t.prototype.removeReference=function(t,e,n){return _c(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return _c(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return fc(t).Ot((function(r){return cc(t,r,e).next((function(t){return t&&(n=!0),Su.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),yc(t).delete([0,eu(a.path)])}))}));i.push(u)}})).next((function(){return Su.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return _c(t,e)},t.prototype.we=function(t,e){var n,r=yc(t),i=Di.o;return r.$t({index:vu.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==Di.o&&e(new po(iu(n)),i),i=s,n=a):i=Di.o})).next((function(){i!==Di.o&&e(new po(iu(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function _c(t,e){return yc(t).put(function(t,e){return new vu(0,eu(t.path),e)}(e,t.currentSequenceNumber))}var Sc=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Xi(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return Yi(this.inner)},t}(),Ac=function(){function t(){this.changes=new Sc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Wi.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Oo.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Su.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Nc=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Cc(t).put(Oc(e),n)},t.prototype.removeEntry=function(t,e){var n=Cc(t),r=Oc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Cc(t).get(Oc(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Cc(t).get(Oc(e)).next((function(t){return{document:n.ye(e,t),size:sc(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=is();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=is(),i=new $a(po.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,sc(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Su.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Cc(t).$t({range:r},(function(t,e,r){for(var a=po.fromSegments(t);o&&po.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=is(),o=e.path.length+1,a={};if(n.isEqual(Wi.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Ku(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=fu.collectionReadTimeIndex}return Cc(t).$t(a,(function(t,n,a){if(t.length===o){var s=qu(r.R,n);e.path.isPrefixOf(s.key.path)?fa(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new kc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Dc(t).get(pu.key).next((function(t){return Ui(!!t),t}))},t.prototype.me=function(t,e){return Dc(t).put(pu.key,e)},t.prototype.ye=function(t,e){if(e){var n=qu(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Wi.min()))return n}return Oo.newInvalidDocument(t)},t}(),kc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Sc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return g(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new es((function(t,e){return Ki(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=Bu(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=sc(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var h=Bu(e.Ie.R,Oo.newNoDocument(o,Wi.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Su.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Ac);function Dc(t){return Mu(t,pu.store)}function Cc(t){return Mu(t,fu.store)}function Oc(t){return t.path.toArray()}var Rc=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Ui(n<r&&n>=0&&r<=11);var o=new Au("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(au.store)}(t),function(t){t.createObjectStore(su.store,{keyPath:su.keyPath}),t.createObjectStore(uu.store,{keyPath:uu.keyPath,autoIncrement:!0}).createIndex(uu.userMutationsIndex,uu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(cu.store)}(t),xc(t),function(t){t.createObjectStore(fu.store)}(t));var a=Su.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(vu.store),t.deleteObjectStore(du.store),t.deleteObjectStore(mu.store)}(t),xc(t)),a=a.next((function(){return function(t){var e=t.store(mu.store),n=new mu(0,0,Wi.min().toTimestamp(),0);return e.put(mu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(uu.store).Nt().next((function(n){t.deleteObjectStore(uu.store),t.createObjectStore(uu.store,{keyPath:uu.keyPath,autoIncrement:!0}).createIndex(uu.userMutationsIndex,uu.userMutationsKeyPath,{unique:!0});var r=e.store(uu.store),i=n.map((function(t){return r.put(t)}));return Su.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(gu.store,{keyPath:gu.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(pu.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(fu.store);e.createIndex(fu.readTimeIndex,fu.readTimeIndexPath,{unique:!1}),e.createIndex(fu.collectionReadTimeIndex,fu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(bu.store,{keyPath:bu.keyPath})}(t),function(t){t.createObjectStore(wu.store,{keyPath:wu.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(fu.store).$t((function(t,n){e+=sc(n)})).next((function(){var n=new pu(e);return t.store(pu.store).put(pu.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(su.store),r=t.store(uu.store);return n.Nt().next((function(n){return Su.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(uu.userMutationsIndex,i).next((function(r){return Su.forEach(r,(function(r){Ui(r.userId===n.userId);var i=Wu(e.R,r);return ac(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(vu.store),n=t.store(fu.store);return t.store(mu.store).get(mu.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new $i(n),a=function(t){return[0,eu(t)]}(o);r.push(e.get(a).next((function(n){return n?Su.resolve():function(n){return e.put(new vu(0,eu(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Su.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(yu.store,{keyPath:yu.keyPath});var n=e.store(yu.store),r=new ec,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:eu(i)})}};return e.store(fu.store).$t({kt:!0},(function(t,e){var n=new $i(t);return i(n.popLast())})).next((function(){return e.store(cu.store).$t({kt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],iu(n));return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(du.store);return n.$t((function(t,r){var i=Qu(r),o=Xu(e.R,i);return n.put(o)}))},t}();function xc(t){t.createObjectStore(vu.store,{keyPath:vu.keyPath}).createIndex(vu.documentTargetsIndex,vu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(du.store,{keyPath:du.keyPath}).createIndex(du.queryTargetsIndexName,du.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(mu.store)}var Pc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Lc=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Oi(Ci.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ec(this,i),this.Le=n+"main",this.R=new ju(u),this.Be=new Nu(this.Le,11,new Rc(this.R)),this.qe=new dc(this.referenceDelegate,this.R),this.Ut=new nc,this.Ue=function(t,e){return new Nc(t,e)}(this.R,this.Ut),this.Qe=new Ju,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===h&&Li("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Oi(Ci.FAILED_PRECONDITION,Pc);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Di(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return w(e,void 0,void 0,(function(){return I(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return w(e,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return w(e,void 0,void 0,(function(){return I(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Fc(e).put(new gu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Cu(e))return Pi("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Pi("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Mc(t).get(au.key).next((function(t){return Su.resolve(e.tn(t))}))},t.prototype.en=function(t){return Fc(t).delete(this.clientId)},t.prototype.nn=function(){return w(this,void 0,void 0,(function(){var t,e,n,r,i=this;return I(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Mu(t,gu.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Su.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)r=n[e],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Su.resolve(!0):Mc(t).get(au.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Oi(Ci.FAILED_PRECONDITION,Pc);return!1}}return!(!e.networkEnabled||!e.inForeground)||Fc(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Pi("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return w(this,void 0,void 0,(function(){var t=this;return I(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[au.store,gu.store],(function(e){var n=new Lu(e,Di.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Fc(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return uc.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Pi("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Iu,(function(o){return i=new Lu(o,r.Ne?r.Ne.next():Di.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Li("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Oi(Ci.FAILED_PRECONDITION,Tu);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Mc(t).get(au.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Oi(Ci.FAILED_PRECONDITION,Pc)}))},t.prototype.Ze=function(t){var e=new au(this.clientId,this.allowTabSynchronization,Date.now());return Mc(t).put(au.key,e)},t.yt=function(){return Nu.yt()},t.prototype.Xe=function(t){var e=this,n=Mc(t);return n.get(au.key).next((function(t){return e.tn(t)?(Pi("IndexedDbPersistence","Releasing primary lease."),n.delete(au.key)):Su.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Li("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Pi("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Li("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Li("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Mc(t){return Mu(t,au.store)}function Fc(t){return Mu(t,gu.store)}function Vc(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Uc=function(t,e){this.progress=t,this.wn=e},jc=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return po.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):oa(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new po(e)).next((function(t){var e=as();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=as();return this.Ut.getCollectionParents(t,i).next((function(a){return Su.forEach(a,(function(a){var s=function(t,e){return new $o(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c);null==h&&(h=Oo.newInvalidDocument(c),r=r.insert(c,h)),Ma(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){fa(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=hs(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof qa&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),qc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=hs(),i=hs(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Bc=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Wi.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(ea(e)||na(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(xi()<=K.DEBUG&&Pi("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),la(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new es(pa(t));return e.forEach((function(e,r){fa(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return xi()<=K.DEBUG&&Pi("QueryEngine","Using full collection scan to execute query:",la(e)),this.Sn.getDocumentsMatchingQuery(t,e,Wi.min())},t}(),Kc=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new $a(Ki),this.kn=new Sc((function(t){return Po(t)}),Lo),this.$n=Wi.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new jc(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function Gc(t,e,n,r){return new Kc(t,e,n,r)}function Hc(t,e){return w(this,void 0,void 0,(function(){var n,r,i,o;return I(this,(function(a){switch(a.label){case 0:return n=ji(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new jc(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=hs(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var m=0,y=v.mutations;m<y.length;m++){var g=y[m];a=a.add(g.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function zc(t,e){var n=ji(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=Su.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Ui(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Wc(t){var e=ji(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Qc(t,e){var n=ji(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Ui(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=is();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Xc(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(Wi.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return Su.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function Xc(t,e,n,r,i){var o=hs();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=is();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Wi.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Pi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Yc(t,e){var n=ji(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Jc(t,e){var n=ji(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Su.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Uu(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function $c(t,e,n){return w(this,void 0,void 0,(function(){var r,i,o,a;return I(this,(function(s){switch(s.label){case 0:r=ji(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!Cu(a=s.sent()))throw a;return Pi("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Zc(t,e,n){var r=ji(t),i=Wi.min(),o=hs();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=ji(t),i=r.kn.get(n);return void 0!==i?Su.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,sa(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Wi.min(),n?o:hs())})).next((function(t){return{documents:t,Bn:o}}))}))}function th(t,e){var n=ji(t),r=ji(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function eh(t){var e=ji(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=ji(t),i=is(),o=Ku(n),a=Cc(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:fu.readTimeIndex,range:s},(function(t,e){var n=qu(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Gu(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function nh(t){return w(this,void 0,void 0,(function(){var e;return I(this,(function(n){return[2,(e=ji(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Cc(t),n=Wi.min();return e.$t({index:fu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Gu(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function rh(t,e,n,r){return w(this,void 0,void 0,(function(){var i,o,a,s,u,c,h,l,f,p;return I(this,(function(d){switch(d.label){case 0:for(i=ji(t),o=hs(),a=is(),s=us(),u=0,c=n;u<c.length;u++)h=c[u],l=e.qn(h.metadata.name),h.document&&(o=o.add(l)),a=a.insert(l,e.Un(h)),s=s.insert(l,e.Qn(h.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,Jc(i,function(t){return sa(ta($i.fromString("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Xc(t,f,a,Wi.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.qe.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function ih(t,e,n){return void 0===n&&(n=hs()),w(this,void 0,void 0,(function(){var r,i;return I(this,(function(o){switch(o.label){case 0:return[4,Jc(t,sa(Yu(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ji(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=ks(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var a=r.withResumeToken(no.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(t,e)}))}))]}}))}))}var oh=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Su.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:ks(n.createTime)}),Su.resolve()},t.prototype.getNamedQuery=function(t,e){return Su.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Yu(t.bundledQuery),readTime:ks(t.readTime)}}(e)),Su.resolve()},t}(),ah=function(){function t(){this.Wn=new es(sh.Gn),this.zn=new es(sh.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new sh(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new sh(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new po(new $i([])),r=new sh(n,t),i=new sh(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new po(new $i([])),n=new sh(e,t),r=new sh(e,t+1),i=hs();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new sh(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),sh=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return po.comparator(t.key,e.key)||Ki(t.ns,e.ns)},t.Hn=function(t,e){return Ki(t.ns,e.ns)||po.comparator(t.key,e.key)},t}(),uh=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new es(sh.Gn)}return t.prototype.checkEmpty=function(t){return Su.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Fu(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new sh(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Su.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Su.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Su.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Su.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Su.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new sh(e,0),i=new sh(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Su.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new es(Ki);return e.forEach((function(t){var e=new sh(t,0),i=new sh(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Su.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;po.isDocumentKey(i)||(i=i.child(""));var o=new sh(new po(i),0),a=new es(Ki);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),Su.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Ui(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Su.forEach(e.mutations,(function(i){var o=new sh(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new sh(e,0),r=this.rs.firstAfterOrEqual(n);return Su.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Su.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),ch=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new $a(po.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Su.resolve(n?n.document.clone():Oo.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=is();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Oo.newInvalidDocument(t))})),Su.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=is(),i=new po(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(s.path))break;h.compareTo(n)<=0||fa(e,c)&&(r=r.insert(c.key,c.clone()))}return Su.resolve(r)},t.prototype.fs=function(t,e){return Su.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new hh(this)},t.prototype.getSize=function(t){return Su.resolve(this.size)},t}(),hh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return g(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Su.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Ac),lh=function(){function t(t){this.persistence=t,this.ds=new Sc((function(t){return Po(t)}),Lo),this.lastRemoteSnapshotVersion=Wi.min(),this.highestTargetId=0,this.ws=0,this._s=new ah,this.targetCount=0,this.ys=pc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Su.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Su.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Su.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Su.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Su.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new pc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Su.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Su.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Su.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),Su.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Su.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Su.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Su.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Su.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Su.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Su.resolve(n)},t.prototype.containsKey=function(t,e){return Su.resolve(this._s.containsKey(e))},t}(),fh=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Di(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new lh(this),this.Ut=new tc,this.Ue=function(t,e){return new ch(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new ju(e),this.Qe=new oh(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new uh(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Pi("MemoryPersistence","Starting transaction:",t);var i=new ph(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Su.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),ph=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return g(e,t),e}(Eu),dh=function(){function t(t){this.persistence=t,this.As=new ah,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Vi()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Su.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Su.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Su.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Su.forEach(this.vs,(function(r){var i=po.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Su.or([function(){return Su.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),vh=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function mh(t,e){return"firestore_clients_"+t+"_"+e}function yh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function gh(t,e){return"firestore_targets_"+t+"_"+e}vh.UNAUTHENTICATED=new vh(null),vh.GOOGLE_CREDENTIALS=new vh("google-credentials-uid"),vh.FIRST_PARTY=new vh("first-party-uid");var bh=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Oi(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Li("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),wh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Oi(i.error.code,i.error.message)),o?new t(e,i.state,r):(Li("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ih=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=fs(),a=0;i&&a<r.activeTargetIds.length;++a)i=fo(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Li("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Th=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Li("SharedClientState","Failed to parse online state: "+e),null)},t}(),Eh=function(){function t(){this.activeTargetIds=fs()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),_h=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new $a(Ki),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=mh(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Eh),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return w(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,h,l=this;return I(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(mh(this.persistenceKey,r)))&&(o=Ih.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.$s;u<c.length;u++)h=c[u],this.Fs(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(gh(this.persistenceKey,t));if(n){var r=wh.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(gh(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Pi("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Pi("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Pi("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Pi("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Li("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return w(e,void 0,void 0,(function(){var t,e,r,i,o,a;return I(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=Di.o;if(null!=t)try{var n=JSON.parse(t);Ui("number"==typeof n),e=n}catch(t){Li("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Di.o&&this.sequenceNumberHandler(a);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new bh(this.currentUser,t,e,n),i=yh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=yh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=gh(this.persistenceKey,t),i=new wh(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Ih.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return bh.Vs(new vh(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return wh.Vs(r,e)},t.prototype.js=function(t){return Th.Vs(t)},t.prototype.ii=function(t){return w(this,void 0,void 0,(function(){return I(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Pi("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=fs();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Sh=function(){function t(){this.li=new Eh,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Eh,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Ah=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Nh=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Pi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Pi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),kh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Dh=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Ch=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return g(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new ki;a.listenOnce(Ti.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Ii.NO_ERROR:var e=a.getResponseJson();Pi("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Ii.TIMEOUT:Pi("Connection",'RPC "'+t+'" timed out'),o(new Oi(Ci.DEADLINE_EXCEEDED,"Request time out"));break;case Ii.HTTP_ERROR:var n=a.getStatus();if(Pi("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ci).indexOf(e)>=0?e:Ci.UNKNOWN}(r.status);o(new Oi(s,r.message))}else o(new Oi(Ci.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Oi(Ci.UNAVAILABLE,"Connection failed."));break;default:Vi()}}finally{Pi("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new hi,o=fn(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Ai({})),this.Fi(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k())||"object"==typeof navigator&&"ReactNative"===navigator.product||k().indexOf("Electron/")>=0||function(){var t=k();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||k().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Pi("Connection","Creating WebChannel: "+s,a);var u=i.createWebChannel(s,a),c=!1,h=!1,l=new Dh({Ei:function(t){h?Pi("Connection","Not sending because WebChannel is closed:",t):(c||(Pi("Connection","Opening WebChannel transport."),u.open(),c=!0),Pi("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,Ni.EventType.OPEN,(function(){h||Pi("Connection","WebChannel transport opened.")})),f(u,Ni.EventType.CLOSE,(function(){h||(h=!0,Pi("Connection","WebChannel transport closed"),l.Vi())})),f(u,Ni.EventType.ERROR,(function(t){h||(h=!0,Mi("Connection","WebChannel transport errored:",t),l.Vi(new Oi(Ci.UNAVAILABLE,"The operation could not be completed")))})),f(u,Ni.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];Ui(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Pi("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Ha[t];if(void 0!==e)return Ja(e)}(o),s=i.message;void 0===a&&(a=Ci.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),h=!0,l.Vi(new Oi(a,s)),u.close()}else Pi("Connection","WebChannel received:",n),l.Si(n)}})),f(o,Ei.STAT_EVENT,(function(t){t.stat===_i?Pi("Connection","Detected buffering proxy"):t.stat===Si&&Pi("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Pi("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return Pi("RestConnection","Received: ",t),t}),(function(e){throw Mi("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.8",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=kh[t];return this.Di+"/v1/"+e+":"+n},t}());function Oh(){return"undefined"!=typeof window?window:null}function Rh(){return"undefined"!=typeof document?document:null}function xh(t){return new _s(t,!0)}var Ph=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Pi("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Lh=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Ph(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return w(this,void 0,void 0,(function(){return I(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return w(this,void 0,void 0,(function(){return I(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return w(this,void 0,void 0,(function(){return I(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Ci.RESOURCE_EXHAUSTED?(Li(e.toString()),Li("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Ci.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Oi(Ci.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return w(t,void 0,void 0,(function(){return I(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Pi("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Pi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Mh=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return g(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Vi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Ui(void 0===e||"string"==typeof e),no.fromBase64String(e||"")):(Ui(void 0===e||e instanceof Uint8Array),no.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ci.UNKNOWN:Ja(t.code);return new Oi(e,t.message||"")}(s);n=new ys(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Rs(t,r.document.name),o=ks(r.document.updateTime);var s=new Do({mapValue:{fields:r.document.fields}}),u=(a=Oo.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new vs(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Rs(t,r.document),o=r.readTime?ks(r.readTime):Wi.min(),s=Oo.newNoDocument(i,o),a=r.removedTargetIds||[],n=new vs([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Rs(t,r.document),o=r.removedTargetIds||[],n=new vs([],o,i,null);else{if(!("filter"in e))return Vi();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Xa(r),o=h.targetId,n=new ms(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Wi.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Wi.min():e.readTime?ks(e.readTime):Wi.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Ls(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Mo(r)?{documents:qs(t,r)}:{query:Bs(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=As(t,e.resumeToken):e.snapshotVersion.compareTo(Wi.min())>0&&(n.readTime=Ss(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Vi()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Ls(this.R),e.removeTarget=t,this.cr(e)},e}(Lh),Fh=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return g(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Ui(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Ui(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?ks(t.updateTime):ks(e);return n.isEqual(Wi.min())&&(n=ks(e)),new Oa(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=ks(t.commitTime);return this.listener.Tr(n,e)}return Ui(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Ls(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Us(e.R,t)}))};this.cr(n)},e}(Lh),Vh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return g(e,t),e.prototype.br=function(){if(this.Rr)throw new Oi(Ci.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Ci.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Oi(Ci.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Ci.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Oi(Ci.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Uh=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Li(e),this.Vr=!1):Pi("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),jh=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return w(o,void 0,void 0,(function(){return I(this,(function(t){switch(t.label){case 0:return Xh(this)?(Pi("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return w(this,void 0,void 0,(function(){var e;return I(this,(function(n){switch(n.label){case 0:return(e=ji(t)).Or.add(4),[4,Bh(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,qh(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Uh(n,r)};function qh(t){return w(this,void 0,void 0,(function(){var e,n;return I(this,(function(r){switch(r.label){case 0:if(!Xh(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Bh(t){return w(this,void 0,void 0,(function(){var e,n;return I(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Kh(t,e){var n=ji(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Qh(n)?Wh(n):hl(n).er()&&Hh(n,e))}function Gh(t,e){var n=ji(t),r=hl(n);n.$r.delete(e),r.er()&&zh(n,e),0===n.$r.size&&(r.er()?r.ir():Xh(n)&&n.Br.set("Unknown"))}function Hh(t,e){t.qr.U(e.targetId),hl(t).mr(e)}function zh(t,e){t.qr.U(e),hl(t).yr(e)}function Wh(t){t.qr=new bs({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),hl(t).start(),t.Br.Sr()}function Qh(t){return Xh(t)&&!hl(t).tr()&&t.$r.size>0}function Xh(t){return 0===ji(t).Or.size}function Yh(t){t.qr=void 0}function Jh(t){return w(this,void 0,void 0,(function(){return I(this,(function(e){return t.$r.forEach((function(e,n){Hh(t,e)})),[2]}))}))}function $h(t,e){return w(this,void 0,void 0,(function(){return I(this,(function(n){return Yh(t),Qh(t)?(t.Br.Nr(e),Wh(t)):t.Br.set("Unknown"),[2]}))}))}function Zh(t,e,n){return w(this,void 0,void 0,(function(){var r,i,o;return I(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof ys&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return w(this,void 0,void 0,(function(){var n,r,i,o;return I(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Pi("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,tl(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof vs?t.qr.X(e):e instanceof ms?t.qr.rt(e):t.qr.et(e),n.isEqual(Wi.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Wc(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(no.EMPTY_BYTE_STRING,n.snapshotVersion)),zh(t,e);var r=new Uu(n.target,e,1,n.sequenceNumber);Hh(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Pi("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,tl(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function tl(t,e,n){return w(this,void 0,void 0,(function(){var r=this;return I(this,(function(i){switch(i.label){case 0:if(!Cu(e))throw e;return t.Or.add(1),[4,Bh(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Wc(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return w(r,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return Pi("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,qh(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function el(t,e){return e().catch((function(n){return tl(t,n,e)}))}function nl(t){return w(this,void 0,void 0,(function(){var e,n,r,i,o;return I(this,(function(a){switch(a.label){case 0:e=ji(t),n=ll(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return Xh(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Yc(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=ll(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,tl(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return rl(e)&&il(e),[2]}}))}))}function rl(t){return Xh(t)&&!ll(t).tr()&&t.kr.length>0}function il(t){ll(t).start()}function ol(t){return w(this,void 0,void 0,(function(){return I(this,(function(e){return ll(t).Ar(),[2]}))}))}function al(t){return w(this,void 0,void 0,(function(){var e,n,r,i;return I(this,(function(o){for(e=ll(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function sl(t,e,n){return w(this,void 0,void 0,(function(){var r,i;return I(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Vu.from(r,e,n),[4,el(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,nl(t)];case 2:return o.sent(),[2]}}))}))}function ul(t,e){return w(this,void 0,void 0,(function(){return I(this,(function(n){switch(n.label){case 0:return e&&ll(t).pr?[4,function(t,e){return w(this,void 0,void 0,(function(){var n,r;return I(this,(function(i){switch(i.label){case 0:return Ya(r=e.code)&&r!==Ci.ABORTED?(n=t.kr.shift(),ll(t).sr(),[4,el(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,nl(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return rl(t)&&il(t),[2]}}))}))}function cl(t,e){return w(this,void 0,void 0,(function(){var n;return I(this,(function(r){switch(r.label){case 0:return n=ji(t),e?(n.Or.delete(2),[4,qh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Bh(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function hl(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=ji(t);return r.br(),new Mh(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Jh.bind(null,t),Ri:$h.bind(null,t),_r:Zh.bind(null,t)}),t.Mr.push((function(n){return w(e,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Qh(t)?Wh(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Yh(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function ll(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=ji(t);return r.br(),new Fh(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:ol.bind(null,t),Ri:ul.bind(null,t),Ir:al.bind(null,t),Tr:sl.bind(null,t)}),t.Mr.push((function(n){return w(e,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,nl(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Pi("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr}var fl=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new _u,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oi(Ci.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function pl(t,e){if(Li("AsyncQueue",e+": "+t),Cu(t))return new Oi(Ci.UNAVAILABLE,e+": "+t);throw t}var dl=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||po.comparator(e.key,n.key)}:function(t,e){return po.comparator(t.key,e.key)},this.keyedMap=as(),this.sortedSet=new $a(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),vl=function(){function t(){this.Kr=new $a(po.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Vi():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),ml=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,dl.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ca(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),yl=function(){this.Wr=void 0,this.listeners=[]},gl=function(){this.queries=new Sc((function(t){return ha(t)}),ca),this.onlineState="Unknown",this.Gr=new Set};function bl(t,e){return w(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return I(this,(function(c){switch(c.label){case 0:if(n=ji(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new yl),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=pl(s,"Initialization of query '"+la(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&El(n),[2]}}))}))}function wl(t,e){return w(this,void 0,void 0,(function(){var n,r,i,o,a;return I(this,(function(s){return n=ji(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Il(t,e){for(var n=ji(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(a)&&(r=!0);u.Wr=a}}r&&El(n)}function Tl(t,e,n){var r=ji(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function El(t){t.Gr.forEach((function(t){t.next()}))}var _l=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ml(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=ml.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Sl=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Al=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Rs(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Vs(this.R,t.document,!1):Oo.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return ks(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Al(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||hs()).add(a);e.set(c,h)}}return e},t.prototype.complete=function(){return w(this,void 0,void 0,(function(){var t,e,n,r,i;return I(this,(function(o){switch(o.label){case 0:return[4,rh(this.localStore,new Al(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,ih(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Uc(Object.assign({},this.progress),t))]}}))}))}}();var Nl=function(t){this.key=t},kl=function(t){this.key=t},Dl=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=hs(),this.mutatedKeys=hs(),this.lo=pa(t),this.fo=new dl(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new vl,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=ea(this.query)&&i.size===this.query.limit?i.last():null,c=na(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=fa(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(s=!0)),d&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),ea(this.query)||na(this.query))for(;a.size>this.query.limit;){var h=ea(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vi()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new ml(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new vl,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=hs(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new kl(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Nl(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=hs();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return ml.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Cl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ol=function(t){this.key=t,this.bo=!1},Rl=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Sc((function(t){return ha(t)}),ca),this.Vo=new Map,this.So=new Set,this.Do=new $a(po.comparator),this.Co=new Map,this.No=new ah,this.xo={},this.Fo=new Map,this.ko=pc.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function xl(t,e){return w(this,void 0,void 0,(function(){var n,r,i,o,a,s;return I(this,(function(u){switch(u.label){case 0:return n=cf(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Jc(n.localStore,sa(e))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,Pl(n,e,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&Kh(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function Pl(t,e,n,r){return w(this,void 0,void 0,(function(){var i,o,a,s,u,c;return I(this,(function(h){switch(h.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return w(this,void 0,void 0,(function(){var i,o,a;return I(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,Zc(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Wl(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,Zc(t.localStore,e,!0)];case 1:return i=h.sent(),o=new Dl(e,i.Bn),a=o._o(i.documents),s=ds.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),Wl(t,n,u.To),c=new Cl(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function Ll(t,e){return w(this,void 0,void 0,(function(){var n,r,i;return I(this,(function(o){switch(o.label){case 0:return n=ji(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!ca(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,$c(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Gh(n.remoteStore,r.targetId),Hl(n,r.targetId)})).catch(gc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Hl(n,r.targetId),[4,$c(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Ml(t,e,n){return w(this,void 0,void 0,(function(){var r,i,o,a;return I(this,(function(s){switch(s.label){case 0:r=hf(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=ji(t),i=zi.now(),o=e.reduce((function(t,e){return t.add(e.key)}),hs());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],h=Fa(c,n.get(c.key));null!=h&&a.push(new qa(c.key,h,Co(h.value.mapValue),Ra.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new $a(Ki)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Yl(r,i.changes)];case 3:return s.sent(),[4,nl(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=pl(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Fl(t,e){return w(this,void 0,void 0,(function(){var n,r;return I(this,(function(i){switch(i.label){case 0:n=ji(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Qc(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Ui(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Ui(r.bo):t.removedDocuments.size>0&&(Ui(r.bo),r.bo=!1))})),[4,Yl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,gc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Vl(t,e,n){var r=ji(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=ji(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&El(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ul(t,e,n){return w(this,void 0,void 0,(function(){var r,i,o,a,s,u;return I(this,(function(c){switch(c.label){case 0:return(r=ji(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new $a(po.comparator)).insert(o,Oo.newNoDocument(o,Wi.min())),s=hs().add(o),u=new ps(Wi.min(),new Map,new es(Ki),a,s),[4,Fl(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Xl(r),[3,4];case 2:return[4,$c(r.localStore,e,!1).then((function(){return Hl(r,e,n)})).catch(gc)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function jl(t,e){return w(this,void 0,void 0,(function(){var n,r,i;return I(this,(function(o){switch(o.label){case 0:n=ji(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,zc(n.localStore,e)];case 2:return i=o.sent(),Gl(n,r,null),Kl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Yl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,gc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function ql(t,e,n){return w(this,void 0,void 0,(function(){var r,i;return I(this,(function(o){switch(o.label){case 0:r=ji(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ji(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Ui(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Gl(r,e,n),Kl(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Yl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,gc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Bl(t,e){return w(this,void 0,void 0,(function(){var n,r,i,o,a;return I(this,(function(s){switch(s.label){case 0:Xh((n=ji(t)).remoteStore)||Pi("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=ji(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=pl(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Kl(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Gl(t,e,n){var r=ji(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Hl(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||zl(t,e)}))}function zl(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Gh(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Xl(t))}function Wl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Nl?(t.No.addReference(o.key,e),Ql(t,o)):o instanceof kl?(Pi("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||zl(t,o.key)):Vi()}}function Ql(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Pi("SyncEngine","New document in limbo: "+n),t.So.add(r),Xl(t))}function Xl(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new po($i.fromString(e)),r=t.ko.next();t.Co.set(r,new Ol(n)),t.Do=t.Do.insert(n,r),Kh(t.remoteStore,new Uu(sa(ta(n.path)),r,2,Di.o))}}function Yl(t,e,n){return w(this,void 0,void 0,(function(){var r,i,o,a;return I(this,(function(s){switch(s.label){case 0:return r=ji(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.Oo(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=qc.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return w(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h;return I(this,(function(l){switch(l.label){case 0:n=ji(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Su.forEach(e,(function(e){return Su.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Su.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!Cu(r=l.sent()))throw r;return Pi("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Fn.get(s),c=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(s,h));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Jl(t,e){return w(this,void 0,void 0,(function(){var n,r;return I(this,(function(i){switch(i.label){case 0:return(n=ji(t)).currentUser.isEqual(e)?[3,3]:(Pi("SyncEngine","User change. New user:",e.toKey()),[4,Hc(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new Oi(Ci.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Yl(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function $l(t,e){var n=ji(t),r=n.Co.get(e);if(r&&r.bo)return hs().add(r.key);var i=hs(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Zl(t,e){return w(this,void 0,void 0,(function(){var n,r,i;return I(this,(function(o){switch(o.label){case 0:return[4,Zc((n=ji(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Wl(n,e.targetId,i.To),i)]}}))}))}function tf(t){return w(this,void 0,void 0,(function(){var e;return I(this,(function(n){return[2,eh((e=ji(t)).localStore).then((function(t){return Yl(e,t)}))]}))}))}function ef(t,e,n,r){return w(this,void 0,void 0,(function(){var i,o;return I(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=ji(t),r=ji(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):Su.resolve(null)}))}))}((i=ji(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,nl(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Gl(i,e,r||null),Kl(i,e),function(t,e){ji(ji(t)._n).Gt(e)}(i.localStore,e)):Vi(),a.label=4;case 4:return[4,Yl(i,o)];case 5:return a.sent(),[3,7];case 6:Pi("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function nf(t,e){return w(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return I(this,(function(h){switch(h.label){case 0:return cf(n=ji(t)),hf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,rf(n,r.toArray())]);case 1:return i=h.sent(),n.$o=!0,[4,cl(n.remoteStore,!0)];case 2:for(h.sent(),o=0,a=i;o<a.length;o++)s=a[o],Kh(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return Hl(n,e),$c(n.localStore,e,!0)})),Gh(n.remoteStore,e)})),[4,c]);case 4:return h.sent(),[4,rf(n,u)];case 5:return h.sent(),function(t){var e=ji(t);e.Co.forEach((function(t,n){Gh(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new $a(po.comparator)}(n),n.$o=!1,[4,cl(n.remoteStore,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function rf(t,e,n){return w(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h,l,f,p,d,v;return I(this,(function(m){switch(m.label){case 0:n=ji(t),r=[],i=[],o=0,a=e,m.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,Jc(n.localStore,sa(c[0]))]:[3,7]):[3,13];case 2:u=m.sent(),h=0,l=c,m.label=3;case 3:return h<l.length?(f=l[h],p=n.Po.get(f),[4,Zl(n,p)]):[3,6];case 4:(d=m.sent()).snapshot&&i.push(d.snapshot),m.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,th(n.localStore,s)];case 8:return v=m.sent(),[4,Jc(n.localStore,v)];case 9:return u=m.sent(),[4,Pl(n,of(v),s,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function of(t){return Zo(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function af(t){var e=ji(t);return ji(ji(e.localStore).persistence).fn()}function sf(t,e,n,r){return w(this,void 0,void 0,(function(){var i,o,a;return I(this,(function(s){switch(s.label){case 0:return(i=ji(t)).$o?(Pi("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,eh(i.localStore)];case 3:return o=s.sent(),a=ps.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Yl(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,$c(i.localStore,e,!0)];case 6:return s.sent(),Hl(i,e,r),[3,8];case 7:Vi(),s.label=8;case 8:return[2]}}))}))}function uf(t,e,n){return w(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,h,l,f;return I(this,(function(p){switch(p.label){case 0:if(!(r=cf(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(Pi("SyncEngine","Adding an already active target "+a),[3,5]):[4,th(r.localStore,a)]):[3,6];case 2:return s=p.sent(),[4,Jc(r.localStore,s)];case 3:return u=p.sent(),[4,Pl(r,of(s),u.targetId,!1)];case 4:p.sent(),Kh(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return I(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,$c(r.localStore,t,!1).then((function(){Gh(r.remoteStore,t),Hl(r,t)})).catch(gc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function cf(t){var e=ji(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$l.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ul.bind(null,e),e.vo._r=Il.bind(null,e.eventManager),e.vo.Mo=Tl.bind(null,e.eventManager),e}function hf(t){var e=ji(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jl.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ql.bind(null,e),e}var lf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return w(this,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return this.R=xh(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Gc(this.persistence,new Bc,t.initialUser,this.R)},t.prototype.qo=function(t){return new fh(dh.bs,this.R)},t.prototype.Bo=function(t){return new Sh},t.prototype.terminate=function(){return w(this,void 0,void 0,(function(){return I(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),ff=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return g(e,t),e.prototype.initialize=function(e){return w(this,void 0,void 0,(function(){return I(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,nh(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,hf(this.Ko.syncEngine)];case 4:return n.sent(),[4,nl(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return Gc(this.persistence,new Bc,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Ic(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Vc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?oc.withCacheSize(this.cacheSizeBytes):oc.DEFAULT;return new Lc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Oh(),Rh(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Sh},e}(lf),pf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return g(e,t),e.prototype.initialize=function(e){return w(this,void 0,void 0,(function(){var n,r=this;return I(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof _h?(this.sharedClientState.syncEngine={ui:ef.bind(null,n),ai:sf.bind(null,n),hi:uf.bind(null,n),fn:af.bind(null,n),ci:tf.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return w(r,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return[4,nf(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Oh();if(!_h.yt(e))throw new Oi(Ci.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Vc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new _h(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(ff),df=function(){function t(){}return t.prototype.initialize=function(t,e){return w(this,void 0,void 0,(function(){var n=this;return I(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Vl(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Jl.bind(null,this.syncEngine),[4,cl(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new gl},t.prototype.createDatastore=function(t){var e,n=xh(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Ch(e));return function(t,e,n){return new Vh(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Vl(a.syncEngine,t,0)},o=Nh.yt()?new Nh:new Ah,new jh(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new Rl(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return w(this,void 0,void 0,(function(){var e;return I(this,(function(n){switch(n.label){case 0:return e=ji(t),Pi("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Bh(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),vf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),mf=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new _u,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return w(this,void 0,void 0,(function(){return I(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return w(this,void 0,void 0,(function(){return I(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return w(this,void 0,void 0,(function(){var t,e,n,r;return I(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Sl(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return w(this,void 0,void 0,(function(){var t,e;return I(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return w(this,void 0,void 0,(function(){var e;return I(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return w(this,void 0,void 0,(function(){var t,e;return I(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return w(this,void 0,void 0,(function(){var e,n=this;return I(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Oi(Ci.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return w(this,void 0,void 0,(function(){var n,r,i,o,a,s;return I(this,(function(u){switch(u.label){case 0:return n=ji(t),r=Ls(n.R)+"/documents",i={documents:e.map((function(t){return Os(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Ui(!!e.found),e.found.name,e.found.updateTime;var n=Rs(t,e.found.name),r=ks(e.found.updateTime),i=new Do({mapValue:{fields:e.found.fields}});return Oo.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Ui(!!e.missing),Ui(!!e.readTime);var n=Rs(t,e.missing),r=ks(e.readTime);return Oo.newNoDocument(n,r)}(t,e):Vi()}(n.R,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());Ui(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Wa(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return w(this,void 0,void 0,(function(){var t,e=this;return I(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=po.fromPath(n);e.mutations.push(new Qa(r,e.precondition(r)))})),[4,function(t,e){return w(this,void 0,void 0,(function(){var n,r,i;return I(this,(function(o){switch(o.label){case 0:return n=ji(t),r=Ls(n.R)+"/documents",i={writes:e.map((function(t){return Us(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Vi();e=Wi.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Oi(Ci.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ra.updateTime(e):Ra.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Wi.min()))throw new Oi(Ci.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ra.updateTime(e)}return Ra.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),yf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Ph(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return w(t,void 0,void 0,(function(){var t,e,n=this;return I(this,(function(r){return t=new mf(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ho(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ya(e)}return!1},t}(),gf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=vh.UNAUTHENTICATED,this.clientId=Bi.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return w(r,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return Pi("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return w(this,void 0,void 0,(function(){return I(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Oi(Ci.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new _u;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return w(t,void 0,void 0,(function(){var t,n;return I(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=pl(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function bf(t,e){return w(this,void 0,void 0,(function(){var n,r,i=this;return I(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Pi("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return w(i,void 0,void 0,(function(){return I(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Hc(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function wf(t,e){return w(this,void 0,void 0,(function(){var n,r;return I(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,If(t)];case 1:return n=i.sent(),Pi("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return w(this,void 0,void 0,(function(){var n,r;return I(this,(function(i){switch(i.label){case 0:return(n=ji(t)).asyncQueue.verifyOperationInProgress(),Pi("RemoteStore","RemoteStore received new credentials"),r=Xh(n),n.Or.add(3),[4,Bh(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,qh(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function If(t){return w(this,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Pi("FirestoreClient","Using default OfflineComponentProvider"),[4,bf(t,new lf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Tf(t){return w(this,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Pi("FirestoreClient","Using default OnlineComponentProvider"),[4,wf(t,new df)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Ef(t){return If(t).then((function(t){return t.persistence}))}function _f(t){return If(t).then((function(t){return t.localStore}))}function Sf(t){return Tf(t).then((function(t){return t.remoteStore}))}function Af(t){return Tf(t).then((function(t){return t.syncEngine}))}function Nf(t){return w(this,void 0,void 0,(function(){var e,n;return I(this,(function(r){switch(r.label){case 0:return[4,Tf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=xl.bind(null,e.syncEngine),n.onUnlisten=Ll.bind(null,e.syncEngine),n)]}}))}))}function kf(t,e,n){var r=this;void 0===n&&(n={});var i=new _u;return t.asyncQueue.enqueueAndForget((function(){return w(r,void 0,void 0,(function(){var r;return I(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new vf({next:function(o){e.enqueueAndForget((function(){return wl(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Oi(Ci.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Oi(Ci.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new _l(ta(n.path),o,{includeMetadataChanges:!0,so:!0});return bl(t,a)},[4,Nf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Df(t,e,n){var r=this;void 0===n&&(n={});var i=new _u;return t.asyncQueue.enqueueAndForget((function(){return w(r,void 0,void 0,(function(){var r;return I(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new vf({next:function(n){e.enqueueAndForget((function(){return wl(t,a)})),n.fromCache&&"server"===r.source?i.reject(new Oi(Ci.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new _l(n,o,{includeMetadataChanges:!0,so:!0});return bl(t,a)},[4,Nf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Cf=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},Of=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Rf=new Map,xf=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Pf=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(vh.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Lf=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Mf=function(){function t(t){var e=this;this.currentUser=vh.UNAUTHENTICATED,this.oc=new _u,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Pi("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Pi("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Pi("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ui("string"==typeof n.accessToken),new xf(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return w(n,void 0,void 0,(function(){return I(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Ui(null===t||"string"==typeof t),new vh(t)},t}(),Ff=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=vh.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Vf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Ff(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(vh.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Uf(t,e,n){if(!n)throw new Oi(Ci.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function jf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oi(Ci.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function qf(t,e,n,r){if(!0===e&&!0===r)throw new Oi(Ci.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Bf(t){if(!po.isDocumentKey(t))throw new Oi(Ci.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Kf(t){if(po.isDocumentKey(t))throw new Oi(Ci.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Gf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Vi()}function Hf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Oi(Ci.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Gf(t);throw new Oi(Ci.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function zf(t,e){if(e<=0)throw new Oi(Ci.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Wf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Oi(Ci.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Oi(Ci.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,qf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Qf=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wf({}),this._settingsFrozen=!1,t instanceof Of?(this._databaseId=t,this._credentials=new Pf):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Oi(Ci.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Of(t.options.projectId)}(t),this._credentials=new Mf(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Oi(Ci.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Oi(Ci.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wf(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Pf;switch(t.type){case"gapi":var e=t.client;return Ui(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Vf(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Oi(Ci.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Rf.get(this))&&(Pi("ComponentProvider","Removing Datastore"),Rf.delete(this),t.terminate()),Promise.resolve();var t},t}(),Xf=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Jf(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Yf=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Jf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ta(r))||this)._path=r,i.type="collection",i}return g(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Xf(this.firestore,null,new po(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Yf);function $f(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=M(t),Uf("collection","path",e),t instanceof Qf)return Kf(n=$i.fromString.apply($i,_([e],r))),new Jf(t,null,n);if(!(t instanceof Xf||t instanceof Jf))throw new Oi(Ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Kf(n=$i.fromString.apply($i,_([t.path],r)).child($i.fromString(e))),new Jf(t.firestore,null,n)}function Zf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=M(t),1===arguments.length&&(e=Bi.u()),Uf("doc","path",e),t instanceof Qf)return Bf(n=$i.fromString.apply($i,_([e],r))),new Xf(t,null,new po(n));if(!(t instanceof Xf||t instanceof Jf))throw new Oi(Ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Bf(n=t._path.child($i.fromString.apply($i,_([e],r)))),new Xf(t.firestore,t instanceof Jf?t.converter:null,new po(n))}function tp(t,e){return t=M(t),e=M(e),(t instanceof Xf||t instanceof Jf)&&(e instanceof Xf||e instanceof Jf)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function ep(t,e){return t=M(t),e=M(e),t instanceof Yf&&e instanceof Yf&&t.firestore===e.firestore&&ca(t._query,e._query)&&t.converter===e.converter}var np=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new Ph(this,"async_queue_retry"),this.Tc=function(){var e=Rh();e&&Pi("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Rh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=Rh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise((function(t){})):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.Rc()}))},t.prototype.Rc=function(){return w(this,void 0,void 0,(function(){var t,e=this;return I(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Cu(t=n.sent()))throw t;return Pi("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.Rc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ac=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Li("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=fl.createAndSchedule(this,t,e,n,(function(t){return r.bc(t)}));return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&Vi()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return w(this,void 0,void 0,(function(){var t;return I(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()}))},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function rp(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new _u,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var ip=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new np,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return g(e,t),e.prototype._terminate=function(){return this._firestoreClient||ap(this),this._firestoreClient.terminate()},e}(Qf);function op(t){return t._firestoreClient||ap(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ap(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Cf(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new gf(t._credentials,t._queue,r)}function sp(t,e,n){var r=this,i=new _u;return t.asyncQueue.enqueue((function(){return w(r,void 0,void 0,(function(){var r;return I(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,bf(t,n)];case 1:return o.sent(),[4,wf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ci.FAILED_PRECONDITION||t.code===Ci.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function up(t){if(t._initialized||t._terminated)throw new Oi(Ci.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var cp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Oi(Ci.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new to(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),hp=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(no.fromBase64String(e))}catch(e){throw new Oi(Ci.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(no.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),lp=function(t){this._methodName=t},fp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Oi(Ci.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Oi(Ci.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Ki(this._lat,t._lat)||Ki(this._long,t._long)},t}(),pp=/^__.*__$/,dp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new qa(t,this.data,this.fieldMask,e,this.fieldTransforms):new ja(t,this.data,e,this.fieldTransforms)},t}(),vp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new qa(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function mp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vi()}}var yp=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return Fp(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(mp(this.Cc)&&pp.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),gp=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||xh(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new yp({Cc:t,methodName:e,Bc:n,path:to.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function bp(t){var e=t._freezeSettings(),n=xh(t._databaseId);return new gp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wp(t,e,n,r,i,o){void 0===o&&(o={});var a=t.qc(o.merge||o.mergeFields?2:0,e,n,i);xp("Data must be an object, but it was:",a,r);var s,u,c=Op(r,a);if(o.merge)s=new eo(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=Pp(e,f[l],n);if(!a.contains(p))throw new Oi(Ci.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Vp(h,p)||h.push(p)}s=new eo(h),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new dp(new Do(c),s,u)}var Ip=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw 1===t.Cc?t.Mc(this._methodName+"() can only appear at the top level of your update data"):t.Mc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(lp);function Tp(t,e,n){return new yp({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Ep=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype._toFieldTransform=function(t){return new Ca(t.path,new Ta)},e.prototype.isEqual=function(t){return t instanceof e},e}(lp),_p=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return g(e,t),e.prototype._toFieldTransform=function(t){var e=Tp(this,t,!0),n=this.Uc.map((function(t){return Cp(t,e)})),r=new Ea(n);return new Ca(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(lp),Sp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return g(e,t),e.prototype._toFieldTransform=function(t){var e=Tp(this,t,!0),n=this.Uc.map((function(t){return Cp(t,e)})),r=new Sa(n);return new Ca(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(lp),Ap=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return g(e,t),e.prototype._toFieldTransform=function(t){var e=new Na(t.R,ya(t.R,this.Qc));return new Ca(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(lp);function Np(t,e,n,r){var i=t.qc(1,e,n);xp("Data must be an object, but it was:",i,r);var o=[],a=Do.empty();Xi(r,(function(t,r){var s=Mp(e,t,n);r=M(r);var u=i.$c(s);if(r instanceof Ip)o.push(s);else{var c=Cp(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new eo(o);return new vp(a,s,i.fieldTransforms)}function kp(t,e,n,r,i,o){var a=t.qc(1,e,n),s=[Pp(e,r,n)],u=[i];if(o.length%2!=0)throw new Oi(Ci.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Pp(e,o[c])),u.push(o[c+1]);for(var h=[],l=Do.empty(),f=s.length-1;f>=0;--f)if(!Vp(h,s[f])){var p=s[f],d=u[f];d=M(d);var v=a.$c(p);if(d instanceof Ip)h.push(p);else{var m=Cp(d,v);null!=m&&(h.push(p),l.set(p,m))}}var y=new eo(h);return new vp(l,y,a.fieldTransforms)}function Dp(t,e,n,r){return void 0===r&&(r=!1),Cp(n,t.qc(r?4:3,e))}function Cp(t,e){if(Rp(t=M(t)))return xp("Unsupported field value:",e,t),Op(t,e);if(t instanceof lp)return function(t,e){if(!mp(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Cp(o[i],e.Oc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=M(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ya(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=zi.fromDate(t);return{timestampValue:Ss(e.R,n)}}if(t instanceof zi)return n=new zi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ss(e.R,n)};if(t instanceof fp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hp)return{bytesValue:As(e.R,t._byteString)};if(t instanceof Xf){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ds(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+Gf(t))}(t,e)}function Op(t,e){var n={};return Yi(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xi(t,(function(t,r){var i=Cp(r,e.xc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Rp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof zi||t instanceof fp||t instanceof hp||t instanceof Xf||t instanceof lp)}function xp(t,e,n){if(!Rp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Gf(n);throw"an object"===r?e.Mc(t+" a custom object"):e.Mc(t+" "+r)}}function Pp(t,e,n){if((e=M(e))instanceof cp)return e._internalPath;if("string"==typeof e)return Mp(t,e);throw Fp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Lp=new RegExp("[~\\*/\\[\\]]");function Mp(t,e,n){if(e.search(Lp)>=0)throw Fp("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(cp.bind.apply(cp,_([void 0],e.split(".")))))._internalPath}catch(r){throw Fp("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Fp(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Oi(Ci.INVALID_ARGUMENT,(s+=". ")+t+u)}function Vp(t,e){return t.some((function(t){return t.isEqual(e)}))}var Up=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Xf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new jp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(qp("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),jp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Up);function qp(t,e){return"string"==typeof e?Mp(t,e):e instanceof cp?e._internalPath:e._delegate._internalPath}var Bp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Kp=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return g(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Gp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(qp("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Up),Gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Kp),Hp=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Bp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Gp(n._firestore,n._userDataWriter,r.key,r,new Bp(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Oi(Ci.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new Gp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Bp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Gp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Bp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:zp(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function zp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vi()}}function Wp(t,e){return t instanceof Kp&&e instanceof Kp?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Hp&&e instanceof Hp&&t._firestore===e._firestore&&ep(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Qp(t){if(na(t)&&0===t.explicitOrderBy.length)throw new Oi(Ci.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xp=function(){};function Yp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=i[r]._apply(t);return t}var Jp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Kc=e,i.jc=n,i.Wc=r,i.type="where",i}return g(e,t),e.prototype._apply=function(t){var e=bp(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Oi(Ci.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){id(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push(rd(r,t,l))}s={arrayValue:{values:u}}}else s=rd(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||id(a,o),s=Dp(n,"where",a,"in"===o||"not-in"===o);var f=Fo.create(i,o,s);return function(t,e){if(e.g()){var n=ia(t);if(null!==n&&!n.isEqual(e.field))throw new Oi(Ci.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ra(t);null!==r&&od(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Oi(Ci.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Oi(Ci.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.Kc,this.jc,this.Wc);return new Yf(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new $o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Xp),$p=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kc=e,r.Gc=n,r.type="orderBy",r}return g(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Oi(Ci.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Oi(Ci.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Qo(e,n);return function(t,e){if(null===ra(t)){var n=ia(t);null!==n&&od(0,n,e.field)}}(t,r),r}(t._query,this.Kc,this.Gc);return new Yf(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new $o(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Xp),Zp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return g(e,t),e.prototype._apply=function(t){return new Yf(t.firestore,t.converter,ua(t._query,this.zc,this.Hc))},e}(Xp),td=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return g(e,t),e.prototype._apply=function(t){var e=nd(t,this.type,this.Jc,this.Yc);return new Yf(t.firestore,t.converter,function(t,e){return new $o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Xp),ed=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return g(e,t),e.prototype._apply=function(t){var e=nd(t,this.type,this.Jc,this.Yc);return new Yf(t.firestore,t.converter,function(t,e){return new $o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Xp);function nd(t,e,n,r){if(n[0]=M(n[0]),n[0]instanceof Up)return function(t,e,n,r,i){if(!r)throw new Oi(Ci.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=aa(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(To(e,r.key));else{var c=r.data.field(u.field);if(so(c))throw new Oi(Ci.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new Oi(Ci.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new zo(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=bp(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Oi(Ci.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Oi(Ci.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!oa(t)&&-1!==c.indexOf("/"))throw new Oi(Ci.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child($i.fromString(c));if(!po.isDocumentKey(h))throw new Oi(Ci.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new po(h);s.push(To(e,l))}else{var f=Dp(n,r,c);s.push(f)}}return new zo(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function rd(t,e,n){if("string"==typeof(n=M(n))){if(""===n)throw new Oi(Ci.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!oa(e)&&-1!==n.indexOf("/"))throw new Oi(Ci.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child($i.fromString(n));if(!po.isDocumentKey(r))throw new Oi(Ci.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return To(t,new po(r))}if(n instanceof Xf)return To(t,n._key);throw new Oi(Ci.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Gf(n)+".")}function id(t,e){if(!Array.isArray(t)||0===t.length)throw new Oi(Ci.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Oi(Ci.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function od(t,e,n){if(!n.isEqual(e))throw new Oi(Ci.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var ad=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),vo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return oo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ao(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Vi()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Xi(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new fp(oo(t.latitude),oo(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=uo(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(co(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=io(t);return new zi(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=$i.fromString(t);Ui(tu(n));var r=new Of(n.get(1),n.get(3)),i=new po(n.popFirst(5));return r.isEqual(e)||Li("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function sd(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ud=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return g(e,t),e.prototype.convertBytes=function(t){return new hp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Xf(this.firestore,null,e)},e}(ad),cd=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=bp(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=hd(t,this._firestore),i=sd(r.converter,e,n),o=wp(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Ra.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=hd(t,this._firestore);return o="string"==typeof(e=M(e))||e instanceof cp?kp(this._dataReader,"WriteBatch.update",a._key,e,n,r):Np(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,Ra.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=hd(t,this._firestore);return this._mutations=this._mutations.concat(new Wa(e._key,Ra.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Oi(Ci.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function hd(t,e){if((t=M(t)).firestore!==e)throw new Oi(Ci.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var ld=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return g(e,t),e.prototype.convertBytes=function(t){return new hp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Xf(this.firestore,null,e)},e}(ad);function fd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Hf(t,Xf);var o=Hf(t.firestore,ip),a=bp(o);return dd(o,[("string"==typeof(e=M(e))||e instanceof cp?kp(a,"updateDoc",t._key,e,n,r):Np(a,"updateDoc",t._key,e)).toMutation(t._key,Ra.exists(!0))])}function pd(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=M(t);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||rp(i[s])||(a=i[s],s++);var u,c,h,l={includeMetadataChanges:a.includeMetadataChanges};if(rp(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Xf)c=Hf(t.firestore,ip),h=ta(t._key.path),u={next:function(e){i[s]&&i[s](vd(c,t,e))},error:i[s+1],complete:i[s+2]};else{var p=Hf(t,Yf);c=Hf(p.firestore,ip),h=p._query;var d=new ld(c);u={next:function(t){i[s]&&i[s](new Hp(c,d,p,t))},error:i[s+1],complete:i[s+2]},Qp(t._query)}return function(t,e,n,r){var i=this,o=new vf(r),a=new _l(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return w(i,void 0,void 0,(function(){var e;return I(this,(function(n){switch(n.label){case 0:return e=bl,[4,Nf(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return w(i,void 0,void 0,(function(){var e;return I(this,(function(n){switch(n.label){case 0:return e=wl,[4,Nf(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(op(c),h,l,u)}function dd(t,e){return function(t,e){var n=this,r=new _u;return t.asyncQueue.enqueueAndForget((function(){return w(n,void 0,void 0,(function(){var n;return I(this,(function(i){switch(i.label){case 0:return n=Ml,[4,Af(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(op(t),e)}function vd(t,e,n){var r=n.docs.get(e._key),i=new ld(t);return new Kp(t,i,e._key,r,new Bp(n.hasPendingWrites,n.fromCache),e.converter)}var md=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return g(e,t),e.prototype.get=function(e){var n=this,r=hd(e,this._firestore),i=new ld(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Kp(n._firestore,i,r._key,t._document,new Bp(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=bp(t)}return t.prototype.get=function(t){var e=this,n=hd(t,this._firestore),r=new ud(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Vi();var i=t[0];if(i.isFoundDocument())return new Up(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Up(e._firestore,r,n._key,null,n.converter);throw Vi()}))},t.prototype.set=function(t,e,n){var r=hd(t,this._firestore),i=sd(r.converter,e,n),o=wp(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=hd(t,this._firestore);return o="string"==typeof(e=M(e))||e instanceof cp?kp(this._dataReader,"Transaction.update",a._key,e,n,r):Np(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=hd(t,this._firestore);return this._transaction.delete(e._key),this},t}());function yd(){if("undefined"==typeof Uint8Array)throw new Oi(Ci.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function gd(){if("undefined"==typeof atob)throw new Oi(Ci.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var bd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return gd(),new t(hp.fromBase64String(e))},t.fromUint8Array=function(e){return yd(),new t(hp.fromUint8Array(e))},t.prototype.toBase64=function(){return gd(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return yd(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),wd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){up(t=Hf(t,ip));var n=op(t),r=t._freezeSettings(),i=new df;return sp(n,i,new ff(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){up(t=Hf(t,ip));var e=op(t),n=t._freezeSettings(),r=new df;return sp(e,r,new pf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Oi(Ci.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new _u;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return w(e,void 0,void 0,(function(){var e;return I(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return w(this,void 0,void 0,(function(){var e;return I(this,(function(n){switch(n.label){case 0:return Nu.yt()?(e=t+"main",[4,Nu.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Vc(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Id=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Of||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Mi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Hf(t,Qf))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Mi("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n="demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=b({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[S.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),S.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new Oi(Ci.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Lf(new xf(o,new vh(a)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return w(e,void 0,void 0,(function(){var e,n;return I(this,(function(r){switch(r.label){case 0:return[4,Ef(t)];case 1:return e=r.sent(),[4,Sf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=ji(t);return e.Or.delete(0),qh(e)}(n))]}}))}))}))}(op(Hf(this._delegate,ip)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return w(e,void 0,void 0,(function(){var e,n;return I(this,(function(r){switch(r.label){case 0:return[4,Ef(t)];case 1:return e=r.sent(),[4,Sf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return w(this,void 0,void 0,(function(){var e;return I(this,(function(n){switch(n.label){case 0:return(e=ji(t)).Or.add(0),[4,Bh(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(op(Hf(this._delegate,ip)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&qf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new _u;return t.asyncQueue.enqueueAndForget((function(){return w(e,void 0,void 0,(function(){var e;return I(this,(function(r){switch(r.label){case 0:return e=Bl,[4,Af(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(op(Hf(this._delegate,ip)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new vf(e);return t.asyncQueue.enqueueAndForget((function(){return w(n,void 0,void 0,(function(){var e;return I(this,(function(n){switch(n.label){case 0:return e=function(t,e){ji(t).Gr.add(e),e.next()},[4,Nf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return w(n,void 0,void 0,(function(){var e;return I(this,(function(n){switch(n.label){case 0:return e=function(t,e){ji(t).Gr.delete(e)},[4,Nf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(op(t=Hf(t,ip)),rp(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new Oi(Ci.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Ld(this,$f(this._delegate,t))}catch(t){throw Nd(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Ad(this,Zf(this._delegate,t))}catch(t){throw Nd(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Rd(this,function(t,e){if(t=Hf(t,Qf),Uf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oi(Ci.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Yf(t,null,function(t){return new $o($i.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Nd(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new _u;return t.asyncQueue.enqueueAndForget((function(){return w(n,void 0,void 0,(function(){var n;return I(this,(function(i){switch(i.label){case 0:return[4,function(t){return Tf(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new yf(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(op(t),(function(n){return e(new md(t,n))}))}(this._delegate,(function(n){return t(new Ed(e,n))}))},t.prototype.batch=function(){var t=this;return op(this._delegate),new _d(new cd(this._delegate,(function(e){return dd(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Oi(Ci.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Oi(Ci.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Td=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return g(e,t),e.prototype.convertBytes=function(t){return new bd(new hp(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Ad.tu(e,this.firestore,null)},e}(ad),Ed=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Td(t)}return t.prototype.get=function(t){var e=this,n=Md(t);return this._delegate.get(n).then((function(t){return new Cd(e._firestore,new Kp(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Md(t);return n?(jf("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Md(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,_([a,e,n],i)),this},t.prototype.delete=function(t){var e=Md(t);return this._delegate.delete(e),this},t}(),_d=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Md(t);return n?(jf("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Md(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,_([a,e,n],i)),this},t.prototype.delete=function(t){var e=Md(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Sd=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Gp(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Od(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Td(e),n),i.set(n,o)),o},t}();Sd.nu=new WeakMap;var Ad=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Td(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new Oi(Ci.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Xf(n._delegate,r,new po(e)))},t.tu=function(e,n,r){return new t(n,new Xf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ld(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Ld(this.firestore,$f(this._delegate,t))}catch(t){throw Nd(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=M(t))instanceof Xf&&tp(this._delegate,t)},t.prototype.set=function(t,e){e=jf("DocumentReference.set",e);try{return function(t,e,n){t=Hf(t,Xf);var r=Hf(t.firestore,ip),i=sd(t.converter,e,n);return dd(r,[wp(bp(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Ra.none())])}(this._delegate,t,e)}catch(t){throw Nd(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?fd(this._delegate,t):fd.apply(void 0,_([this._delegate,t,e],n))}catch(t){throw Nd(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return dd(Hf((t=this._delegate).firestore,ip),[new Wa(t._key,Ra.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=kd(e),i=Dd(e,(function(e){return new Cd(t.firestore,new Kp(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return pd(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Hf(t,Xf);var e=Hf(t.firestore,ip),n=op(e),r=new ld(e);return function(t,e){var n=this,r=new _u;return t.asyncQueue.enqueueAndForget((function(){return w(n,void 0,void 0,(function(){var n;return I(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return w(this,void 0,void 0,(function(){var r,i;return I(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ji(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Oi(Ci.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=pl(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,_f(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Kp(e,r,t._key,n,new Bp(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Hf(t,Xf);var e=Hf(t.firestore,ip);return kf(op(e),t._key,{source:"server"}).then((function(n){return vd(e,t,n)}))}(this._delegate):function(t){t=Hf(t,Xf);var e=Hf(t.firestore,ip);return kf(op(e),t._key).then((function(n){return vd(e,t,n)}))}(this._delegate)).then((function(t){return new Cd(e.firestore,new Kp(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Sd.eu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Nd(t,e,n){return t.message=t.message.replace(e,n),t}function kd(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!rp(r))return r}return{}}function Dd(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=rp(t[0])?t[0]:rp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Cd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Ad(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Wp(this._delegate,t._delegate)},t}(),Od=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Cd),Rd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Td(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Yp(this._delegate,function(t,e,n){var r=e,i=qp("where",t);return new Jp(i,r,n)}(e,n,r)))}catch(e){throw Nd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Yp(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=qp("orderBy",t);return new $p(r,n)}(e,n)))}catch(e){throw Nd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Yp(this._delegate,function(t){return zf("limit",t),new Zp("limit",t,"F")}(e)))}catch(e){throw Nd(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Yp(this._delegate,function(t){return zf("limitToLast",t),new Zp("limitToLast",t,"L")}(e)))}catch(e){throw Nd(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Yp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new td("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Nd(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Yp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new td("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Nd(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Yp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ed("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Nd(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Yp(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ed("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Nd(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return ep(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Hf(t,Yf);var e=Hf(t.firestore,ip),n=op(e),r=new ld(e);return function(t,e){var n=this,r=new _u;return t.asyncQueue.enqueueAndForget((function(){return w(n,void 0,void 0,(function(){var n;return I(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return w(this,void 0,void 0,(function(){var r,i,o,a,s;return I(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Zc(t,e,!0)];case 1:return s=u.sent(),r=new Dl(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=pl(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,_f(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Hp(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Hf(t,Yf);var e=Hf(t.firestore,ip),n=op(e),r=new ld(e);return Df(n,t._query,{source:"server"}).then((function(n){return new Hp(e,r,t,n)}))}(this._delegate):function(t){t=Hf(t,Yf);var e=Hf(t.firestore,ip),n=op(e),r=new ld(e);return Qp(t._query),Df(n,t._query).then((function(n){return new Hp(e,r,t,n)}))}(this._delegate)).then((function(t){return new Pd(e.firestore,new Hp(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=kd(e),i=Dd(e,(function(e){return new Pd(t.firestore,new Hp(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return pd(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Sd.eu(this.firestore,e)):this._delegate.withConverter(null))},t}(),xd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Od(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Pd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Rd(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Od(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new xd(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Od(n._firestore,r))}))},t.prototype.isEqual=function(t){return Wp(this._delegate,t._delegate)},t}(),Ld=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return g(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Ad(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ad(this.firestore,void 0===t?Zf(this._delegate):Zf(this._delegate,t))}catch(t){throw Nd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Hf(t.firestore,ip),r=Zf(t),i=sd(t.converter,e);return dd(n,[wp(bp(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Ra.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Ad(e.firestore,t)}))},e.prototype.isEqual=function(t){return tp(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Sd.eu(this.firestore,t)):this._delegate.withConverter(null))},e}(Rd);function Md(t){return Hf(t,Xf)}var Fd,Vd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(cp.bind.apply(cp,_([void 0],t)))}return t.documentId=function(){return new t(to.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=M(t))instanceof cp&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Ud=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Ep("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Ip("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _p("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sp("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Ap("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),jd={Firestore:Id,GeoPoint:fp,Timestamp:zi,Blob:bd,Transaction:Ed,WriteBatch:_d,DocumentReference:Ad,DocumentSnapshot:Cd,Query:Rd,QueryDocumentSnapshot:Od,QuerySnapshot:Pd,CollectionReference:Ld,FieldPath:Vd,FieldValue:Ud,setLogLevel:function(t){var e;e=t,Ri.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new V("firestore",(function(t){return function(t,e){return new Id(t,new ip(t,e),new wd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},jd)))})(Fd=lt),Fd.registerVersion("@firebase/firestore","2.3.7");const qd=(0,e.initializeApp)({apiKey:"AIzaSyBVTT9A6wUiorP4IeClKMeGkyhS-at7Lg8",authDomain:"cuengenv.firebaseapp.com",projectId:"cuengenv",storageBucket:"cuengenv.appspot.com",messagingSenderId:"824892336924",appId:"1:824892336924:web:a2d9723b09eef4ef0528d9",measurementId:"G-4RM7BHDCC9"}),Bd=(0,t.getAuth)(qd);(0,t.connectAuthEmulator)(Bd,"http://localhost:9099"),ft.addEventListener("click",(async()=>{const e=txtEmal.value,n=txtPassword.value,r=await(0,t.signInWithEmailAndPassword)(Bd,e,n);console.log(r.user)})),(0,t.onAuthStateChanged)(Bd,(t=>{null!=t?console.log("เข้าสู่ระบบแล้ว"):console.log("ไม่มีสิทธิ์")})),console.log("เว็บไซต์นี้ถูกเขียนโดย เทพสิทธิ์ เหลืองศิริธัญญะ")})()})();